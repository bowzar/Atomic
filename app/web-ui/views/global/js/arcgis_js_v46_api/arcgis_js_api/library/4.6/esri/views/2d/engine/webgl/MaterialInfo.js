// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.6/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/ObjectPool ./MaterialKeyInfo ./MaterialInfoUtils ./Utils".split(" "),function(q,r,n,l,p,g){return function(){function c(){this.texBindingInfo=[];this.materialParams=[]}c.prototype.release=function(){this.materialKey=null;this.texBindingInfo.length=0;this.materialParams.length=0;this.materialKeyInfo&&l.pool.release(this.materialKeyInfo)};c.prototype.copy=function(b){var d=this;b.materialParams.forEach(function(b,a){d.materialParams[a]={name:b.name,value:b.value}});
b.texBindingInfo.forEach(function(b,a){d.texBindingInfo[a]={unit:b.unit,pageId:b.pageId,semantic:b.semantic}});this.materialKeyInfo&&(l.pool.release(this.materialKeyInfo),this.materialKeyInfo=null);b.materialKeyInfo&&(this.materialKeyInfo=l.pool.acquire(),this.materialKeyInfo.copy(b.materialKeyInfo));this.materialKey=b.materialKey};c.serialize=function(b,d,e){var a=0,a=a+g.serializeInteger(b.materialKey,d,e+a),a=a+c._serializeTexBindingInfo(b.texBindingInfo,d,e+a);return a+=c._serializeMaterialParams(b.materialParams,
d,e+a)};c.deserialize=function(b,d,e){var a=0;b.materialInfo=c.pool.acquire();var m={n:0},a=a+g.deserializeInteger(m,d,e+a);b.materialInfo.materialKey=m.n;a+=c._deserializeTexBindingInfo(b.materialInfo.texBindingInfo,d,e+a);a+=c._deserializeMaterialParams(b.materialInfo.materialParams,d,e+a);b.materialInfo.materialKeyInfo=l.pool.acquire();p.updateMaterialVariations(b.materialInfo.materialKeyInfo,b.materialInfo.materialKey);return a};c._serializeTexBindingInfo=function(b,d,e){for(var a=0,c=b.length,
a=a+g.serializeInteger(c,d,e+a),f=0;f<c;++f)d&&(d[e+a]=b[f].unit),++a,a+=g.serializeInteger(b[f].pageId,d,e+a),a+=g.serializeString(b[f].semantic,d,e+a);return a};c._serializeMaterialParams=function(b,d,e){for(var a=0,c=b.length,a=a+g.serializeInteger(c,d,e+a),f=0;f<c;++f)a+=g.serializeString(b[f].name,d,e+a),a+=g.serializeUniform(b[f].value,d,e+a);return a};c._deserializeTexBindingInfo=function(b,d,e){var a=0,c={n:void 0},a=a+g.deserializeInteger(c,d,e+a);b.length=c.n;for(var f={n:void 0},k={s:void 0},
h=0;h<c.n;++h)b[h]={unit:void 0,pageId:void 0,semantic:void 0},b[h].unit=d[e+a],++a,a+=g.deserializeInteger(f,d,e+a),b[h].pageId=f.n,a+=g.deserializeString(k,d,e+a),b[h].semantic=k.s;return a};c._deserializeMaterialParams=function(b,d,c){var a=0,e={n:void 0},a=a+g.deserializeInteger(e,d,c+a);b.length=e.n;for(var f={s:void 0},k={n:void 0},h=0;h<e.n;++h)b[h]={name:void 0,value:void 0},a+=g.deserializeString(f,d,c+a),b[h].name=f.s,a+=g.deserializeUniform(k,d,c+a),b[h].value=k.n;return a};c.pool=new n(c);
return c}()});