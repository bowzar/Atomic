// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.6/esri/copyright.txt for details.
//>>built
define("require exports ./IdGen ./Util ./BoundingInfo ./ComponentUtils ./Util".split(" "),function(x,y,f,r,t,w,h){return function(){function a(c,d,b){this.singleUse=!1;this.componentAABB=null;this.id=a.__idGen.gen(d);this.data=c;this.boundingInfo=b}a.prototype.getId=function(){return this.id};a.prototype.getData=function(){return this.data};a.prototype.getComponentCount=function(){return w.componentCount(this.data.componentOffsets)};a.prototype.getComponentAABB=function(c,d){null==this.componentAABB&&
(this.componentAABB=this._computeComponentAABB());for(var b=0;6>b;b++)d[b]=this.componentAABB[6*c+b];return d};a.prototype._computeComponentAABB=function(){for(var c=this.getComponentCount(),d=new Float32Array(6*c),b=0;b<c;b++)this._calculateAABB(b,d,6*b);return d};a.prototype._calculateAABB=function(c,d,b){void 0===b&&(b=0);var u=this.data.getIndices(h.VertexAttrConstants.POSITION),a=this.data.getAttribute(h.VertexAttrConstants.POSITION),e=this.data.componentOffsets,f=e.length?e[c+1]:u.length,k=
Infinity,l=Infinity,m=Infinity,n=-Infinity,p=-Infinity,q=-Infinity,r=a.offsetIdx,t=a.strideIdx;for(c=e.length?e[c]:0;c<f;c++)var g=r+t*u[c],e=a.data[g],v=a.data[g+1],g=a.data[g+2],k=Math.min(k,e),l=Math.min(l,v),m=Math.min(m,g),n=Math.max(n,e),p=Math.max(p,v),q=Math.max(q,g);d?(d[b]=k,d[b+1]=l,d[b+2]=m,d[b+3]=n,d[b+4]=p,d[b+5]=q):d=[k,l,m,n,p,q];return d};a.prototype.calculateBoundingInfo=function(){var c=this.data.getIndices(h.VertexAttrConstants.POSITION),d=this.data.getAttribute(h.VertexAttrConstants.POSITION),
b="triangle"===this.data.primitiveType?3:1;if(0===c.length)for(var c=new Uint32Array(b),a=0;a<b;++a)c[a]=a;a=c.length;r.assert(0===a%b);for(var f=a/b,e=new Uint32Array(f),a=0;a<f;++a)e[a]=a;return new t(e,b,c,d)};a.prototype.getBoundingInfo=function(){null==this.boundingInfo&&(this.boundingInfo=this.calculateBoundingInfo());return this.boundingInfo};a.prototype.invalidateBoundingInfo=function(){this.boundingInfo=null};a.__idGen=new f;return a}()});