// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.6/esri/copyright.txt for details.
//>>built
define(["../core/Accessor","../core/Collection","../core/Logger"],function(h,e,k){var g=function(b,a,c){for(var d,f=0,e=b.length;f<e;f++)if(d=b.getItemAt(f),d[a]===c||d.layers&&(d=g(d.layers,a,c)))return d},l=k.getLogger("esri.support.LayersMixin");return h.createSubclass({declaredClass:"esri.support.LayersMixin",destroy:function(){this._layersHandle.remove();this._layersHandle=null;this.layers.drain(this._lyrRemove,this)},properties:{layers:{type:e,get:function(){var b=this._get("layers");if(b)return b;
b=new e;b.on("after-add",function(a){a=a.item;a.parent&&a.parent!==this&&a.parent.remove(a);a.parent=this;this.layerAdded(a);"elevation"===a.type&&l.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as an operational layer and will therefore be ignored.")}.bind(this));b.on("after-remove",function(a){a=a.item;a.parent=null;this.layerRemoved(a)}.bind(this));return b},set:function(b){var a=this._get("layers");a&&this.remove(a.toArray());this.addMany(b.toArray())}}},findLayerById:function(b){return g(this.layers,
"id",b)},add:function(b,a){var c=this.layers;a=c.getNextIndex(a);b.parent===this?this.reorder(b,a):c.add(b,a)},addMany:function(b,a){var c=this.layers;a=c.getNextIndex(a);b.slice().forEach(function(b){b.parent===this?this.reorder(b,a):(c.add(b,a),a+=1)},this)},remove:function(b){return this.layers.remove(b)},removeMany:function(b){return this.layers.removeMany(b)},removeAll:function(){return this.layers.removeAll()},reorder:function(b,a){return this.layers.reorder(b,a)},findLayerByUid:function(b){return g(this.layers,
"uid",b)},layerAdded:function(b){},layerRemoved:function(b){}})});