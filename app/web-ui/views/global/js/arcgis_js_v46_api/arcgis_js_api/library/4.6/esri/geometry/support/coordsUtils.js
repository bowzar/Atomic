// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.6/esri/copyright.txt for details.
//>>built
define(["require","exports"],function(B,n){function p(a,d){var c=d[0]-a[0],b=d[1]-a[1];return 2<a.length&&2<d.length?(a=a[2]-d[2],Math.sqrt(c*c+b*b+a*a)):Math.sqrt(c*c+b*b)}function w(a,d,c){var b=a[0]+c*(d[0]-a[0]),e=a[1]+c*(d[1]-a[1]);return 2<a.length&&2<d.length?[b,e,a[2]+c*(d[2]-a[2])]:[b,e]}function x(a,d){return w(a,d,.5)}function y(a,d,c){var b=c[0];c=c[1];for(var e=0,g=0,k=d.length;g<k;g++){e++;e===k&&(e=0);var h=d[g],f=h[0],h=h[1],l=d[e],m=l[0],l=l[1];(h<c&&l>=c||l<c&&h>=c)&&f+(c-h)/(l-
h)*(m-f)<b&&(a=!a)}return a}function z(a,d,c,b){for(var e=0,g=0,k=0,h=0,f=0,l=0,m=d.length-1;l<m;l++){var n=d[l],q=n[0],t=n[1],u=n[2],p=d[l+1],r=p[0],w=p[1],x=p[2],v=q*w-r*t,h=h+v,e=e+(q+r)*v,g=g+(t+w)*v;c&&2<n.length&&2<p.length&&(v=q*x-r*u,k+=(u+x)*v,f+=v);q<b[0]&&(b[0]=q);q>b[1]&&(b[1]=q);t<b[2]&&(b[2]=t);t>b[3]&&(b[3]=t);c&&(u<b[4]&&(b[4]=u),u>b[5]&&(b[5]=u))}0<h&&(h*=-1);0<f&&(f*=-1);h?(a[0]=e,a[1]=g,a[2]=.5*h,c?(a[3]=k,a[4]=.5*f):a.length=3):a.length=0;return a}function A(a,d){for(var c=d?[0,
0,0]:[0,0],b=d?[0,0,0]:[0,0],e=0,g=0,k=0,h=0,f=0,l=a.length;f<l-1;f++){var m=a[f],n=a[f+1];m&&n&&(c[0]=m[0],c[1]=m[1],b[0]=n[0],b[1]=n[1],d&&2<m.length&&2<n.length&&(c[2]=m[2],b[2]=n[2]),length=p(c,b))&&(e+=length,m=x(m,n),g+=length*m[0],k+=length*m[1],d&&2<m.length&&(h+=length*m[2]))}return 0<e?d?[g/e,k/e,h/e]:[g/e,k/e]:a.length?a[0]:null}function r(a,d){var c=a[0],b=c[0],c=c[1],e=a[1];a=e[0];var e=e[1],g=d[0],k=g[0],h=g[1],f=d[1];d=f[0]-k;var k=b-k,g=a-b,f=f[1]-h,h=c-h,l=e-c,m=f*g-d*l;if(0===m)return null;
d=(d*h-f*k)/m;k=(g*h-l*k)/m;return 0<=d&&1>=d&&0<=k&&1>=k?[b+d*(a-b),c+d*(e-c)]:null}Object.defineProperty(n,"__esModule",{value:!0});n.geometryToCoordinates=function(a){if(!a)return null;if(Array.isArray(a))return a;var d=a.hasZ,c=a.hasM;if("point"===a.type)return c&&d?[a.x,a.y,a.z,a.m]:d?[a.x,a.y,a.z]:c?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.paths.slice(0);if("multipoint"===a.type)return a.points.slice(0);if("extent"===a.type){a=a.clone().normalize();
if(!a)return null;var b=!1,e=!1;a.forEach(function(a){a.hasZ&&(b=!0);a.hasM&&(e=!0)});return a.map(function(a){var c=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(b&&a.hasZ)for(var d=.5*(a.zmax-a.zmin),f=0;f<c.length;f++)c[f].push(d);if(e&&a.hasM)for(a=.5*(a.mmax-a.mmin),f=0;f<c.length;f++)c[f].push(a);return c})}return null};n.getLength=p;n.getMidpoint=x;n.contains=function(a,d){if(!a)return!1;if(!Array.isArray(a[0][0]))return y(!1,a,d);for(var c=!1,b=0,e=a.length;b<
e;b++)c=y(c,a[b],d);return c};n.getPathLength=function(a){for(var d=a.length,c=0,b=0;b<d-1;++b)c+=p(a[b],a[b+1]);return c};n.getPointOnPath=function(a,d){if(0>=d)return a[0];for(var c=a.length,b=0,e=0;e<c-1;++e){var g=p(a[e],a[e+1]);if(d-b<g)return w(a[e],a[e+1],(d-b)/g);b+=g}return a[c-1]};n.isClockwise=function(a,d,c){for(var b=a.length,e=0,g=0,k=0,h=0;h<b;h++){var f=a[h],l=a[(h+1)%b],m=2,e=e+(f[0]*l[1]-l[0]*f[1]);2<f.length&&2<l.length&&c&&(g+=f[0]*l[2]-l[0]*f[2],m=3);f.length>m&&l.length>m&&d&&
(k+=f[0]*l[m]-l[0]*f[m])}return 0>=e&&0>=g&&0>=k};n.isSelfIntersecting=function(a){for(var d=0;d<a.length;d++){for(var c=a[d],b=0;b<c.length-1;b++)for(var e=[[c[b][0],c[b][1]],[c[b+1][0],c[b+1][1]]],g=d+1;g<a.length;g++)for(var k=0;k<a[g].length-1;k++){var h=[[a[g][k][0],a[g][k][1]],[a[g][k+1][0],a[g][k+1][1]]],f=r(e,h);if(f&&!(f[0]===e[0][0]&&f[1]===e[0][1]||f[0]===h[0][0]&&f[1]===h[0][1]||f[0]===e[1][0]&&f[1]===e[1][1]||f[0]===h[1][0]&&f[1]===h[1][1]))return!0}k=c.length;if(!(4>=k))for(b=0;b<k-
3;b++){var l=k-1;0===b&&(l=k-2);e=[[c[b][0],c[b][1]],[c[b+1][0],c[b+1][1]]];for(g=b+2;g<l;g++)if(h=[[c[g][0],c[g][1]],[c[g+1][0],c[g+1][1]]],(f=r(e,h))&&!(f[0]===e[0][0]&&f[1]===e[0][1]||f[0]===h[0][0]&&f[1]===h[0][1]||f[0]===e[1][0]&&f[1]===e[1][1]||f[0]===h[1][0]&&f[1]===h[1][1]))return!0}}return!1};n.ringsCentroid=function(a,d,c){var b=[],e;a.length=0;for(var g=c?[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],k=0,h=d.length;k<h;k++)e=z([],d[k],
c,g),e.length&&b.push(e);b.sort(function(a,b){var d=a[2]-b[2];0===d&&c&&(d=a[4]-b[4]);return d});b.length&&(e=6*b[0][2],a[0]=b[0][0]/e,a[1]=b[0][1]/e,c&&(e=6*b[0][4],a[2]=0!==e?b[0][3]/e:0),a[0]<g[0]||a[0]>g[1]||a[1]<g[2]||a[1]>g[3]||c&&(a[2]<g[4]||a[2]>g[5]))&&(a.length=0);!a.length&&(d=d[0]&&d[0].length?A(d[0],c):null)&&(a[0]=d[0],a[1]=d[1],c&&2<d.length&&(a[2]=d[2]));return a};n._getLineIntersection2=r});