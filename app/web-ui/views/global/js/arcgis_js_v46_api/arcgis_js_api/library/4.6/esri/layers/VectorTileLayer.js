// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.6/esri/copyright.txt for details.
//>>built
require({cache:{"esri/portal/support/jsonContext":function(){define(["require","exports","../Portal","../../core/urlUtils"],function(l,h,d,a){Object.defineProperty(h,"__esModule",{value:!0});h.createForItem=function(f){return{origin:"portal-item",url:a.urlToObject(f.itemUrl),portal:f.portal||d.getDefault()}}})},"esri/layers/support/vectorTileLayerLoader":function(){define("require exports dojo/has dojo/_base/lang ../../core/promiseUtils ../../core/urlUtils ../../config ../../request".split(" "),function(l,
h,d,a,f,b,m,k){function g(g){if(g){var a=b.getOrigin(g);b.canUseXhr(a)||-1!==n.indexOf(a)||n.push(a);return g}}function e(g,a,e){if(null!=a.sources){e&&-1!==e.path.indexOf("root.json")&&(e.path=e.path.substr(0,e.path.indexOf("root.json")),g.styleUrl=e.path);var k=r(a,e),f=a.sprite||null,m=a.glyphs||null;if(k=e&&e.path||k&&k.url)a.sprite&&!b.isAbsolute(a.sprite)&&(f=b.normalize(b.join(k,a.sprite))),a.glyphs&&!b.isAbsolute(a.glyphs)&&(m=b.normalize(b.join(k,a.glyphs)));g.style=a;g.spriteUrl=f;g.glyphsUrl=
m;return p(g,a,e)}if(a.hasOwnProperty("tileInfo"))return g.layerDefinition=a,g.serviceUrl=e.path,c(g,a,e)}function c(a,e,c){e=e.defaultStyles;b.isAbsolute(e)?a.styleUrl=b.normalize(e):a.styleUrl=b.normalize(b.join(c.path,e));g(a.styleUrl);return k(b.join(a.styleUrl,"root.json"),{responseType:"json"}).then(function(g){var e=g.data.sprite||null,c=g.data.glyphs||null;e&&!b.isAbsolute(e)&&(e=b.normalize(b.join(a.styleUrl,e)));c&&!b.isAbsolute(c)&&(c=b.normalize(b.join(a.styleUrl,c)));a.spriteUrl=e;a.glyphsUrl=
c;return a.style=g.data})}function p(a,e,c){(e=r(e,c))||f.reject("Source isn't available in the syle object!");if(e.url)return a.serviceUrl=e.url,b.isAbsolute(a.serviceUrl)||(a.serviceUrl=b.join(c.path,a.serviceUrl)),g(a.serviceUrl),k(a.serviceUrl,{query:{f:"json"},responseType:"json"}).then(function(b){a.layerDefinition=q(b.data);return a});a.layerDefinition=q(e);return f.resolve(a)}function r(a,e){if(!a.sources)return null;var g=a.sources;a=null;if(g.esri)a=g.esri,e&&a.url&&!b.isAbsolute(a.url)&&
(g=e.path.substring(0,e.path.lastIndexOf("/")),a.url=b.join(g,a.url));else{for(var c=0,k=Object.keys(g);c<k.length;c++)if(e=k[c],-1!==e.toLocaleLowerCase().indexOf("street")&&"vector"===a.type){a=g[e];break}if(!a)for(c=0,k=Object.keys(g);c<k.length&&(e=k[c],a=g[e],"vector"!==a.type);c++);}return a}function q(a){if(a.hasOwnProperty("tileInfo"))return a;for(var b={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},
e=(b.xmax-b.xmin)/512,c=[],k=a.hasOwnProperty("minzoom")?parseFloat(a.minzoom):0,f=a.hasOwnProperty("maxzoom")?parseFloat(a.maxzoom):16;k<f;k++){var m=e/Math.pow(2,k);c.push({level:k,scale:Math.floor(3779.527559055118*m),resolution:m})}a.tiles.forEach(g);return{capabilities:"TilesOnly",initialExtent:b,fullExtent:b,minScale:c[0].scale,maxScale:c[c.length-1].scale,tiles:a.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:c,spatialReference:{wkid:102100}}}}
Object.defineProperty(h,"__esModule",{value:!0});var n=m.defaults&&m.defaults.io.corsEnabledServers||m.request.corsEnabledServers;h.loadMetadata=function(c){if(!c)return f.reject("invalid input URL!");var m={layerDefinition:null,parsedUrl:null,serviceUrl:null,style:null,styleUrl:null,url:null,spriteUrl:null,glyphsUrl:null};if("string"!==typeof c)return e(m,c,null).then(function(){return m});c=m.url=b.normalize(c);var p=m.parsedUrl=b.urlToObject(c);g(c);return k(p.path,{responseType:"json",query:a.mixin({f:"json"},
p.query)}).then(function(a){return e(m,a.data,p)}).then(function(){return m})}})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer","dojo/has"],function(l,h,d,a){return function(){function f(b,m){this.styleJSON=b;this.version=parseFloat(b.version);this.sprite=m?m.spriteUrl:b.sprite;this.glyphs=m?m.glyphsUrl:b.glyphs;if(a("stable-symbol-rendering")){var k=(b.layers||[]).filter(function(a){return a.layout&&a.layout["text-font"]})[0];k&&(b.layers||[]).forEach(function(a){a.layout&&
a.layout["text-font"]&&(a.layout["text-font"]=k.layout["text-font"])})}this.layers=(b.layers||[]).map(f._create);this._identifyRefLayers()}f.prototype._identifyRefLayers=function(){for(var a=[],f=[],k=0,g=0,e=this.layers;g<e.length;g++){var c=e[g];if(1===c.type){var p=c,d=c.sourceLayer,d=d+("|"+JSON.stringify(c.minzoom)),d=d+("|"+JSON.stringify(c.maxzoom)),d=d+("|"+JSON.stringify(c.filter));if(p.hasDataDrivenFill||p.hasDataDrivenOutline)d+="|"+JSON.stringify(k);a.push({key:d,layer:c})}2===c.type&&
(p=c,d=c.sourceLayer,d+="|"+JSON.stringify(c.minzoom),d+="|"+JSON.stringify(c.maxzoom),d+="|"+JSON.stringify(c.filter),d+="|"+JSON.stringify(c.layout&&c.layout["line-cap"]),d+="|"+JSON.stringify(c.layout&&c.layout["line-join"]),p.hasDataDrivenLine&&(d+="|"+JSON.stringify(k)),f.push({key:d,layer:c}));++k}this._assignRefLayers(a);this._assignRefLayers(f)};f.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,k,g=a.length,e=0;e<g;e++){var c=a[e];
if(c.key===b)c.layer.refLayerId=k;else if(b=c.key,k=c.layer.id,1===c.layer.type&&!c.layer.getPaintProperty("fill-outline-color"))for(var f=e+1;f<g;f++){var d=a[f];if(d.key===b){if(d.layer.getPaintProperty("fill-outline-color")){a[e]=d;a[f]=c;k=d.layer.id;break}}else break}}};f._create=function(a,f,k){f=1-1/(k.length+1)*(1+f);switch(a.type){case "background":return new d.BackgroundStyleLayer(0,a,f);case "fill":return new d.FillStyleLayer(1,a,f);case "line":return new d.LineStyleLayer(2,a,f);case "symbol":return new d.SymbolStyleLayer(3,
a,f);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");};return f}()})},"esri/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./StyleDefinition ./StyleProperty ./Filter".split(" "),function(l,h,d,a,f,b,m){Object.defineProperty(h,"__esModule",{value:!0});l=function(){function a(a,
b,c){this.type=a;this.id=b.id;this.source=b.source;this.sourceLayer=b["source-layer"];this.minzoom=b.minzoom;this.maxzoom=b.maxzoom;this.filter=b.filter;this.layout=b.layout;this.paint=b.paint;this.z=c;switch(a){case 0:this._layoutDefinition=f.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=f.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=f.StyleDefinition.fillLayoutDefinition;this._paintDefinition=f.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=
f.StyleDefinition.lineLayoutDefinition;this._paintDefinition=f.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=f.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=f.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=m.createFilter(this.filter)};a.prototype.getLayoutProperty=
function(a){var b=this._layoutProperties;if(b)return b[a]};a.prototype.getPaintProperty=function(a){var b=this._paintProperties;if(b)return b[a]};a.prototype.getLayoutValue=function(a,b,c){var e,g=this._layoutProperties;g&&(g=g[a])&&(e=g.getValue(b,c));a=this._layoutDefinition[a];void 0===e&&(e=a["default"]);"enum"===a.type&&(e=a.values.indexOf(e));return e};a.prototype.getPaintValue=function(a,b,c){var e,g=this._paintProperties;g&&(g=g[a])&&(e=g.getValue(b,c));a=this._paintDefinition[a];void 0===
e&&(e=a["default"]);"enum"===a.type&&(e=a.values.indexOf(e));return e};a.prototype._parseLayout=function(a){var e={},c;for(c in a){var g=this._layoutDefinition[c];g&&(e[c]=new b(c,g,a[c]))}return e};a.prototype._parsePaint=function(a){var e={},c;for(c in a){var g=this._paintDefinition[c];g&&(e[c]=new b(c,g,a[c]))}return e};return a}();h.StyleLayer=l;a=function(a){function b(b,c,g){return a.call(this,b,c,g)||this}d(b,a);return b}(l);h.BackgroundStyleLayer=a;a=function(a){function b(b,c,g){b=a.call(this,
b,c,g)||this;b.hasDataDrivenFill=!1;(c=b.getPaintProperty("fill-color"))&&c.isDataDriven&&(b.hasDataDrivenFill=!0);(g=b.getPaintProperty("fill-opacity"))&&g.isDataDriven&&(b.hasDataDrivenFill=!0);b.hasDataDrivenOutline=!1;(g=b.getPaintProperty("fill-outline-color"))&&g.isDataDriven&&(b.hasDataDrivenOutline=!0);!g&&c&&c.isDataDriven&&(b.hasDataDrivenOutline=!0);return b}d(b,a);return b}(l);h.FillStyleLayer=a;a=function(a){function b(b,c,g){b=a.call(this,b,c,g)||this;b.hasDataDrivenLine=!1;(c=b.getPaintProperty("line-color"))&&
c.isDataDriven&&(b.hasDataDrivenLine=!0);(c=b.getPaintProperty("line-opacity"))&&c.isDataDriven&&(b.hasDataDrivenLine=!0);(c=b.getPaintProperty("line-width"))&&c.isDataDriven&&(b.hasDataDrivenLine=!0);return b}d(b,a);return b}(l);h.LineStyleLayer=a;l=function(a){function b(b,c,g){b=a.call(this,b,c,g)||this;b.hasDataDrivenIcon=!1;(c=b.getPaintProperty("icon-color"))&&c.isDataDriven&&(b.hasDataDrivenIcon=!0);(c=b.getPaintProperty("icon-opacity"))&&c.isDataDriven&&(b.hasDataDrivenIcon=!0);(c=b.getLayoutProperty("icon-size"))&&
c.isDataDriven&&(b.hasDataDrivenIcon=!0);b.hasDataDrivenText=!1;(c=b.getPaintProperty("text-color"))&&c.isDataDriven&&(b.hasDataDrivenText=!0);(c=b.getPaintProperty("text-opacity"))&&c.isDataDriven&&(b.hasDataDrivenText=!0);(c=b.getLayoutProperty("text-size"))&&c.isDataDriven&&(b.hasDataDrivenText=!0);return b}d(b,a);return b}(l);h.SymbolStyleLayer=l;l=function(){return function(a,b,e){this.cap=a.getLayoutValue("line-cap",b,e);this.join=a.getLayoutValue("line-join",b,e);this.miterLimit=a.getLayoutValue("line-miter-limit",
b,e);this.roundLimit=a.getLayoutValue("line-round-limit",b,e)}}();h.LineLayout=l;l=function(){return function(a,b,e,c){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b,c);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b,c);this.optional=a.getLayoutValue("icon-optional",b,c);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b,c);this.size=a.getLayoutValue("icon-size",b,c);this.rotate=a.getLayoutValue("icon-rotate",b,c);this.padding=a.getLayoutValue("icon-padding",
b,c);this.keepUpright=a.getLayoutValue("icon-keep-upright",b,c);this.offset=a.getLayoutValue("icon-offset",b,c);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();h.IconLayout=l;l=function(){return function(a,b,e,c){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b,c);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b,c);this.optional=a.getLayoutValue("text-optional",b,c);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b,c);this.fontArray=a.getLayoutValue("text-font",
b,c);this.maxWidth=a.getLayoutValue("text-max-width",b,c);this.lineHeight=a.getLayoutValue("text-line-height",b,c);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b,c);this.justify=a.getLayoutValue("text-justify",b,c);this.anchor=a.getLayoutValue("text-anchor",b,c);this.maxAngle=a.getLayoutValue("text-max-angle",b,c);this.size=a.getLayoutValue("text-size",b,c);this.rotate=a.getLayoutValue("text-rotate",b,c);this.padding=a.getLayoutValue("text-padding",b,c);this.keepUpright=a.getLayoutValue("text-keep-upright",
b,c);this.transform=a.getLayoutValue("text-transform",b,c);this.offset=a.getLayoutValue("text-offset",b,c);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();h.TextLayout=l})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(l,h){Object.defineProperty(h,"__esModule",{value:!0});l=function(){function d(){}d.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};d.fillLayoutDefinition={visibility:{type:"enum",
values:["visible","none"],"default":"visible"}};d.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};d.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",
values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},
"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!1},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number",
"default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",
values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};d.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};d.fillPaintDefinition={"fill-opacity":{type:"number",
minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};d.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},
"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};d.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,
maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color",
"default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};d.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",
minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};d.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",
value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};return d}();h.StyleDefinition=l})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(l,h,d,a){return function(){function f(a,d,k){this.isDataDriven=!1;switch(d.type){case "number":a=!0;break;case "color":a=!0;k=f._parseColor(k);break;case "array":a="number"===d.value;break;default:a=!1}var b=k.stops&&
0<k.stops.length;if(this.isDataDriven=!!k.property)if(b)switch(k.type){case "identity":this.getValue=this._buildIdentity(k,d);break;case "categorical":this.getValue=this._buildCategorical(k,d);break;default:a&&"interval"===k.type&&(a=!1),this.getValue=a?this._buildInterpolate(k,d):this._buildInterval(k,d)}else this.getValue=this._buildIdentity(k,d);else this.getValue=b?a?this._buildZoomInterpolate(k):this._buildZoomInterval(k):this._buildSimple(k)}f.prototype._buildSimple=function(a){return function(){return a}};
f.prototype._buildIdentity=function(a,d){return function(b,g){var e;g&&(e=g.values[a.property],"color"===d.type&&(e=f._parseColor(e)));return void 0!==e?e:void 0!==a.default?a.default:d.default}};f.prototype._buildCategorical=function(a,f){var b=this;return function(g,e){var c;e&&(c=e.values[a.property]);c=b._categorical(c,a.stops);return void 0!==c?c:void 0!==a.default?a.default:f.default}};f.prototype._buildInterval=function(a,f){var b=this;return function(g,e){var c;e&&(c=e.values[a.property]);
return"number"===typeof c?b._interval(c,a.stops):void 0!==a.default?a.default:f.default}};f.prototype._buildInterpolate=function(a,f){var b=this;return function(g,e){var c;e&&(c=e.values[a.property]);return"number"===typeof c?b._interpolate(c,a.stops,a.base||1):void 0!==a.default?a.default:f.default}};f.prototype._buildZoomInterpolate=function(a){var b=this;return function(f){return b._interpolate(f,a.stops,a.base||1)}};f.prototype._buildZoomInterval=function(a){var b=this;return function(f){return b._interval(f,
a.stops)}};f.prototype._categorical=function(a,f){for(var b=f.length,g=0;g<b;g++)if(f[g][0]===a)return f[g][1]};f.prototype._interval=function(a,f){for(var b=f.length,g=0,e=0;e<b;e++)if(f[e][0]<=a)g=e;else break;return f[g][1]};f.prototype._interpolate=function(b,f,d){for(var g,e,c=f.length,k=0;k<c;k++){var m=f[k];if(m[0]<=b)g=m;else{e=m;break}}if(g&&e){k=e[0]-g[0];b-=g[0];d=1===d?b/k:(Math.pow(d,b)-1)/(Math.pow(d,k)-1);if(Array.isArray(g[1])){g=g[1];e=e[1];b=[];for(k=0;k<g.length;k++)b.push(a.interpolate(g[k],
e[k],d));return b}return a.interpolate(g[1],e[1],d)}if(g)return g[1];if(e)return e[1]};f._isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};f._parseColor=function(a){if(Array.isArray(a))return a;if("string"===typeof a){if(a=new d(a),!this._isEmpty(a))return d.toUnitRGBA(a)}else return a&&a.default&&(a.default=f._parseColor(a.default)),a&&a.stops&&(a.stops=a.stops.map(function(a){return[a[0],f._parseColor(a[1])]})),a};return f}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require",
"exports"],function(l,h){function d(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(h,"__esModule",{value:!0});h.C_INFINITY=Number.POSITIVE_INFINITY;h.C_PI=Math.PI;h.C_2PI=2*h.C_PI;h.C_PI_BY_2=h.C_PI/2;h.C_RAD_TO_256=128/h.C_PI;h.C_256_TO_RAD=h.C_PI/128;h.C_DEG_TO_256=256/360;h.C_DEG_TO_RAD=h.C_PI/180;h.C_SQRT2=1.414213562;h.C_SQRT2_INV=1/h.C_SQRT2;var a=1/Math.LN2;h.positiveMod=d;h.radToByte=function(a){return d(a*h.C_RAD_TO_256,256)};h.degToByte=function(a){return d(a*h.C_DEG_TO_256,256)};h.log2=
function(f){return Math.log(f)*a};h.sqr=function(a){return a*a};h.clamp=function(a,b,d){return Math.min(Math.max(a,b),d)};h.interpolate=function(a,b,d){return a*(1-d)+b*d};h.between=function(a,b,d){return a>=b&&a<=d||a>=d&&a<=b}})},"esri/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(l,h){return function(){function d(a,f,b){this._op=a;"$type"===f?(this._val=b instanceof Array?b.map(function(a){return d._types.indexOf(a)}):d._types.indexOf(b),this._op+=11):(this._key=
f,this._val=b)}d.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var f=0,b=this._val;f<
b.length;f++){var d=b[f];if(d.filter(a))return!0}return!1;case 10:f=0;for(b=this._val;f<b.length;f++)if(d=b[f],!d.filter(a))return!1;return!0;case 11:f=0;for(b=this._val;f<b.length;f++)if(d=b[f],d.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};
d.createFilter=function(a){if(!a)return new d(0,void 0,!0);var f=a[0];if(1>=a.length)return new d(0,void 0,"any"!==f);switch(f){case "\x3d\x3d":return new d(1,a[1],a[2]);case "!\x3d":return new d(2,a[1],a[2]);case "\x3e":return new d(4,a[1],a[2]);case "\x3c":return new d(3,a[1],a[2]);case "\x3e\x3d":return new d(6,a[1],a[2]);case "\x3c\x3d":return new d(5,a[1],a[2]);case "in":return new d(7,a[1],a.slice(2));case "!in":return new d(8,a[1],a.slice(2));case "any":return new d(9,void 0,a.slice(1).map(d.createFilter.bind(this)));
case "all":return new d(10,void 0,a.slice(1).map(d.createFilter.bind(this)));case "none":return new d(11,void 0,a.slice(1).map(d.createFilter.bind(this)));default:throw Error("invalid operator: "+f);}};d._types=["Unknown","Point","LineString","Polygon"];return d}()})},"esri/views/vectorTiles/SchemaHelper":function(){define(["require","exports"],function(l,h){return function(){function d(a,d){this.lockedSchemaPixelSize=a;this.isWGS84=d}d.prototype.getCompatibleLevelRowCol=function(a){var d=a[0],b=
a[1];a=a[2];this.isWGS84?(b>>=1,a>>=1):256===this.lockedSchemaPixelSize&&0<d&&(d--,b>>=1,a>>=1);return[d,b,a]};d.prototype.getSchemaShift=function(a,d){var b=0,f=0;if(256===this.lockedSchemaPixelSize||this.isWGS84)a[2]%2&&(b=2*d),a[1]%2&&(f=2*d);return[b,f]};d.prototype.adjustLevel=function(a){return this.isWGS84?a:256===this.lockedSchemaPixelSize?0<a?a-1:0:a};d.create256x256CompatibleTileInfo=function(a){if(!a)return null;if(256===a.rows&&256===a.cols)return a;for(var d=a.format,b=a.compressionQuality,
h=a.dpi,k=a.origin,g=a.spatialReference,e=4326===g.wkid,c=[],l,r,q=a.lods.length,n=0;n<q;n++){var t=a.lods[n];l=t.scale;r=e?t.resolution:2*t.resolution;c.push({level:t.level,scale:l,resolution:r})}return{rows:256,cols:256,dpi:h,format:d,compressionQuality:b,origin:k,spatialReference:g,lods:c}};d.create512x512CompatibleTileInfo=function(a){if(!a||256===a.rows||256===a.cols)return null;for(var d=a.format,b=a.compressionQuality,h=a.dpi,k=a.origin,g=a.spatialReference,e=[],c,l,r=a.lods.length,q=0;q<r;q++){var n=
a.lods[q];c=n.scale;l=.5*n.resolution;e.push({level:n.level,scale:c,resolution:l})}return{rows:512,cols:512,dpi:h,format:d,compressionQuality:b,origin:k,spatialReference:g,lods:e}};return d}()})},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/accessorSupport/decorators ../core/Error ../core/MultiOriginJSONSupport ../core/urlUtils ../core/promiseUtils ../core/lang ../request ../geometry/Extent ../geometry/SpatialReference ../portal/support/jsonContext ./TiledLayer ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./mixins/ArcGISCachedService ./support/TileInfo ./support/vectorTileLayerLoader ../views/vectorTiles/style/StyleRepository ../views/vectorTiles/SchemaHelper".split(" "),function(l,
h,d,a,f,b,m,k,g,e,c,p,r,q,n,t,w,x,y,z,u,A,B,v){return function(k){function h(a,b){a=k.call(this)||this;a.currentStyleInfo=null;a.fullExtent=null;a.style=null;a.operationalLayerType="VectorTileLayer";a.tileInfo=null;a.type="vector-tile";a.url=null;return a}d(h,k);h.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?f.mixin({},{url:a},b):a};h.prototype.load=function(){var a=this,b=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1}).then(function(){if(a.portalItem&&
a.portalItem.id){var b=a.portalItem.itemUrl+"/resources/styles/root.json";return p(b,{query:{f:"json"}}).then(function(c){c.data&&a.read({url:b},n.createForItem(a.portalItem))})}}).always(function(){return a.loadStyle()});this.addResolvingPromise(b);return this.when()};Object.defineProperty(h.prototype,"attributionDataUrl",{get:function(){var a=this.currentStyleInfo;return(a=a&&a.serviceUrl&&g.urlToObject(a.serviceUrl))?this._getDefaultAttribution(a.path):null},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"serviceUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0});h.prototype.writeStyleUrl=function(a,b){a&&g.isProtocolRelative(a)&&
(a="https:"+a);a&&!c.endsWith(a,"root.json")&&(a=g.join(a,"root.json"));b.styleUrl=a};h.prototype.readTileIndexType=function(a,b){return b.type};h.prototype.readTileIndexUrl=function(a,b){return g.join(this.serviceUrl,b.tileMap)};h.prototype.readTileServers=function(a,b){var c=this;a=b.tiles;this.serviceUrl&&a.forEach(function(a,b,d){d[b]=g.join(c.serviceUrl,a)});return a};h.prototype.readVersion=function(a,b){return b.version?parseFloat(b.version):parseFloat(b.currentVersion)};h.prototype.readCompatibleTileInfo256=
function(a,b){return u.fromJSON(v.create256x256CompatibleTileInfo(b.tileInfo))};h.prototype.readCompatibleTileInfo512=function(a,b){return u.fromJSON(v.create512x512CompatibleTileInfo(b.tileInfo))};h.prototype.loadStyle=function(a){a=a||this.style||this.url;if(this._loadingPromise&&"string"===typeof a&&this.url===a)return this._loadingPromise;var b=this._loadingPromise;this._loadingPromise=this._getSourceAndStyle(a);b&&!b.isFulfilled()&&b.cancel();return this._loadingPromise};h.prototype.getTileUrl=
function(a,b,c){var d=this.tileServers[b%this.tileServers.length];return d=d.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{x\}/gi,c.toString())};h.prototype.write=function(a,b){return b&&b.origin&&!this.styleUrl?(b.messages&&b.messages.push(new m("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[a,b])};h.prototype._getSourceAndStyle=function(a){var b=
this;return a?A.loadMetadata(a).then(function(c){b._set("currentStyleInfo",{serviceUrl:c.serviceUrl,styleUrl:c.styleUrl,spriteUrl:c.spriteUrl,glyphsUrl:c.glyphsUrl,style:c.style,layerDefinition:c.layerDefinition});"string"===typeof a?(b.url=a,b.style=null):(b.url=null,b.style=a);b._set("styleRepository",new B(c.style,c));b.read(c.layerDefinition)}):e.reject(Error("invalid style!"))};h.prototype._getDefaultAttribution=function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);
if(b&&(a=b[3]&&b[3].toLowerCase()))for(var b=b[2]||"",c=0,d=["World_Basemap","World_Basemap_v2","World_Basemap_GCS_v2","World_Basemap_WGS84"];c<d.length;c++){var e=d[c];if(-1<e.toLowerCase().indexOf(a))return g.normalize("//static.arcgis.com/attribution/Vector"+b+"/"+e)}};a([b.shared({"2d":"../views/2d/layers/VectorTileLayerView2D","3d":"../views/3d/layers/VectorTileLayerView3D"})],h.prototype,"viewModulePaths",void 0);a([b.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],h.prototype,"attributionDataUrl",
null);a([b.property({readOnly:!0})],h.prototype,"currentStyleInfo",void 0);a([b.property({type:r,readOnly:!0})],h.prototype,"fullExtent",void 0);a([b.property()],h.prototype,"style",void 0);a([b.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],h.prototype,"serviceUrl",null);a([b.property({type:q,dependsOn:["tileInfo"],readOnly:!0})],h.prototype,"spatialReference",null);a([b.property({readOnly:!0})],h.prototype,"styleRepository",void 0);a([b.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],
json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],h.prototype,"styleUrl",null);a([b.writer(["portal-item","web-document"],"styleUrl")],h.prototype,"writeStyleUrl",null);a([b.property({readOnly:!0})],h.prototype,"tileIndexType",void 0);a([b.reader("tileIndexType",["tileIndexType","type"])],h.prototype,"readTileIndexType",null);a([b.property({readOnly:!0})],h.prototype,"tileIndexUrl",void 0);a([b.reader("tileIndexUrl",["tileIndexUrl","tileMap"])],h.prototype,
"readTileIndexUrl",null);a([b.property({readOnly:!0,type:u})],h.prototype,"tileInfo",void 0);a([b.property({readOnly:!0})],h.prototype,"tileServers",void 0);a([b.reader("tileServers",["tiles"])],h.prototype,"readTileServers",null);a([b.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],h.prototype,"type",void 0);a([b.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],h.prototype,"url",void 0);a([b.property({readOnly:!0})],
h.prototype,"version",void 0);a([b.reader("version",["version","currentVersion"])],h.prototype,"readVersion",null);a([b.property({readOnly:!0})],h.prototype,"compatibleTileInfo256",void 0);a([b.reader("compatibleTileInfo256",["tileInfo"])],h.prototype,"readCompatibleTileInfo256",null);a([b.property({readOnly:!0})],h.prototype,"compatibleTileInfo512",void 0);a([b.reader("compatibleTileInfo512",["tileInfo"])],h.prototype,"readCompatibleTileInfo512",null);return h=a([b.subclass("esri.layers.VectorTileLayer")],
h)}(b.declared(t,w,x,y,k,z))});