// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.6/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/InputHandler ../../../input/handlers/support ../../state/helpers/PickingHelper ../../state/controllers/global/PinchAndPanController ../../state/controllers/local/PinchAndPanController".split(" "),function(d,f,g,h,k,l,m,n){Object.defineProperty(f,"__esModule",{value:!0});d=function(d){function e(a,b,e){var c=d.call(this,!0)||this;c.view=a;c.pointerType=b;c.lastEndTimestamp=0;c.pickingHelper=new l.PickingHelper(a);c.registerIncoming("drag",
e,function(a){return c.handleDrag(a)});return c}g(e,d);e.prototype.handleDrag=function(a){var b=a.data.pointers[0].startEvent.native;if("mouse"!==b.pointerType||k.eventMatchesMousePointerType(b,this.pointerType)){b=a.timestamp-this.lastEndTimestamp;b=this.momentum&&this.momentum.active&&40>b;switch(a.data.action){case "start":case "update":if(b)break;this.controller&&this.controller.active?.002>(a.data.currentState.timestamp-a.data.previousState.timestamp)/1E3||this.controller.update(a.data.pointers,
a.data.currentState,a.timestamp):(this.controller=this.view.state.isGlobal?new m.PinchAndPanController(this.view,this.pickingHelper):new n.PinchAndPanController(this.view,this.pickingHelper),this.view.state.switchCameraController(this.controller),this.controller.begin(a.data.pointers,a.data.currentState,a.timestamp));break;case "end":this.controller&&this.controller.active&&(this.lastEndTimestamp=a.timestamp,(this.momentum=this.controller.end())&&this.view.state.switchCameraController(this.momentum),
this.controller=null)}a.stopPropagation()}};return e}(h.InputHandler);f.PinchAndPanNavigation=d});