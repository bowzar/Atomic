// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.6/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../support/widget ../../../core/accessorSupport/decorators ../../Widget ../../../moment ./TimePickerViewModel dojo/keys dojo/i18n!../nls/TimePicker".split(" "),function(v,w,n,f,g,h,p,q,l,d,r){var t=[d.DOWN_ARROW,d.LEFT_ARROW,d.RIGHT_ARROW,d.UP_ARROW,d.TAB];return function(m){function b(a){a=m.call(this)||this;a._activeTime=null;a.value=null;a.viewModel=new l;return a}n(b,m);b.prototype.render=
function(){return g.tsx("div",{class:"esri-time-picker esri-widget"},g.tsx("input",{afterUpdate:this._handleInputUpdate,"aria-label":r.inputTitle,bind:this,class:"esri-time-picker__input",onblur:this._handleInputBlur,onfocus:this._handleInputFocus,onkeydown:this._handleInputKeydown,onclick:this._handleInputClick,onpaste:this._handleInputPaste,onwheel:this._handleInputWheel,value:(this._activeTime||this.viewModel.value).format("LT")}))};b.prototype._handleInputBlur=function(){this._activeTime.isValid()&&
(this.viewModel.value=this._activeTime);this._activePart=this._activeTime=null};b.prototype._handleInputUpdate=function(a){this._selectPart(a,this._activePart)};b.prototype._selectPart=function(a,c){var e=this._activeTime;if(e){var e=e.format("LT"),b=e.indexOf(":");if("hours"===c)a.setSelectionRange(0,b);else{var d=b+1,b=d+2;"minutes"===c?a.setSelectionRange(d,b):(e=e.length,"meridiem"===c&&a.setSelectionRange(b+1,e))}}};b.prototype._handleInputFocus=function(a){this._activePart="hours";this._activeTime=
this.viewModel.value.clone().startOf("minute");this._selectPart(a.target,"hours")};b.prototype._caretIndexToPartName=function(a){var c=this._activeTime.format("LT"),b=c.indexOf(":"),c=c.indexOf(" ");return a<=b?"hours":a>b&&a<=c?"minutes":"meridiem"};b.prototype._handleInputKeydown=function(a){var c=a.ctrlKey,b=a.key,k=a.keyCode,u=a.metaKey,h=a.shiftKey,f=this._activeTime,g=this._activePart,l=/\d/.test(b);if(-1!==t.indexOf(k)||l){if(k===d.LEFT_ARROW)this._activePart=this._prevPart();else if(k===d.RIGHT_ARROW)this._activePart=
this._nextPart();else if(k===d.TAB){c=h?this._prevPart():this._nextPart();if(c===this._activePart)return;this._activePart=c}else k===d.UP_ARROW?this._shift("up",f,g):k===d.DOWN_ARROW?this._shift("down",f,g):l&&this._setTime(f,g,Number(b));a.preventDefault();a.stopImmediatePropagation()}else u||c||(a.preventDefault(),a.stopImmediatePropagation())};b.prototype._handleInputClick=function(a){a=a.target;this._activePart=null;this.renderNow();this._activePart=this._caretIndexToPartName(a.selectionStart)};
b.prototype._getOrderedParts=function(){return-1<this._activeTime.format("LT").indexOf(" ")?["hours","minutes","meridiem"]:["hours","minutes"]};b.prototype._prevPart=function(){var a=this._getOrderedParts(),c=a.indexOf(this._activePart)-1;return a[Math.max(c,0)]};b.prototype._nextPart=function(){var a=this._getOrderedParts(),c=a.indexOf(this._activePart)+1;return a[Math.min(c,a.length-1)]};b.prototype._setTime=function(a,c,b){if("hours"===c){c=-1<a.format("LT").indexOf(" ")?12:24;var d=""+a.hour()%
c,e=Number(""+d+b);2===d.length||e>c?a.hour(b):e<=c&&a.hour(e)}else"minutes"===c&&(c=""+a.minute(),d=Number(""+c+b),2===c.length||59<d?a.minute(b):59>d&&a.minute(d))};b.prototype._handleInputPaste=function(a){var b=a.clipboardData.getData("text/plain"),b=q(b);b.isValid()&&(this._activeTime=b);a.preventDefault();a.stopImmediatePropagation()};b.prototype._handleInputWheel=function(a){this._shift(0<a.wheelDeltaY?"up":"down",this._activeTime,this._activePart)};b.prototype._shift=function(a,b,d){b["up"===
a?"add":"subtract"]("meridiem"===d?12:1,"hours"===d?"hour":"minutes"===d?"minute":"hours")};f([h.aliasOf("viewModel.value")],b.prototype,"value",void 0);f([h.property({type:l}),g.renderable("viewModel.value")],b.prototype,"viewModel",void 0);return b=f([h.subclass("esri.widgets.Directions.support.TimePicker")],b)}(h.declared(p))});