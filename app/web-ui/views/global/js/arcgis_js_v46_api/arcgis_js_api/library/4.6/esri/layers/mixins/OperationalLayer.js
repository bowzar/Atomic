// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.6/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/MultiOriginJSONSupport ../../core/Error ../../core/urlUtils ../../core/accessorSupport/write ../../core/accessorSupport/read".split(" "),function(e,r,h,d,c,k,l,g,m,n,p){e=function(f){function a(){var a=null!==f&&f.apply(this,arguments)||this;a.title="Layer";return a}h(a,f);e=a;a.prototype.writeListMode=function(a,b,c,d){d&&"ground"===
d.layerContainerType?b[c]=a:a&&n.willPropertyWrite(this,c,{},d)&&(b[c]=a)};a.prototype.writeTitle=function(a,b){b.title=a||"Layer"};a.prototype.writeOperationalLayerType=function(a,b){a&&(b.layerType=a)};a.prototype.readOpacity=function(a,b,c){if(void 0!==b.opacity&&(!c||"web-map"===c.origin||"web-scene"===c.origin))return b.opacity;if((!c||"service"===c.origin)&&b.drawingInfo&&void 0!==b.drawingInfo.transparency)return 1-b.drawingInfo.transparency/100;if(b.layerDefinition&&b.layerDefinition.drawingInfo&&
void 0!==b.layerDefinition.drawingInfo.transparency)return 1-b.layerDefinition.drawingInfo.transparency/100};a.prototype.readVisible=function(a,b){return!!b.visibility};a.prototype.read=function(a,b){var c=this,d=arguments;b&&(b.layer=this);p.readLoadable(this,a,function(b){return c.inherited(d,[a,b])},b);return this};a.prototype.write=function(a,b){if(b&&b.origin){var c=b.origin+"/"+(b.layerContainerType||"operational-layers"),d=e.supportedTypes[c],d=d&&d[this.operationalLayerType];if("write"!==
d&&"readwrite"!==d)return b.messages&&b.messages.push(new g("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+c+"'",{layer:this})),null;if(!this.url&&!q[this.operationalLayerType])return b.messages&&b.messages.push(new g("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to a '"+b.origin+"'",{layer:this})),null}return this.inherited(arguments,
[a,b])};d([c.property({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],a.prototype,"id",void 0);d([c.property({type:String,json:{write:{ignoreOrigin:!0}}})],a.prototype,"listMode",void 0);d([c.writer("listMode")],a.prototype,"writeListMode",null);d([c.property({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],a.prototype,"title",void 0);d([c.writer("title")],a.prototype,
"writeTitle",null);d([c.property({type:String,json:{write:{ignoreOrigin:!0,writer:m.writeOperationalLayerUrl}}})],a.prototype,"url",void 0);d([c.property({type:String,json:{write:{target:"layerType",ignoreOrigin:!0}}})],a.prototype,"operationalLayerType",void 0);d([c.writer("operationalLayerType")],a.prototype,"writeOperationalLayerType",null);d([c.property({type:Number,json:{write:{ignoreOrigin:!0}}})],a.prototype,"opacity",void 0);d([c.reader("opacity",["opacity","layerDefinition.drawingInfo.transparency",
"drawingInfo.transparency"])],a.prototype,"readOpacity",null);d([c.property({type:Boolean,json:{write:{target:"visibility",ignoreOrigin:!0}}})],a.prototype,"visible",void 0);d([c.reader("visible",["visibility"])],a.prototype,"readVisible",null);return a=e=d([c.subclass("esri.layers.mixins.OperationalLayer")],a);var e}(c.declared(k,l));var q={GroupLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,ArcGISFeatureLayer:!0,CSV:!0,VectorTileLayer:!0,KML:!0};(function(c){c.typeModuleMap={ArcGISFeatureLayer:"../FeatureLayer",
ArcGISImageServiceLayer:"../ImageryLayer",ArcGISImageServiceVectorLayer:null,ArcGISMapServiceLayer:"../MapImageLayer",ArcGISSceneServiceLayer:"../SceneLayer",ArcGISStreamLayer:"../StreamLayer",ArcGISTiledElevationServiceLayer:"../ElevationLayer",ArcGISTiledImageServiceLayer:"../TileLayer",ArcGISTiledMapServiceLayer:"../TileLayer",bingLayer:null,CSV:"../CSVLayer",GeoRSS:"../GeoRSSLayer",GroupLayer:"../GroupLayer",IntegratedMeshLayer:"../IntegratedMeshLayer",KML:"../KMLLayer",OpenStreetMap:"../OpenStreetMapLayer",
PointCloudLayer:"../PointCloudLayer",VectorTileLayer:"../VectorTileLayer",WebTiledLayer:"../WebTileLayer",WMS:"../WMSLayer"};c.supportedTypes={"web-scene/operational-layers":{ArcGISFeatureLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISSceneServiceLayer:"readwrite",ArcGISTiledElevationServiceLayer:"read",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",GroupLayer:"readwrite",IntegratedMeshLayer:"readwrite",PointCloudLayer:"readwrite",
WebTiledLayer:"readwrite",CSV:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite"},"web-scene/basemap":{ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",WebTiledLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",WMS:"readwrite",ArcGISMapServiceLayer:"readwrite"},"web-scene/ground":{ArcGISTiledElevationServiceLayer:"readwrite"},"web-map/operational-layers":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",
ArcGISMapServiceLayer:"readwrite",ArcGISStreamLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",ArcGISFeatureLayer:"readwrite",CSV:"readwrite",GeoRSS:"readwrite",KML:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite"},"web-map/basemap":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",
OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite",bingLayer:"readwrite"}}})(e||(e={}));return e});