// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.6/esri/copyright.txt for details.
//>>built
define(["dojo/_base/window","dojo/sniff","../kernel"],function(f,a,m){function h(){if(b)return b;b={available:!1,version:0,supportsHighPrecisionFragment:!1};var a=function(a,c){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,e=0;e<b.length;++e){try{d=a.getContext(b[e],c)}catch(u){}if(d)break}return d},c;try{if(!e.WebGLRenderingContext)throw 0;c=document.createElement("canvas")}catch(t){return b}var d=a(c,{failIfMajorPerformanceCaveat:!0});!d&&(d=a(c))&&(b.majorPerformanceCaveat=
!0);if(!d)return b;a=d.getParameter(d.VERSION);if(!a)return b;if(a=a.match(/^WebGL\s+([\d.]*)/))b.version=parseFloat(a[1]),b.available=.94<=b.version,a=d.getShaderPrecisionFormat(d.FRAGMENT_SHADER,d.HIGH_FLOAT),b.supportsHighPrecisionFragment=a&&0<a.precision,b.supportsVertexShaderSamplers=0<d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b.supportsElementIndexUint=null!=d.getExtension("OES_element_index_uint");return b}var k=a("ie"),l=void 0===k&&!1,n=a("webkit"),p=a("opera"),q=a("chrome"),r=a("safari"),
e=f.global;f=navigator.userAgent;var g;(g=f.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&a.add("esri-iphone",parseFloat(g[2].replace("_",".")));(g=f.match(/Android\s+(\d+\.\d+)/i))&&a.add("esri-android",parseFloat(g[1]));(g=f.match(/Fennec\/(\d+\.\d+)/i))&&a.add("esri-fennec",parseFloat(g[1]));0<=f.indexOf("BlackBerry")&&0<=f.indexOf("WebKit")&&a.add("esri-blackberry",1);a.add("esri-touch",a("esri-iphone")||a("esri-android")||a("esri-blackberry")||6<=a("esri-fennec")||e.document&&e.document.createTouch?
!0:!1);(g=f.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&a.add("esri-mobile",g);a.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled);m._getDOMAccessor=function(a){return"Moz"+a.charAt(0).toUpperCase()+a.substr(1)};a.add("esri-phonegap",!!e.cordova);a.add("esri-cors",a("esri-phonegap")||"XMLHttpRequest"in e&&"withCredentials"in new XMLHttpRequest);a.add("esri-canvas-svg-support",function(){return!a("ie")});a.add("esri-wasm","WebAssembly"in e);if(a("host-webworker"))return a;
a.add("esri-workers","Worker"in e);a.add("esri-script-sandbox",function(){return"MessageChannel"in e&&"HTMLIFrameElement"in e&&"sandbox"in HTMLIFrameElement.prototype});a.add("esri-transforms",l||9<=k||!1||4<=q||3.1<=r||10.5<=p||3.2<=a("esri-iphone")||2.1<=a("esri-android"));a.add("esri-transitions",l||10<=k||!1||4<=q||3.1<=r||10.5<=p||3.2<=a("esri-iphone")||2.1<=a("esri-android"));a.add("esri-transforms3d",l||!1||12<=q||4<=r||3.2<=a("esri-iphone")||3<=a("esri-android"));a.add("esri-url-encodes-apostrophe",
function(){var a=e.document.createElement("a");a.href="?'";return-1<a.href.indexOf("?%27")});3>a("esri-android")&&(a.add("esri-transforms",!1,!1,!0),a.add("esri-transitions",!1,!1,!0),a.add("esri-transforms3d",!1,!1,!0));m._css=function(b){var c=a("esri-transforms3d");void 0!==b&&null!==b?c=b:c&&(q||r&&!a("esri-iphone"))&&(c=!1);var d=c?"translate3d(":"translate(",e=c?q?",-1px)":",0px)":")",f=c?"scale3d(":"scale(",g=c?",1)":")",h=c?"rotate3d(0,0,1,":"rotate(",k=c?"matrix3d(":"matrix(",l=c?",0,0,":
",",m=c?",0,0,0,0,1,0,":",",p=c?",0,1)":")";return{names:{transition:n&&"-webkit-transition"||"MozTransition",transform:n&&"-webkit-transform"||"MozTransform",transformName:n&&"-webkit-transform"||"-moz-transform",origin:n&&"-webkit-transform-origin"||"MozTransformOrigin",endEvent:n&&"webkitTransitionEnd"||"transitionend"},translate:function(a,b){return d+a+"px,"+b+"px"+e},scale:function(a){return f+a+","+a+g},rotate:function(a){return h+a+"deg)"},matrix:function(a){return a.m?(a=a.m,k+a[0].toFixed(10)+
","+a[1].toFixed(10)+l+a[2].toFixed(10)+","+a[3].toFixed(10)+m+a[4].toFixed(10)+"px,"+a[5].toFixed(10)+"px"+p):k+a.xx.toFixed(10)+","+a.yx.toFixed(10)+l+a.xy.toFixed(10)+","+a.yy.toFixed(10)+m+a.dx.toFixed(10)+"px,"+a.dy.toFixed(10)+"px"+p},matrix3d:function(a){a=a.m;return"matrix3d("+a[0].toFixed(10)+","+a[1].toFixed(10)+",0,0,"+a[2].toFixed(10)+","+a[3].toFixed(10)+",0,0,0,0,1,0,"+a[4].toFixed(10)+","+a[5].toFixed(10)+",0,1)"},getScaleFromMatrix:function(a){if(!a)return 1;a=a.toLowerCase();var b=
-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(b.length,a.indexOf(",")))}}};var b;a.add("esri-webgl",function(){return!!h().available});a.add("esri-webgl-high-precision-fragment",function(){return!!h().supportsHighPrecisionFragment});a.add("esri-webgl-vertex-shader-samplers",function(){return!!h().supportsVertexShaderSamplers});a.add("esri-webgl-element-index-uint",function(){return!!h().supportsElementIndexUint});a.add("esri-webgl-major-performance-caveat",function(){return!!h().majorPerformanceCaveat});
return a});