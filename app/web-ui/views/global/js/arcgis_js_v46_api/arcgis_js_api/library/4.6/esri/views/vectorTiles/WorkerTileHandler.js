// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.6/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ../../core/ObjectPool ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),function(w,a,c,u,h,l,n,d,b,k,e,m,t,x,q){return function(){function a(){this.status=this.rotation=0;this._symbolBuckets=[];this.placementEngine=new x.PlacementEngine;this.fillVertexBuffer=
new n.FillVertexBuffer(!1);this.fillDDVertexBuffer=new n.FillVertexBuffer(!0);this.fillIndexBuffer=new d.TriangleIndexBuffer;this.outlineVertexBuffer=new n.OutlineVertexBuffer(!1);this.outlineDDVertexBuffer=new n.OutlineVertexBuffer(!0);this.outlineIndexBuffer=new d.TriangleIndexBuffer;this.lineVertexBuffer=new n.LineVertexBuffer(!1);this.lineDDVertexBuffer=new n.LineVertexBuffer(!0);this.lineIndexBuffer=new d.TriangleIndexBuffer;this.iconVertexBuffer=new n.SymbolVertexBuffer(!1);this.iconDDVertexBuffer=
new n.SymbolVertexBuffer(!0);this.iconIndexBuffer=new d.TriangleIndexBuffer;this.textVertexBuffer=new n.SymbolVertexBuffer(!1);this.textDDVertexBuffer=new n.SymbolVertexBuffer(!0);this.textIndexBuffer=new d.TriangleIndexBuffer}a.prototype.initialize=function(a,e,d,b){void 0===b&&(b=0);this.tileKey=a;this.refKey=e;this._workerTileHandler=d;this.rotation=b;this.placementEngine.setAngle(q.C_DEG_TO_RAD*b)};a.prototype.release=function(){this.tileKey=this.refKey="";this.rotation=this.status=0;this.fillVertexBuffer.reset();
this.fillDDVertexBuffer.reset();this.fillIndexBuffer.reset();this.outlineVertexBuffer.reset();this.outlineDDVertexBuffer.reset();this.outlineIndexBuffer.reset();this.lineVertexBuffer.reset();this.lineDDVertexBuffer.reset();this.lineIndexBuffer.reset();this.iconVertexBuffer.reset();this.iconDDVertexBuffer.reset();this.iconIndexBuffer.reset();this.textVertexBuffer.reset();this.textDDVertexBuffer.reset();this.textIndexBuffer.reset();this.placementEngine.reset();this._symbolBuckets.length=0;this._workerTileHandler=
null};a.prototype.setDataAndParse=function(a,d){var b=this,p=new c(function(a){b.status=6});this._parse(a,d).then(function(a){b.status=4;for(var d=new Uint32Array([1,b.fillVertexBuffer.sizeInBytes,2,b.fillDDVertexBuffer.sizeInBytes,3,b.fillIndexBuffer.sizeInBytes,4,b.outlineVertexBuffer.sizeInBytes,5,b.outlineDDVertexBuffer.sizeInBytes,6,b.outlineIndexBuffer.sizeInBytes,7,b.lineVertexBuffer.sizeInBytes,8,b.lineDDVertexBuffer.sizeInBytes,9,b.lineIndexBuffer.sizeInBytes,10,b.iconVertexBuffer.sizeInBytes,
11,b.iconDDVertexBuffer.sizeInBytes,12,b.iconIndexBuffer.sizeInBytes,13,b.textVertexBuffer.sizeInBytes,14,b.textDDVertexBuffer.sizeInBytes,15,b.textIndexBuffer.sizeInBytes]),q=[],h=a.length,c=0;c<h;c++){var x=a[c];if(x instanceof e)q.push(x.layerIndex),q.push(1),q.push(x.fillIndexStart),q.push(x.fillIndexCount),q.push(x.outlineIndexStart),q.push(x.outlineIndexCount);else if(x instanceof m)q.push(x.layerIndex),q.push(2),q.push(x.lineIndexStart),q.push(x.lineIndexCount),q.push(x.connectorStart),q.push(x.connectorCount);
else if(x instanceof t){q.push(x.layerIndex);q.push(3);q.push(x.sdfMarker?1:0);var n=x.markerPageMap;q.push(n.size);n.forEach(function(a,e){q.push(e);q.push(a[0]);q.push(a[1])});x=x.glyphsPageMap;q.push(x.size);x.forEach(function(a,e){q.push(e);q.push(a[0]);q.push(a[1])})}else x instanceof k&&(q.push(x.layerIndex),q.push(0))}a=new Uint32Array(q);var h=b.fillVertexBuffer.toBuffer(),c=b.fillDDVertexBuffer.toBuffer(),x=b.fillIndexBuffer.toBuffer(),n=b.outlineVertexBuffer.toBuffer(),l=b.outlineDDVertexBuffer.toBuffer(),
u=b.outlineIndexBuffer.toBuffer(),G=b.lineVertexBuffer.toBuffer(),J=b.lineDDVertexBuffer.toBuffer(),z=b.lineIndexBuffer.toBuffer(),y=b.iconVertexBuffer.toBuffer(),D=b.iconDDVertexBuffer.toBuffer(),H=b.iconIndexBuffer.toBuffer(),E=b.textVertexBuffer.toBuffer(),B=b.textDDVertexBuffer.toBuffer(),F=b.textIndexBuffer.toBuffer();p.resolve({data:{bufferDataInfo:d.buffer,bucketDataInfo:a.buffer,bufferData:[h,c,x,n,l,u,G,J,z,y,D,H,E,B,F]},buffers:[h,c,x,n,l,u,G,J,z,y,D,H,E,B,F,d.buffer,a.buffer]})});return p.promise};
a.prototype.addBucket=function(a){this._symbolBuckets.push(a)};a.prototype.updateSymbols=function(a){var e=this,d=this._symbolBuckets;if(!d||0===d.length)return u.resolve({data:null,buffers:null});this.rotation=a;var b=this.placementEngine;b.reset();b.setAngle(a/256*360*q.C_DEG_TO_RAD);var m=this.iconVertexBuffer;m.reset();var k=this.iconDDVertexBuffer;k.reset();var p=this.iconIndexBuffer;p.reset();var x=this.textVertexBuffer;x.reset();var c=this.textDDVertexBuffer;c.reset();var t=this.textIndexBuffer;
t.reset();var n=[],l=d.length,G=0;return h(function(){if(6===e.status||0===e.status)return!0;if(G<l){var a=d[G++],q=a.layer;if(a=a.copy(q.hasDataDrivenIcon?k:m,p,q.hasDataDrivenText?c:x,t,b))n.push(a),a.updateSymbols()}return G>=l},5).then(function(){if(6===e.status||0===e.status||0===m.sizeInBytes&&0===k.sizeInBytes&&0===p.sizeInBytes&&0===x.sizeInBytes&&0===c.sizeInBytes&&0===t.sizeInBytes)return{data:null,buffers:null};var a=new Uint32Array([10,m.sizeInBytes,11,k.sizeInBytes,12,p.sizeInBytes,13,
x.sizeInBytes,14,c.sizeInBytes,15,t.sizeInBytes]),d=[];l=n.length;for(var b=0;b<l;b++){var q=n[b];d.push(q.layerIndex);d.push(3);d.push(q.sdfMarker?1:0);var h=q.markerPageMap;d.push(h.size);h.forEach(function(a,e){d.push(e);d.push(a[0]);d.push(a[1])});q=q.glyphsPageMap;d.push(q.size);q.forEach(function(a,e){d.push(e);d.push(a[0]);d.push(a[1])})}var b=new Uint32Array(d),q=m.toBuffer(),h=k.toBuffer(),A=p.toBuffer(),u=x.toBuffer(),G=c.toBuffer(),v=t.toBuffer();return{data:{bufferDataInfo:a.buffer,bucketDataInfo:b.buffer,
bufferData:[q,h,A,u,G,v]},buffers:[q,h,A,u,G,v,a.buffer,b.buffer]}}).otherwise(function(a){return u.resolve({data:null,buffers:null})})};a.prototype.setObsolete=function(){this.status=6};a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()};a.prototype.getWorkerTileHandler=function(){return this._workerTileHandler};a.prototype._parse=function(a,e){if(!a||0===a.byteLength)return u.resolve([]);this.status=2;return(new b(a,this,e)).parse()};a.pool=new l(a);return a}()})},"esri/core/executeAsync":function(){define(["require",
"exports","dojo/Deferred","./now"],function(w,a,c,u){return function(a,l){var h;if(!l||0>=l)l=500;var d=new c(function(){h&&clearTimeout(h)}),b=function(){if(!d.isFulfilled()){for(var k=u(),e=!1;!e&&u()-k<l;)e=!0===a();e?d.resolve():h=setTimeout(b,0)}};h=setTimeout(b,0);return d.promise}})},"esri/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),function(w,a,c,u,
h,l){Object.defineProperty(a,"__esModule",{value:!0});var n=new Float32Array(1),d=new Uint32Array(n.buffer);w=function(a){function b(e){var d=a.call(this,e?20:12)||this;d._isDataDriven=e;return d}c(b,a);b.prototype.isDataDriven=function(){return this._isDataDriven};b.prototype.add=function(a,b,k,x,q,p,c,l){var e=this.array;a=h.i1616to32(a,b);e.push(a);a=h.i8888to32(Math.round(31*k),Math.round(31*x),Math.round(31*q),Math.round(31*p));e.push(a);a=h.i1616to32(c,0);e.push(a);if(this._isDataDriven){if(!l)throw Error("Expecting data driven values.");
k=l.color;x=k[3]*l.opacity*255;e.push(h.i8888to32(k[0]*x,k[1]*x,k[2]*x,x));n[0]=l.size;e.push(d[0])}};return b}(h);a.LineVertexBuffer=w;w=function(a){function d(d){var e=a.call(this,d?8:4)||this;e._isDataDriven=d;return e}c(d,a);d.prototype.isDataDriven=function(){return this._isDataDriven};d.prototype.add=function(a,d,b){var e=this.array;e.push(h.i1616to32(a,d));if(this._isDataDriven){if(!b)throw Error("Expecting data driven values.");a=b.color;b=a[3]*b.opacity*255;e.push(h.i8888to32(a[0]*b,a[1]*
b,a[2]*b,b))}};return d}(h);a.FillVertexBuffer=w;w=function(a){function d(d){var e=a.call(this,d?12:8)||this;e._isDataDriven=d;return e}c(d,a);d.prototype.isDataDriven=function(){return this._isDataDriven};d.prototype.add=function(a,d,b,k,q,p,c){var e=this.array,m=this.index;a=h.i1616to32(a,d);e.push(a);a=h.i8888to32(Math.round(15*b),Math.round(15*k),q,p);e.push(a);if(this._isDataDriven){if(!c)throw Error("Expecting data driven values.");b=c.color;c=b[3]*c.opacity*255;e.push(h.i8888to32(b[0]*c,b[1]*
c,b[2]*c,c))}return m};return d}(h);a.OutlineVertexBuffer=w;w=function(a){function b(d){var e=a.call(this,d?24:16)||this;e._isDataDriven=d;return e}c(b,a);b.prototype.isDataDriven=function(){return this._isDataDriven};b.prototype.add=function(a,b,k,c,q,p,u,J,F,E,B){var e=this.array;a=h.i1616to32(a,b);e.push(a);a=h.i1616to32(Math.round(32*k),Math.round(32*c));e.push(a);a=h.i8888to32(q/4,p/4,0,0);e.push(a);a=h.i8888to32(Math.ceil(10*E),l.radToByte(u),10*J,Math.min(10*F,255));e.push(a);if(this._isDataDriven){if(!B)throw Error("Expecting data driven values.");
k=B.color;c=k[3]*B.opacity*255;e.push(h.i8888to32(k[0]*c,k[1]*c,k[2]*c,c));n[0]=B.size;e.push(d[0])}};return b}(h);a.SymbolVertexBuffer=w})},"esri/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(w,a){return function(){function a(a){this._array=[];0>=a&&console.error("strideInBytes must be positive!");this._stride=a}Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",
{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=function(){this.array.length=0};a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(a,h){return 65535&a|h<<16};
a.i8888to32=function(a,h,c,n){return a&255|(h&255)<<8|(c&255)<<16|n<<24};a.i8816to32=function(a,h,c){return a&255|(h&255)<<8|c<<16};return a}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(w,a){function c(a,c){a%=c;return 0<=a?a:a+c}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=
a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var u=1/Math.LN2;a.positiveMod=c;a.radToByte=function(h){return c(h*a.C_RAD_TO_256,256)};a.degToByte=function(h){return c(h*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*u};a.sqr=function(a){return a*a};a.clamp=function(a,c,n){return Math.min(Math.max(a,c),n)};a.interpolate=function(a,c,n){return a*(1-n)+c*n};a.between=function(a,c,n){return a>=c&&a<=n||a>=n&&a<=c}})},"esri/views/vectorTiles/IndexMemoryBuffer":function(){define(["require",
"exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(w,a,c,u,h){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function h(){return a.call(this,12)||this}c(h,a);h.prototype.add=function(a,b,k){var d=this.array;d.push(a);d.push(b);d.push(k)};return h}(h);a.TriangleIndexBuffer=w;h=function(a){function h(){return a.call(this,4)||this}c(h,a);h.prototype.add=function(a){this.array.push(a)};return h}(h);a.PointElementMemoryBuffer=
h})},"esri/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ../2d/engine/webgl/TileClipper".split(" "),function(w,a,c,u,h,l,n,d,b,k,e,m,t){return function(){function a(a,d,e){this._pbfTile=new l(new Uint8Array(a),new DataView(a));this._tile=d;this._connection=e;this._layers=d.getLayers();e=d.tileKey.split("/").map(parseFloat);
var b=e[0];a=e[1];e=e[2];this._level=b;d.refKey&&(d=d.refKey.split("/").map(parseFloat)[0],d=b-d,0<d&&(b=(1<<d)-1,this._tileClipper=new t.TileClipper(d,a&b,e&b)));this._tileClipper||(this._tileClipper=new t.SimpleBuilder)}a.prototype.parse=function(){for(var a=this,e=this._parseTileData(this._pbfTile),b=this._layers,k=b.length,m=this._level,x,n=[],A={},t=new Set,k=k-1;0<=k;k--)if(x=b[k],!(x.minzoom&&m<x.minzoom||x.maxzoom&&m>=x.maxzoom||x.layout&&"none"===x.layout.visibility))if(0===x.type)x=this._createBucket(x),
x.layerIndex=k,n.push(x);else{var l=x.sourceLayer,S=e[l];S&&(t.add(l),x=this._createBucket(x))&&(x.layerIndex=k,x.layerExtent=S.extent,(S=A[l])||(S=A[l]=[]),S.push(x))}var P=10*this._level,O=10*(this._level+1),U=[],T=[],I=[],w=[],z=this._tileClipper,y=new Set,D={},H=[];t.forEach(function(a){return H.push(a)});var Q=0,K=0,L=H.length;return h(function(){if(6===a._tile.status)return!0;switch(Q){case 0:if(K<L){var b=H[K++],k=e[b],m=A[b];if(m&&0!==m.length)for(b=k.getData();b.next(2);){var p=new d(b.getMessage(),
k),q=p.values;if(q){var c=q._minzoom;if(c&&c>=O)continue;if((q=q._maxzoom)&&q<=P)continue}for(var c=0,h=m;c<h.length;c++)q=h[c],q.pushFeature(p)}}else{k=a._tile;for(b in A)for(m=A[b],p=0;p<m.length;p++)q=m[p],q.hasFeatures()&&(3===q.layer.type?(U.push(q),k.addBucket(q)):q.layer.refLayerId?I.push(q):(T.push(q),w[q.layer.id]=q));Q=1;K=0;L=U.length}break;case 1:K<L?U[K++].getResources(z,y,D):Q=2}return 2===Q},50).then(function(){if(6===a._tile.status)return[];var d=[],e=a._tile.getWorkerTileHandler(),
b;0<y.size&&(b=e.fetchSprites(y,a._connection),d.push(b));for(var k in D)b=D[k],0<b.size&&(b=e.fetchGlyphs(a._tile.tileKey,k,b,a._connection),d.push(b));return c(d).then(function(d){if(6===a._tile.status)return[];var e=0,b=0,k=T.length;return h(function(){if(6===a._tile.status)return!0;switch(e){case 0:if(b<k){var d=T[b++];d.processFeatures(z,a._tile);n.push(d)}else e=1,b=0,k=I.length;break;case 1:for(var m=0;m<I.length;m++){var d=I[m],q=w[d.layer.refLayerId];q&&(q.assignBufferInfo(d),n.push(d))}e=
2;b=0;k=U.length;break;case 2:b<k?(d=U[b++],d.processFeatures(z,a._tile),n.push(d)):e=3}return 3===e},50).then(function(){n.sort(function(a,d){return a.layerIndex-d.layerIndex});return n})}).otherwise(function(a){return u.reject(Error(a))})}).otherwise(function(a){return u.reject(Error(a))})};a.prototype._parseTileData=function(a){for(var d={};a.next();)switch(a.tag()){case 3:var e=new n(a.getMessage());d[e.name]=e;break;default:a.skip()}return d};a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);
case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 3:return this._createSymbolBucket(a)}};a.prototype._createBackgroundBucket=function(a){return new b(a,this._level)};a.prototype._createFillBucket=function(a){var d=this._tile;return new k(a,this._level,a.hasDataDrivenFill?d.fillDDVertexBuffer:d.fillVertexBuffer,d.fillIndexBuffer,a.hasDataDrivenOutline?d.outlineDDVertexBuffer:d.outlineVertexBuffer,d.outlineIndexBuffer)};a.prototype._createLineBucket=function(a){var d=
this._tile;return new e(a,this._level,a.hasDataDrivenLine?d.lineDDVertexBuffer:d.lineVertexBuffer,d.lineIndexBuffer)};a.prototype._createSymbolBucket=function(a){var d=this._tile;return new m(a,this._level,a.hasDataDrivenIcon?d.iconDDVertexBuffer:d.iconVertexBuffer,d.iconIndexBuffer,a.hasDataDrivenText?d.textDDVertexBuffer:d.textVertexBuffer,d.textIndexBuffer,d.placementEngine,d.getWorkerTileHandler())};return a}()})},"esri/core/pbf":function(){define(["require","exports"],function(w,a){return function(){function a(a,
h,c,n){this._tag=0;this._dataType=99;this._data=a;this._dataView=h;this._pos=c||0;this._end=n||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var h=this._decodeVarint();this._tag=h>>3;this._dataType=h&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=
function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){return this._decodeVarint()};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){return this._decodeSVarint()};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=
function(){var a=this._dataView,h=this._pos,a=a.getUint32(h,!0)+4294967296*a.getUint32(h+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,h=this._pos,a=a.getUint32(h,!0)+4294967296*a.getInt32(h+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=
this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),h=this._pos,h=this._toString(this._data,h,h+a);this._skip(a);return h};a.prototype.getBytes=function(){var a=this._getLength(),h=this._pos,h=this._toBytes(this._data,h,h+a);this._skip(a);return h};a.prototype.getMessage=function(){var c=this._getLength(),h=this._pos,h=new a(this._data,
this._dataView,h,h+c);this._skip(c);return h};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,h=this._pos,c=0,n;if(10<=this._end-h){if(n=a[h++],
c|=n&127,0!==(n&128)&&(n=a[h++],c|=(n&127)<<7,0!==(n&128)&&(n=a[h++],c|=(n&127)<<14,0!==(n&128)&&(n=a[h++],c|=(n&127)<<21,0!==(n&128)&&(n=a[h++],c+=268435456*(n&127),0!==(n&128)&&(n=a[h++],c+=34359738368*(n&127),0!==(n&128)&&(n=a[h++],c+=4398046511104*(n&127),0!==(n&128)&&(n=a[h++],c+=562949953421312*(n&127),0!==(n&128)&&(n=a[h++],c+=72057594037927936*(n&127),0!==(n&128)&&(n=a[h++],c+=0x7fffffffffffffff*(n&127),0!==(n&128)))))))))))throw Error("Varint too long!");}else{for(var d=1;h!==this._end;){n=
a[h];if(0===(n&128))break;++h;c+=(n&127)*d;d*=128}if(h===this._end)throw Error("Varint overrun!");++h;c+=n*d}this._pos=h;return c};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,c,l){var h="",d="";for(l=Math.min(this._end,l);c<l;++c){var b=a[c];b&128?d+="%"+b.toString(16):(h+=decodeURIComponent(d)+
String.fromCharCode(b),d="")}d.length&&(h+=decodeURIComponent(d));return h};a.prototype._toBytes=function(a,c,l){l=Math.min(this._end,l);return new Uint8Array(a.buffer,c,l-c)};return a}()})},"esri/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(w,a){return function(){function a(c){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=c.clone();c.next();)switch(c.tag()){case 1:this.name=c.getString();break;case 3:this.keys.push(c.getString());break;case 4:this.values.push(a._parseValue(c.getMessage()));
break;case 5:this.extent=c.getUInt32();break;default:c.skip()}}a.prototype.getData=function(){return this._pbfLayer};a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null};return a}()})},"esri/views/vectorTiles/Feature":function(){define(["require","exports","../2d/engine/webgl/Geometry"],
function(w,a,c){return function(){function a(a,c){this.values={};var h=c.keys;for(c=c.values;a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:for(var d=a.getMessage(),b=this.values;!d.empty();){var k=d.getUInt32(),e=d.getUInt32();b[h[k]]=c[e]}break;case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var h=this._pbfGeometry,n,d;a?a.reset(this.type):
n=[];for(var b=1,k=0,e=0,m=0;!h.empty();)switch(0===k&&(k=h.getUInt32(),b=k&7,k>>=3),k--,b){case 1:e+=h.getSInt32();m+=h.getSInt32();a?a.moveTo(e,m):(d&&n.push(d),d=[],d.push(new c.Point(e,m)));break;case 2:e+=h.getSInt32();m+=h.getSInt32();a?a.lineTo(e,m):d.push(new c.Point(e,m));break;case 7:a?a.close():d&&!d[0].equals(e,m)&&d.push(d[0].clone());break;default:throw Error("Invalid path operation");}a?a=a.result():(d&&n.push(d),a=n);return this._geometry=a};return a}()})},"esri/views/2d/engine/webgl/Geometry":function(){define(["require",
"exports"],function(w,a){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,c){this.x=a;this.y=c}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,c){return a===this.x&&c===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,c){this.x=a;this.y=c};a.prototype.normalize=function(){var a=this.x,c=this.y,a=Math.sqrt(a*a+c*c);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=
this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,c){this.x+=a;this.y+=c};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,c){this.x=a.x+c.x;this.y=a.y+c.y};a.prototype.assignSub=function(a,c){this.x=a.x-c.x;this.y=a.y-c.y};a.prototype.rotate=function(a,c){var h=this.x,n=this.y;this.x=h*a-n*c;this.y=h*c+n*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,c=this.y;return Math.sqrt(a*a+c*c)};a.distance=function(a,
c){var h=c.x-a.x;a=c.y-a.y;return Math.sqrt(h*h+a*a)};a.add=function(c,h){return new a(c.x+h.x,c.y+h.y)};a.sub=function(c,h){return new a(c.x-h.x,c.y-h.y)};return a}();a.Point=w})},"esri/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(w,a,c,u,h){return function(a){function h(d,b){return a.call(this,d,b)||this}c(h,a);return h}(h)})},"esri/views/vectorTiles/Bucket":function(){define(["require",
"exports"],function(w,a){return function(){function a(a,c){this.layerExtent=4096;this._features=[];this.layer=a;this.zoom=c;this._filter=a.getFeatureFilter()}a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)};a.prototype.hasFeatures=function(){return 0<this._features.length};a.prototype.processFeatures=function(a,c){};a.prototype.assignBufferInfo=function(a){};return a}()})},"esri/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/ArrayPool ./Bucket ../2d/engine/webgl/Geometry ../../core/libs/earcut/earcut".split(" "),
function(w,a,c,u,h,l,n,d){return function(a){function b(d,b,k,c,q,p){b=a.call(this,d,b)||this;if(d.hasDataDrivenFill!==k.isDataDriven())throw Error("incompatible fill buffer");if(d.hasDataDrivenOutline!==q.isDataDriven())throw Error("incompatible outline buffer");b._fillVertexBuffer=k;b._fillIndexBuffer=c;b._outlineVertexBuffer=q;b._outlineIndexBuffer=p;return b}c(b,a);Object.defineProperty(b.prototype,"fillIndexStart",{get:function(){return this._fillIndexStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"fillIndexCount",{get:function(){return this._fillIndexCount},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"outlineIndexStart",{get:function(){return this._outlineIndexStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"outlineIndexCount",{get:function(){return this._outlineIndexCount},enumerable:!0,configurable:!0});b.prototype.assignBufferInfo=function(a){a._fillIndexStart=this._fillIndexStart;a._fillIndexCount=this._fillIndexCount;a.layer.getPaintProperty("fill-outline-color")?
(a._outlineIndexStart=this._outlineIndexStart,a._outlineIndexCount=this._outlineIndexCount):(a._outlineIndexStart=0,a._outlineIndexCount=0)};b.prototype.processFeatures=function(a,d){this._fillIndexStart=this._fillIndexBuffer.index;this._fillIndexCount=0;this._outlineIndexStart=this._outlineIndexBuffer.index;this._outlineIndexCount=0;d=this.layer;var b=this.zoom,e=d.hasDataDrivenFill,k=d.hasDataDrivenOutline;a&&a.setExtent(this.layerExtent);for(var m=d.getPaintValue("fill-pattern",b),c=d.getPaintValue("fill-antialias",
b)&&void 0===m,h=0,n=this._features;h<n.length;h++){var l=n[h],B=void 0;e&&(B={color:m?[1,1,1,1]:d.getPaintValue("fill-color",b,l),opacity:d.getPaintValue("fill-opacity",b,l)});var A=void 0;k&&(A={color:m?[1,1,1,1]:d.getPaintValue("fill-outline-color",b,l),opacity:d.getPaintValue("fill-opacity",b,l)});l=l.getGeometry(a);this._processFeature(l,c,B,A)}};b.prototype._processFeature=function(a,d,k,c){if(a){var e=a.length;if(d)for(d=0;d<e;d++)this._processOutline(a[d],c);var m;for(d=0;d<e;d++)c=b._area(a[d]),
128<c?(void 0!==m&&this._processFill(a,m,k),m=[d]):-128>c&&void 0!==m&&m.push(d);void 0!==m&&this._processFill(a,m,k)}};b.prototype._processOutline=function(a,d){var b=this._outlineVertexBuffer,e=this._outlineIndexBuffer,k=e.index,m,c,h,l=new n.Point(0,0),E=new n.Point(0,0),B=new n.Point(0,0),A=-1,v=-1,C=-1,S=-1,P=-1,O=!1,u=a.length;if(!(2>u)){var T=a[0];for(m=a[u-1];u&&m.isEqual(T);)--u,m=a[u-1];if(!(2>u-0)){for(T=0;T<u;++T){0===T?(m=a[u-1],c=a[0],h=a[1],l.assignSub(c,m),l.normalize(),l.rightPerpendicular()):
(m=c,c=h,h=T!==u-1?a[T+1]:a[0],l.assign(E));m=this._isClipEdge(m,c);-1===S&&(O=m);E.assignSub(h,c);E.normalize();E.rightPerpendicular();C=l.x*E.y-l.y*E.x;B.assignAdd(l,E);B.normalize();var I=-B.x*-l.x+-B.y*-l.y,I=Math.abs(0!==I?1/I:1);8<I&&(I=8);0<=C?(C=b.add(c.x,c.y,l.x,l.y,0,1,d),-1===S&&(S=C),0<=A&&0<=v&&0<=C&&!m&&e.add(A,v,C),v=b.add(c.x,c.y,I*-B.x,I*-B.y,0,-1,d),-1===P&&(P=v),0<=A&&0<=v&&0<=C&&!m&&e.add(A,v,C),A=v,v=C,C=b.add(c.x,c.y,B.x,B.y,0,1,d),0<=A&&0<=v&&0<=C&&!m&&e.add(A,v,C),v=b.add(c.x,
c.y,E.x,E.y,0,1,d)):(C=b.add(c.x,c.y,I*B.x,I*B.y,0,1,d),-1===S&&(S=C),0<=A&&0<=v&&0<=C&&!m&&e.add(A,v,C),v=b.add(c.x,c.y,-l.x,-l.y,0,-1,d),-1===P&&(P=v),0<=A&&0<=v&&0<=C&&!m&&e.add(A,v,C),A=v,v=C,C=b.add(c.x,c.y,-B.x,-B.y,0,-1,d),0<=A&&0<=v&&0<=C&&!m&&e.add(A,v,C),A=b.add(c.x,c.y,-E.x,-E.y,0,-1,d));0<=A&&0<=v&&0<=C&&!m&&e.add(A,v,C)}0<=A&&0<=v&&0<=S&&!O&&e.add(A,v,S);0<=A&&0<=S&&0<=P&&!O&&e.add(A,P,S);this._outlineIndexCount+=3*(e.index-k)}}};b.prototype._processFill=function(a,b,k){var e;1<b.length&&
(e=[]);for(var c=0,m=0;m<b.length;m++){var n=b[m];0!==c&&e.push(c);c+=a[n].length}for(var m=2*c,c=h.acquire(),t=0;t<b.length;t++)for(var n=b[t],n=a[n],l=n.length,E=0;E<l;++E)c.push(n[E].x),c.push(n[E].y);a=d(c,e,2);b=a.length;if(0<b){e=this._fillVertexBuffer.index;for(t=0;t<m;)this._fillVertexBuffer.add(c[t++],c[t++],k);for(k=0;k<b;)this._fillIndexBuffer.add(e+a[k++],e+a[k++],e+a[k++]);this._fillIndexCount+=b}h.release(c)};b.prototype._isClipEdge=function(a,d){return a.x===d.x?-64>=a.x||4160<=a.x:
a.y===d.y?-64>=a.y||4160<=a.y:!1};b._area=function(a){for(var d=0,b=a.length-1,e=0;e<b;e++)d+=(a[e].x-a[e+1].x)*(a[e].y+a[e+1].y);d+=(a[b].x-a[0].x)*(a[b].y+a[0].y);return.5*d};return b}(l)})},"esri/core/libs/earcut/earcut":function(){define([],function(){function w(d,e,k){k=k||2;E=d.length/k+(e?2*e.length:0);B=!1;var m=e&&e.length,p=m?e[0]*k:d.length,h=a(d,0,p,k,!0),x=[];if(!h)return x;var A,t,v,z;if(m)a:{var y=k,m=[],D,H,J;z=0;for(D=e.length;z<D;z++)H=e[z]*y,J=z<D-1?e[z+1]*y:d.length,H=a(d,H,J,
y,!1),H===H.next&&(H.steiner=!0),m.push(b(H));m.sort(l);for(z=0;z<m.length;z++){if(!h){h=null;break a}e=m[z];y=h;if(y=n(e,y))e=q(y,e),c(e,e.next);h=c(h,h.next)}}if(B)return x;if(d.length>80*k){A=v=d[0];t=m=d[1];for(y=k;y<p;y+=k)z=d[y],e=d[y+1],z<A&&(A=z),e<t&&(t=e),z>v&&(v=z),e>m&&(m=e);v=Math.max(v-A,m-t)}u(h,x,k,A,t,v);return x}function a(a,d,b,e,k){var c;if(k===0<F(a,d,b,e))for(k=d;k<b;k+=e)c=p(k,a[k],a[k+1],c);else for(k=b-e;k>=d;k-=e)c=p(k,a[k],a[k+1],c);c&&m(c,c.next)&&(G(c),c=c.next);return c}
function c(a,d){if(!a)return a;d||(d=a);var b,k=0,c=E*E/2;do{b=!1;if(a.steiner||!m(a,a.next)&&0!==e(a.prev,a,a.next))a=a.next;else{G(a);a=d=a.prev;if(a===a.next)return null;b=!0}if(k++>c)return B=!0,null}while(b||a!==d);return d}function u(a,b,p,n,l,J,E){if(a){if(!E&&J){var A=a,v=A;do null===v.z&&(v.z=d(v.x,v.y,n,l,J)),v.prevZ=v.prev,v=v.nextZ=v.next;while(v!==A);v.prevZ.nextZ=null;v.prevZ=null;var A=v,C,z,y,D,H,Q,K=1;do{v=A;y=A=null;for(D=0;v;){D++;z=v;for(C=H=0;C<K&&(H++,z=z.nextZ,z);C++);for(Q=
K;0<H||0<Q&&z;)0===H?(C=z,z=z.nextZ,Q--):0!==Q&&z?v.z<=z.z?(C=v,v=v.nextZ,H--):(C=z,z=z.nextZ,Q--):(C=v,v=v.nextZ,H--),y?y.nextZ=C:A=C,C.prevZ=y,y=C;v=z}y.nextZ=null;K*=2}while(1<D)}for(A=a;a.prev!==a.next;){v=a.prev;z=a.next;if(J)a:{y=a;Q=n;var L=l,X=J;D=y.prev;H=y;K=y.next;if(0<=e(D,H,K))y=!1;else{var S=D.x>H.x?D.x>K.x?D.x:K.x:H.x>K.x?H.x:K.x,F=D.y>H.y?D.y>K.y?D.y:K.y:H.y>K.y?H.y:K.y;C=d(D.x<H.x?D.x<K.x?D.x:K.x:H.x<K.x?H.x:K.x,D.y<H.y?D.y<K.y?D.y:K.y:H.y<K.y?H.y:K.y,Q,L,X);Q=d(S,F,Q,L,X);for(L=
y.nextZ;L&&L.z<=Q;){if(L!==y.prev&&L!==y.next&&k(D.x,D.y,H.x,H.y,K.x,K.y,L.x,L.y)&&0<=e(L.prev,L,L.next)){y=!1;break a}L=L.nextZ}for(L=y.prevZ;L&&L.z>=C;){if(L!==y.prev&&L!==y.next&&k(D.x,D.y,H.x,H.y,K.x,K.y,L.x,L.y)&&0<=e(L.prev,L,L.next)){y=!1;break a}L=L.prevZ}y=!0}}else y=h(a);if(y)b.push(v.i/p),b.push(a.i/p),b.push(z.i/p),G(a),A=a=z.next;else{if(B)break;a=z;if(a===A){if(!E)u(c(a),b,p,n,l,J,1);else if(1===E){E=b;A=p;v=a;do z=v.prev,y=v.next.next,!m(z,y)&&t(z,v,v.next,y)&&x(z,y)&&x(y,z)&&(E.push(z.i/
A),E.push(v.i/A),E.push(y.i/A),G(v),G(v.next),v=a=y),v=v.next;while(v!==a);a=v;u(a,b,p,n,l,J,2)}else if(2===E)a:{E=a;do{for(A=E.next.next;A!==E.prev;){if(v=E.i!==A.i){v=E;z=A;y=void 0;if(y=v.next.i!==z.i&&v.prev.i!==z.i){y=void 0;b:{y=v;do{if(y.i!==v.i&&y.next.i!==v.i&&y.i!==z.i&&y.next.i!==z.i&&t(y,y.next,v,z)){y=!0;break b}y=y.next}while(y!==v);y=!1}y=!y}D=void 0;if(D=y&&x(v,z)&&x(z,v)){y=v;D=!1;H=(v.x+z.x)/2;z=(v.y+z.y)/2;do y.y>z!==y.next.y>z&&H<(y.next.x-y.x)*(z-y.y)/(y.next.y-y.y)+y.x&&(D=!D),
y=y.next;while(y!==v)}v=D}if(v){a=q(E,A);E=c(E,E.next);a=c(a,a.next);u(E,b,p,n,l,J);u(a,b,p,n,l,J);break a}A=A.next}E=E.next}while(E!==a)}break}}}}}function h(a){var d=a.prev,b=a.next;if(0<=e(d,a,b))return!1;for(var c=a.next.next,m=0;c!==a.prev;){if(k(d.x,d.y,a.x,a.y,b.x,b.y,c.x,c.y)&&0<=e(c.prev,c,c.next))return!1;c=c.next;if(m++>E)return B=!0,!1}return!0}function l(a,d){return a.x-d.x}function n(a,d){var b=d,e=a.x,c=a.y,m=-Infinity,q;do{if(!b)return null;if(c<=b.y&&c>=b.next.y){var p=b.x+(c-b.y)*
(b.next.x-b.x)/(b.next.y-b.y);if(p<=e&&p>m){m=p;if(p===e){if(c===b.y)return b;if(c===b.next.y)return b.next}q=b.x<b.next.x?b:b.next}}b=b.next}while(b!==d);if(!q)return null;if(e===m)return q.prev;d=q;for(var p=q.x,h=q.y,n=Infinity,t,b=q.next;b!==d;)e>=b.x&&b.x>=p&&k(c<h?e:m,c,p,h,c<h?m:e,c,b.x,b.y)&&(t=Math.abs(c-b.y)/(e-b.x),(t<n||t===n&&b.x>q.x)&&x(b,a)&&(q=b,n=t)),b=b.next;return q}function d(a,d,b,e,k){a=32767*(a-b)/k;d=32767*(d-e)/k;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;
d=(d|d<<8)&16711935;d=(d|d<<4)&252645135;d=(d|d<<2)&858993459;return(a|a<<1)&1431655765|((d|d<<1)&1431655765)<<1}function b(a){var d=a,b=a;do d.x<b.x&&(b=d),d=d.next;while(d!==a);return b}function k(a,d,b,e,k,c,m,q){return 0<=(k-m)*(d-q)-(a-m)*(c-q)&&0<=(a-m)*(e-q)-(b-m)*(d-q)&&0<=(b-m)*(c-q)-(k-m)*(e-q)}function e(a,d,b){return(d.y-a.y)*(b.x-d.x)-(d.x-a.x)*(b.y-d.y)}function m(a,d){return a.x===d.x&&a.y===d.y}function t(a,d,b,k){return m(a,d)&&m(b,k)||m(a,k)&&m(b,d)?!0:0<e(a,d,b)!==0<e(a,d,k)&&0<
e(b,k,a)!==0<e(b,k,d)}function x(a,d){return 0>e(a.prev,a,a.next)?0<=e(a,d,a.next)&&0<=e(a,a.prev,d):0>e(a,d,a.prev)||0>e(a,a.next,d)}function q(a,d){var b=new J(a.i,a.x,a.y),e=new J(d.i,d.x,d.y),k=a.next,c=d.prev;a.next=d;d.prev=a;b.next=k;k.prev=b;e.next=b;b.prev=e;c.next=e;e.prev=c;return e}function p(a,d,b,e){a=new J(a,d,b);e?(a.next=e.next,a.prev=e,e.next.prev=a,e.next=a):(a.prev=a,a.next=a);return a}function G(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&
(a.nextZ.prevZ=a.prevZ)}function J(a,d,b){this.i=a;this.x=d;this.y=b;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function F(a,d,b,e){for(var k=0,c=b-e;d<b;d+=e)k+=(a[c]-a[d])*(a[d+1]+a[c+1]),c=d;return k}var E,B;w.deviation=function(a,d,b,e){var k=d&&d.length,c=Math.abs(F(a,0,k?d[0]*b:a.length,b));if(k)for(var k=0,m=d.length;k<m;k++)c-=Math.abs(F(a,d[k]*b,k<m-1?d[k+1]*b:a.length,b));for(k=d=0;k<e.length;k+=3){var m=e[k]*b,q=e[k+1]*b,p=e[k+2]*b;d+=Math.abs((a[m]-a[p])*(a[q+
1]-a[m+1])-(a[m]-a[q])*(a[p+1]-a[m+1]))}return 0===c&&0===d?0:Math.abs((d-c)/c)};w.flatten=function(a){for(var d=a[0][0].length,b={vertices:[],holes:[],dimensions:d},e=0,k=0;k<a.length;k++){for(var c=0;c<a[k].length;c++)for(var m=0;m<d;m++)b.vertices.push(a[k][c][m]);0<k&&(e+=a[k-1].length,b.holes.push(e))}return b};return w})},"esri/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ../2d/engine/webgl/LineTess ./style/StyleLayer".split(" "),
function(w,a,c,u,h,l,n){var d=new l.Tessellator({distanceAlongCorrection:!0});return function(a){function b(d,b,k,c){b=a.call(this,d,b)||this;b.extrudeVectorsDoubleBuffer=[l.allocExtrudeVectors(),l.allocExtrudeVectors()];b.firstExtrudeVectors=l.allocExtrudeVectors();b.recycledTriangleBridge=l.allocTriangles(20);b.recycledTrianglePie=l.allocTriangles(20);if(d.hasDataDrivenLine!==k.isDataDriven())throw Error("incompatible line buffer");b._lineVertexBuffer=k;b._lineIndexBuffer=c;return b}c(b,a);Object.defineProperty(b.prototype,
"lineIndexStart",{get:function(){return this._lineIndexStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"lineIndexCount",{get:function(){return this._lineIndexCount},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"connectorStart",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"connectorCount",{get:function(){return 0},enumerable:!0,configurable:!0});b.prototype.assignBufferInfo=function(a){a._lineIndexStart=this._lineIndexStart;
a._lineIndexCount=this._lineIndexCount};b.prototype.processFeatures=function(a,d){this._lineIndexStart=this._lineIndexBuffer.index;this._lineIndexCount=0;d=this.layer;var b=this.zoom,e=d.hasDataDrivenLine;a&&a.setExtent(this.layerExtent);for(var k=d.getPaintValue("line-pattern",b),c=0,m=this._features;c<m.length;c++){var h=m[c],l=new n.LineLayout(d,b,h),E=void 0;if(e&&(E={color:k?[1,1,1,1]:d.getPaintValue("line-color",b,h),opacity:d.getPaintValue("line-opacity",b,h),size:Math.max(Math.min(d.getPaintValue("line-width",
b,h),256),0)},0>=E.size||0>=E.opacity||0>=E.color[3]))continue;h=h.getGeometry(a);this._processFeature(l,h,E)}};b.prototype._processFeature=function(a,d,b){if(d)for(var e=d.length,k=0;k<e;k++)this._processGeometry(d[k],a,b)};b.prototype._processGeometry=function(a,d,b){if(!(2>a.length)){for(var e=a[0],k=a[a.length-1],c=k.x-e.x,k=k.y-e.y,e=1E-6>c*c+k*k,m=a[0],h=1;h<a.length;)c=a[h].x-m.x,k=a[h].y-m.y,1E-6>c*c+k*k?a.splice(h,1):(m=a[h],++h);if(!(2>a.length)){this.vertices=a;this.verticesLen=a.length;
this.isClosed=e;this.cap=d.cap;this.join=d.join;this.almostParallelRads=.05;this.veryShallowRads=.1;this.miterSafeRads=l.MITER_SAFE_RADS;this.miterLimitMag=Math.min(d.miterLimit,l.SYSTEM_MAG_LIMIT);this.roundLimitRads=Math.min(d.roundLimit,.5);this.newRoundJoinsSafeRads=2.3;d=this._lineIndexBuffer.index;for(var c=0,n=void 0,k=this.verticesLen,m=0;m<k;++m){var h=a[m],t=a[(m+k-1)%k],B=e&&this._isClipEdge(t,h),t=n===this.extrudeVectorsDoubleBuffer[m%2]?this.extrudeVectorsDoubleBuffer[(m+1)%2]:this.extrudeVectorsDoubleBuffer[m%
2];m<k-1||!e||this.hasPattern?(this._computeExtrudeVectors(t,m),this._writeGPUVertices(h.x,h.y,c,t,b),!t.capCenter||e&&m===k-1||this._writeGPUPieElements(t,B),e&&0===m&&!this.hasPattern&&l.copyExtrudeVectors(this.firstExtrudeVectors,t)):l.copyExtrudeVectors(t,this.firstExtrudeVectors);n&&this._writeGPUBridgeElements(n,t,B);m<k-1&&(n=a[m+1],h=l.length([n.x-h.x,n.y-h.y]),c+=h);n=t}this._lineIndexCount+=3*(this._lineIndexBuffer.index-d)}}};b.prototype._computeExtrudeVectors=function(a,d){var b=this.vertices,
e=this.verticesLen,k=this.isClosed,c=b[d],m=[void 0,void 0],h=[void 0,void 0];if(0<d&&d<e-1){var n=b[(d+e-1)%e],E=b[(d+1)%e];l.normalize(m,[c.x-n.x,c.y-n.y]);l.normalize(h,[E.x-c.x,E.y-c.y])}else if(0===d)E=b[(d+1)%e],l.normalize(h,[E.x-c.x,E.y-c.y]),k?(b=b[e-2],l.normalize(m,[c.x-b.x,c.y-b.y])):m=h;else if(d===e-1)n=b[(d+e-1)%e],l.normalize(m,[c.x-n.x,c.y-n.y]),k?(b=b[1],l.normalize(h,[b.x-c.x,b.y-c.y])):h=m;else{console.error("Vertex index 'i' out of range.");return}k||0!==d?k||d!==e-1?this._computeJoinExtrudeVectors(a,
m,h):this._computeCapExtrudeVectors(a,m,h,l.CapPosition.END):this._computeCapExtrudeVectors(a,m,h,l.CapPosition.START)};b.prototype._computeCapExtrudeVectors=function(a,b,k,c){0===this.cap?d.buttCap(a,b,k):1===this.cap?d.roundCap(a,b,k,c,l.getNumberOfSlices(Math.PI),c===l.CapPosition.START?-1:1):2===this.cap?d.squareCap(a,b,k,c):d.buttCap(a,b,k)};b.prototype._computeJoinExtrudeVectors=function(a,b,k){var e=l.getRads(b,k);if(e>Math.PI-this.almostParallelRads)d.rectJoin(a,b,k);else if(0===this.join&&
e>=this.veryShallowRads)d.bevelJoin(a,b,k,1);else if(1===this.join&&e>=this.veryShallowRads){var c=l.getNumberOfSlices(e);e<this.newRoundJoinsSafeRads?2>c||e<this.roundLimitRads?d.bevelJoin(a,b,k,1):d.roundJoin(a,b,k,c):d.unitRoundJoin(a,b,k,c)}else e<this.almostParallelRads?d.fastMiterJoin(a,b,k):e<this.miterSafeRads?d.miterJoin(a,b,k):d.bevelJoin(a,b,k,this.miterLimitMag)};b.prototype._writeGPUVertices=function(a,d,b,k,c){for(var e=0;e<k.vectors.count;++e){var m=k.vectors.items[e].vector[0],h=k.vectors.items[e].vector[1],
q=k.vectors.items[e].texCoords[0],n=k.vectors.items[e].texCoords[1];k.vectors.items[e].base=this._lineVertexBuffer.index;this._lineVertexBuffer.add(a,d,m,h,q,n,b,c)}};b.prototype._writeGPUBridgeElements=function(a,b,k){d.bridge(this.recycledTriangleBridge,a,b);if(!k)for(a=0;a<this.recycledTriangleBridge.count;++a)b=this.recycledTriangleBridge.items[a],this._lineIndexBuffer.add(b.v1.base,b.v2.base,b.v3.base)};b.prototype._writeGPUPieElements=function(a,b){d.pie(this.recycledTrianglePie,a);if(!b)for(a=
0;a<this.recycledTrianglePie.count;++a)b=this.recycledTrianglePie.items[a],this._lineIndexBuffer.add(b.v1.base,b.v2.base,b.v3.base)};b.prototype._isClipEdge=function(a,d){return a.x===d.x?-64>=a.x||4160<=a.x:a.y===d.y?-64>=a.y||4160<=a.y:!1};return b}(h)})},"esri/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(w,a){function c(a){var d={items:[],count:0},b;for(b=0;b<a;++b)d.items.push(void 0);return d}function u(a,d){E.vector[0]=a.vector[0];E.vector[1]=a.vector[1];
E.texCoords[0]=a.texCoords[0];E.texCoords[1]=a.texCoords[1];E.direction[0]=a.direction[0];E.direction[1]=a.direction[1];E.base=a.base;a.vector[0]=d.vector[0];a.vector[1]=d.vector[1];a.texCoords[0]=d.texCoords[0];a.texCoords[1]=d.texCoords[1];a.direction[0]=d.direction[0];a.direction[1]=d.direction[1];a.base=d.base;d.vector[0]=E.vector[0];d.vector[1]=E.vector[1];d.texCoords[0]=E.texCoords[0];d.texCoords[1]=E.texCoords[1];d.direction[0]=E.direction[0];d.direction[1]=E.direction[1];d.base=E.base}function h(a,
d){return a[0]*d[0]+a[1]*d[1]}function l(a){return Math.sqrt(h(a,a))}function n(a,d){var b=l(d);a[0]=d[0]/b;a[1]=d[1]/b;return a}function d(a,d){a[0]=-d[1];a[1]=d[0];return a}function b(a,d){return a[0]*d[1]-a[1]*d[0]}function k(a,d){a[0]=-d[0];a[1]=-d[1];return a}function e(a,d,b){a[0]=d[0]*b;a[1]=d[1]*b;return a}function m(a,d,b){a[0]=d[0]+b[0];a[1]=d[1]+b[1];return a}function t(a,d){a=h(a,d);return.999<a?0:-.999>a?Math.PI:Math.acos(a)}function x(a,d,b,k,c){if(0===k)a.count=0;else{var m=l(d),h=
e(B[0],d,1/m);b=e(B[1],b,1/m);h=t(h,b);h=(c?-1:1)*h/k;c=Math.cos(h);h=Math.sin(h);b=d[0];var q=d[1];for(d=0;d<k-1;++d)m=b,b=c*m-h*q,q=h*m+c*q,a.items[d][0]=b,a.items[d][1]=q;a.count=k-1}}function q(a){var d=a.count,b=Math.floor(d/2),e;for(e=0;e<b;++e){var k=a.items[e];a.items[e]=a.items[d-e-1];a.items[d-e-1]=k}}Object.defineProperty(a,"__esModule",{value:!0});var p;(function(a){a[a.ENTRY=1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"})(p=a.VectorRole||(a.VectorRole={}));var G;(function(a){a[a.START=
1]="START";a[a.END=2]="END"})(G=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var J=a.SYSTEM_MAG_LIMIT*a.SYSTEM_MAG_LIMIT,F=16/(2*Math.PI);a.allocTriangles=function(a){var d={items:[],count:0},b;for(b=0;b<a;++b)d.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],
direction:[void 0,void 0]}});return d};a.allocExtrudeVectors=function(){var a={items:[],count:0},d;for(d=0;30>d;++d)a.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});d={};d[p.ENTRY]=c(20);d[p.EXIT]=c(20);d[p.CAP]=c(20);return{vectors:a,lists:d}};a.copyExtrudeVectors=function(a,d){var b;for(b=0;b<d.vectors.count;++b)a.vectors.items[b].vector[0]=d.vectors.items[b].vector[0],a.vectors.items[b].vector[1]=d.vectors.items[b].vector[1],a.vectors.items[b].texCoords[0]=
d.vectors.items[b].texCoords[0],a.vectors.items[b].texCoords[1]=d.vectors.items[b].texCoords[1],a.vectors.items[b].direction[0]=d.vectors.items[b].direction[0],a.vectors.items[b].direction[1]=d.vectors.items[b].direction[1],a.vectors.items[b].base=d.vectors.items[b].base;a.vectors.count=d.vectors.count;var e=d.lists[p.ENTRY],k=a.lists[p.ENTRY],c=d.lists[p.EXIT],m=a.lists[p.EXIT],h=d.lists[p.CAP],q=a.lists[p.CAP];for(b=0;b<e.count;++b)k.items[b]=e.items[b];k.count=e.count;for(b=0;b<c.count;++b)m.items[b]=
c.items[b];m.count=c.count;for(b=0;b<h.count;++b)q.items[b]=h.items[b];q.count=h.count;a.capCenter=d.capCenter};var E={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};a.swapExtrudeVectors=u;var B=[];for(w=0;32>w;++w)B.push([void 0,void 0]);var A=function(a){var d={items:[],count:0},b;for(b=0;b<a;++b)d.items.push([void 0,void 0]);return d}(16);a.length=l;a.normalize=n;a.getNumberOfSlices=function(a){return Math.max(Math.round(a*F),1)};a.getRads=t;a.reverse=q;
var v=[void 0,void 0],C=[void 0,void 0],S=[0,0],P=[0,0],O=[0,0],U=[0,0],T=Math.cos(Math.PI/4),I=Math.sin(Math.PI/4),R=Math.sqrt(2);w=function(){function a(a){this._distanceAlongCorrection=a.distanceAlongCorrection}a.prototype.bridge=function(a,d,b){var e=d.vectors;d=d.lists[p.EXIT];var k=b.vectors,c=b.lists[p.ENTRY],m,h;if(d.count===c.count+1)b=d.items,m=e.items,h=c.items,k=k.items;else if(c.count===d.count+1)b=c.items,m=k.items,h=d.items,k=e.items;else if(d.count===c.count)b=c.items,m=k.items,h=
d.items,k=e.items;else{console.error("Cannot bridge "+d.count+" to "+c.count+".");a.count=0;return}e=d.count+c.count-2;a.count=e;v[0]=b;v[1]=h;C[0]=m;C[1]=k;for(d=0;d<e;++d)b=a.items[d],m=(d+0)%2,m=C[m][v[m][Math.floor((d+0)/2)]],b.v1.vector[0]=m.vector[0],b.v1.vector[1]=m.vector[1],b.v1.texCoords[0]=m.texCoords[0],b.v1.texCoords[1]=m.texCoords[1],b.v1.direction[0]=m.direction[0],b.v1.direction[1]=m.direction[1],b.v1.base=m.base,m=(d+1)%2,m=C[m][v[m][Math.floor((d+1)/2)]],b.v2.vector[0]=m.vector[0],
b.v2.vector[1]=m.vector[1],b.v2.texCoords[0]=m.texCoords[0],b.v2.texCoords[1]=m.texCoords[1],b.v2.direction[0]=m.direction[0],b.v2.direction[1]=m.direction[1],b.v2.base=m.base,m=(d+2)%2,m=C[m][v[m][Math.floor((d+2)/2)]],b.v3.vector[0]=m.vector[0],b.v3.vector[1]=m.vector[1],b.v3.texCoords[0]=m.texCoords[0],b.v3.texCoords[1]=m.texCoords[1],b.v3.direction[0]=m.direction[0],b.v3.direction[1]=m.direction[1],b.v3.base=m.base,m=b.v1.base&&b.v1.base.point||S,h=b.v2.base&&b.v2.base.point||S,k=b.v3.base&&b.v3.base.point||
S,P[0]=m[0]+b.v1.vector[0],P[1]=m[1]+b.v1.vector[1],O[0]=h[0]+b.v2.vector[0],O[1]=h[1]+b.v2.vector[1],U[0]=k[0]+b.v3.vector[0],U[1]=k[1]+b.v3.vector[1],0>(O[0]-P[0])*(U[1]-P[1])-(U[0]-P[0])*(O[1]-P[1])||u(b.v2,b.v3)};a.prototype.pie=function(a,d){if(0===d.lists[p.CAP].count)a.count=0;else if(1===d.lists[p.CAP].count)console.error("A single vector is not enough to define a pie."),a.count=0;else{a.count=d.lists[p.CAP].count-1;var b;for(b=0;b<a.count;++b){var e=a.items[b],k=d.vectors.items[d.lists[p.CAP].items[b]];
e.v1.vector[0]=k.vector[0];e.v1.vector[1]=k.vector[1];e.v1.texCoords[0]=k.texCoords[0];e.v1.texCoords[1]=k.texCoords[1];e.v1.direction[0]=k.direction[0];e.v1.direction[1]=k.direction[1];e.v1.base=k.base;k=d.vectors.items[d.lists[p.CAP].items[b+1]];e.v2.vector[0]=k.vector[0];e.v2.vector[1]=k.vector[1];e.v2.texCoords[0]=k.texCoords[0];e.v2.texCoords[1]=k.texCoords[1];e.v2.direction[0]=k.direction[0];e.v2.direction[1]=k.direction[1];e.v2.base=k.base;k=d.vectors.items[d.capCenter];e.v3.vector[0]=k.vector[0];
e.v3.vector[1]=k.vector[1];e.v3.texCoords[0]=k.texCoords[0];e.v3.texCoords[1]=k.texCoords[1];e.v3.direction[0]=k.direction[0];e.v3.direction[1]=k.direction[1];e.v3.base=k.base;var k=e.v1.base&&e.v1.base.point||S,c=e.v2.base&&e.v2.base.point||S,m=e.v3.base&&e.v3.base.point||S;P[0]=k[0]+e.v1.vector[0];P[1]=k[1]+e.v1.vector[1];O[0]=c[0]+e.v2.vector[0];O[1]=c[1]+e.v2.vector[1];U[0]=m[0]+e.v3.vector[0];U[1]=m[1]+e.v3.vector[1];0>(O[0]-P[0])*(U[1]-P[1])-(U[0]-P[0])*(O[1]-P[1])||u(e.v2,e.v3)}}};a.prototype.buttCap=
function(a,d,b){this.fastMiterJoin(a,d,b)};a.prototype.roundCap=function(a,d,b,e,k,c){void 0===c&&(c=0);this.fastMiterJoin(a,d,b);b=e===G.START?0:1;e=e===G.START?1:0;a.capCenter=a.vectors.count;d=a.vectors.items[a.capCenter];d.vector[0]=0;d.vector[1]=0;d.texCoords[0]=0;d.texCoords[1]=0;d.direction[0]=0;d.direction[1]=0;++a.vectors.count;x(A,a.vectors.items[b].vector,a.vectors.items[e].vector,k,!1);k=a.vectors.count;d=a.lists[p.CAP];d.items[0]=b;b=a.vectors.items[b].texCoords[1];var m=a.vectors.items[e].texCoords[1],
h;for(h=0;h<A.count;++h){var q=c*(1-Math.abs(A.count/2-h)/(A.count/2)),n=b+h/(A.count-1)*(m-b),l=A.items[h],t=a.vectors.items[k+h];t.vector[0]=l[0];t.vector[1]=l[1];t.texCoords[0]=q;t.texCoords[1]=n;t.direction[0]=0;t.direction[1]=0;d.items[h+1]=k+h}d.items[A.count+1]=e;d.count=A.count+2;a.vectors.count=k+A.count};a.prototype.squareCap=function(a,d,b,k){this.fastMiterJoin(a,d,b);d=k===G.START?0:1;b=k===G.START?1:0;var c=B[0],m=B[1],h=B[2],q=B[3];k=B[4];var n=a.vectors.items[d].vector;c[0]=T*n[0]-
I*n[1];c[1]=I*n[0]+T*n[1];e(q,c,R);m[0]=T*c[0]-I*c[1];m[1]=I*c[0]+T*c[1];h[0]=T*m[0]-I*m[1];h[1]=I*m[0]+T*m[1];e(k,h,R);d=a.vectors.items[d];d.vector[0]=q[0];d.vector[1]=q[1];a=a.vectors.items[b];a.vector[0]=k[0];a.vector[1]=k[1]};a.prototype.fastMiterJoin=function(a,b,e){e=d(B[0],e);b=k(B[1],e);var c=a.vectors.items[0];c.vector[0]=e[0];c.vector[1]=e[1];c.texCoords[0]=0;c.texCoords[1]=-1;c.direction[0]=0;c.direction[1]=0;e=a.vectors.items[1];e.vector[0]=b[0];e.vector[1]=b[1];e.texCoords[0]=0;e.texCoords[1]=
1;e.direction[0]=0;e.direction[1]=0;a.vectors.count=2;b=a.lists[p.ENTRY];b.items[0]=0;b.items[1]=1;b.count=2;b=a.lists[p.EXIT];b.items[0]=0;b.items[1]=1;b.count=2;a.lists[p.CAP].count=0;a.capCenter=void 0};a.prototype.miterJoin=function(a,b,c){var m=d(B[0],b),q=d(B[1],c),l=B[2];l[0]=m[0]+q[0];l[1]=m[1]+q[1];q=n(B[3],l);m=h(q,m);q=e(B[4],q,1/m);m=k(B[5],q);this._distanceAlongCorrection?(l=a.vectors.items[0],l.vector[0]=q[0],l.vector[1]=q[1],l.texCoords[0]=0,l.texCoords[1]=-1,l.direction[0]=b[0],l.direction[1]=
b[1],l=a.vectors.items[1],l.vector[0]=m[0],l.vector[1]=m[1],l.texCoords[0]=0,l.texCoords[1]=1,l.direction[0]=b[0],l.direction[1]=b[1],b=a.vectors.items[2],b.vector[0]=q[0],b.vector[1]=q[1],b.texCoords[0]=0,b.texCoords[1]=-1,b.direction[0]=c[0],b.direction[1]=c[1],b=a.vectors.items[3],b.vector[0]=m[0],b.vector[1]=m[1],b.texCoords[0]=0,b.texCoords[1]=1,b.direction[0]=c[0],b.direction[1]=c[1],a.vectors.count=4,c=a.lists[p.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[p.EXIT],c.items[0]=2,c.items[1]=
3):(l=a.vectors.items[0],l.vector[0]=q[0],l.vector[1]=q[1],l.texCoords[0]=0,l.texCoords[1]=-1,l.direction[0]=0,l.direction[1]=0,l=a.vectors.items[1],l.vector[0]=m[0],l.vector[1]=m[1],l.texCoords[0]=0,l.texCoords[1]=1,l.direction[0]=0,l.direction[1]=0,a.vectors.count=2,c=a.lists[p.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[p.EXIT],c.items[0]=0,c.items[1]=1);c.count=2;a.lists[p.CAP].count=0;a.capCenter=void 0};a.prototype.bevelJoin=function(a,c,l,t){var x=t*t;t=b(c,l);var E=0<t?[-1,1]:[1,
-1],v=E[0],E=E[1],y=0<t?k(B[0],d(B[1],c)):d(B[2],c),A=0<t?k(B[3],d(B[4],l)):d(B[5],l),G=B[6];G[0]=y[0]+A[0];G[1]=y[1]+A[1];var u=n(B[7],G),D=k(B[8],u),H=h(u,y),G=b(u,y),z=Math.abs(G/H),G=1+z*z,F=G<J?[z,this._distanceAlongCorrection]:[Math.sqrt(J-1),!0],C=F[0],F=F[1],S=G<x?[z,this._distanceAlongCorrection]:[Math.sqrt(x-1),!0],z=S[0];(S=S[1])&&F?(F=a.vectors.items[0],m(F.vector,k(B[9],y),e(B[10],k(B[11],c),C)),F.texCoords[0]=0,F.texCoords[1]=v,F.direction[0]=this._distanceAlongCorrection?c[0]:0,F.direction[1]=
this._distanceAlongCorrection?c[1]:0,D=a.vectors.items[1],m(D.vector,k(B[12],A),e(B[13],l,C)),D.texCoords[0]=0,D.texCoords[1]=v,D.direction[0]=this._distanceAlongCorrection?l[0]:0,D.direction[1]=this._distanceAlongCorrection?l[1]:0,v=a.vectors.items[2],v.vector[0]=0,v.vector[1]=0,v.texCoords[0]=0,v.texCoords[1]=0,v.direction[0]=0,v.direction[1]=0,v=a.vectors.items[3],m(v.vector,y,e(B[14],c,z)),v.texCoords[0]=0,v.texCoords[1]=E,v.direction[0]=this._distanceAlongCorrection?c[0]:0,v.direction[1]=this._distanceAlongCorrection?
c[1]:0,c=a.vectors.items[4],m(c.vector,A,e(B[15],k(B[16],l),z)),c.texCoords[0]=0,c.texCoords[1]=E,c.direction[0]=this._distanceAlongCorrection?l[0]:0,c.direction[1]=this._distanceAlongCorrection?l[1]:0,a.vectors.count=5,l=a.lists[p.ENTRY],l.items[0]=0,l.items[1]=2,l.items[2]=3,l.count=3,l=a.lists[p.EXIT],l.items[0]=1,l.items[1]=2,l.items[2]=4,l.count=3,G<x?(x=a.lists[p.CAP],x.count=0,a.capCenter=void 0):(x=a.lists[p.CAP],x.items[0]=3,x.items[1]=4,x.count=2,a.capCenter=2)):!S&&F?(F=a.vectors.items[0],
m(F.vector,k(B[9],y),e(B[10],k(B[11],c),C)),F.texCoords[0]=0,F.texCoords[1]=v,F.direction[0]=this._distanceAlongCorrection?c[0]:0,F.direction[1]=this._distanceAlongCorrection?c[1]:0,D=a.vectors.items[1],m(D.vector,k(B[12],A),e(B[13],l,C)),D.texCoords[0]=0,D.texCoords[1]=v,D.direction[0]=this._distanceAlongCorrection?l[0]:0,D.direction[1]=this._distanceAlongCorrection?l[1]:0,v=a.vectors.items[2],v.vector[0]=0,v.vector[1]=0,v.texCoords[0]=0,v.texCoords[1]=0,v.direction[0]=0,v.direction[1]=0,v=a.vectors.items[3],
e(v.vector,u,1/H),v.texCoords[0]=0,v.texCoords[1]=E,v.direction[0]=0,v.direction[1]=0,a.vectors.count=4,l=a.lists[p.ENTRY],l.items[0]=0,l.items[1]=2,l.items[2]=3,l.count=3,l=a.lists[p.EXIT],l.items[0]=1,l.items[1]=2,l.items[2]=3,l.count=3,a.lists[p.CAP].count=0,a.capCenter=void 0):S&&!F?(F=a.vectors.items[0],e(F.vector,D,1/H),F.texCoords[0]=0,F.texCoords[1]=v,F.direction[0]=0,F.direction[1]=0,D=a.vectors.items[1],D.vector[0]=0,D.vector[1]=0,D.texCoords[0]=0,D.texCoords[1]=0,D.direction[0]=0,D.direction[1]=
0,v=a.vectors.items[2],m(v.vector,y,e(B[9],c,z)),v.texCoords[0]=0,v.texCoords[1]=E,v.direction[0]=this._distanceAlongCorrection?c[0]:0,v.direction[1]=this._distanceAlongCorrection?c[1]:0,v=a.vectors.items[3],m(v.vector,A,e(B[10],k(B[11],l),z)),v.texCoords[0]=0,v.texCoords[1]=E,v.direction[0]=this._distanceAlongCorrection?l[0]:0,v.direction[1]=this._distanceAlongCorrection?l[1]:0,a.vectors.count=4,l=a.lists[p.ENTRY],l.items[0]=0,l.items[1]=1,l.items[2]=2,l.count=3,l=a.lists[p.EXIT],l.items[0]=0,l.items[1]=
1,l.items[2]=3,l.count=3,G<x?(x=a.lists[p.CAP],x.count=0,a.capCenter=void 0):(x=a.lists[p.CAP],x.items[0]=2,x.items[1]=3,x.count=2,a.capCenter=1)):S||F||(F=a.vectors.items[0],e(F.vector,D,1/H),F.texCoords[0]=0,F.texCoords[1]=v,F.direction[0]=0,F.direction[1]=0,D=a.vectors.items[1],e(D.vector,u,1/H),D.texCoords[0]=0,D.texCoords[1]=E,D.direction[0]=0,D.direction[1]=0,a.vectors.count=2,l=a.lists[p.ENTRY],l.items[0]=0,l.items[1]=1,l.count=2,l=a.lists[p.EXIT],l.items[0]=0,l.items[1]=1,l.count=2,a.lists[p.CAP].count=
0,a.capCenter=void 0);0>t&&(q(a.lists[p.ENTRY]),q(a.lists[p.EXIT]))};a.prototype.roundJoin=function(a,c,l,t){var v=b(c,l),E=0<v?[-1,1]:[1,-1],G=E[0],E=E[1],y=0<v?k(B[0],d(B[1],c)):d(B[2],c),u=0<v?k(B[3],d(B[4],l)):d(B[5],l),F=B[6];F[0]=y[0]+u[0];F[1]=y[1]+u[1];var D=n(B[7],F),F=k(B[8],D),z=h(D,y),D=b(D,y),D=Math.abs(D/z),C=1+D*D<J?[D,this._distanceAlongCorrection]:[Math.sqrt(J-1),!0],D=C[0];C[1]?(C=a.vectors.items[0],C.vector[0]=y[0],C.vector[1]=y[1],C.texCoords[0]=0,C.texCoords[1]=E,C.direction[0]=
0,C.direction[1]=0,C=a.vectors.items[1],C.vector[0]=u[0],C.vector[1]=u[1],C.texCoords[0]=0,C.texCoords[1]=E,C.direction[0]=0,C.direction[1]=0,C=a.vectors.items[2],m(C.vector,k(B[9],y),e(B[10],k(B[11],c),D)),C.texCoords[0]=0,C.texCoords[1]=G,C.direction[0]=this._distanceAlongCorrection?c[0]:0,C.direction[1]=this._distanceAlongCorrection?c[1]:0,c=a.vectors.items[3],m(c.vector,k(B[12],u),e(B[13],l,D)),c.texCoords[0]=0,c.texCoords[1]=G,c.direction[0]=this._distanceAlongCorrection?l[0]:0,c.direction[1]=
this._distanceAlongCorrection?l[1]:0,l=a.vectors.items[4],l.vector[0]=0,l.vector[1]=0,l.texCoords[0]=0,l.texCoords[1]=0,l.direction[0]=0,l.direction[1]=0,a.vectors.count=5,l=a.lists[p.ENTRY],l.items[0]=2,l.items[1]=4,l.items[2]=0,l.count=3,l=a.lists[p.EXIT],l.items[0]=3,l.items[1]=4,l.items[2]=1,l.count=3,a.capCenter=4):(C=a.vectors.items[0],C.vector[0]=y[0],C.vector[1]=y[1],C.texCoords[0]=0,C.texCoords[1]=E,C.direction[0]=0,C.direction[1]=0,C=a.vectors.items[1],C.vector[0]=u[0],C.vector[1]=u[1],
C.texCoords[0]=0,C.texCoords[1]=E,C.direction[0]=0,C.direction[1]=0,C=a.vectors.items[2],e(C.vector,F,1/z),C.texCoords[0]=0,C.texCoords[1]=G,C.direction[0]=0,C.direction[1]=0,c=a.vectors.items[3],c.vector[0]=0,c.vector[1]=0,c.texCoords[0]=0,c.texCoords[1]=0,c.direction[0]=0,c.direction[1]=0,a.vectors.count=4,l=a.lists[p.ENTRY],l.items[0]=2,l.items[1]=3,l.items[2]=0,l.count=3,l=a.lists[p.EXIT],l.items[0]=2,l.items[1]=3,l.items[2]=1,l.count=3,a.capCenter=3);x(A,y,u,t,0>v);t=a.vectors.count;y=a.lists[p.CAP];
for(u=y.items[0]=0;u<A.count;++u)l=A.items[u],G=a.vectors.items[t+u],G.vector[0]=l[0],G.vector[1]=l[1],G.texCoords[0]=0,G.texCoords[1]=E,G.direction[0]=0,G.direction[1]=0,y.items[u+1]=t+u;y.items[A.count+1]=1;y.count=A.count+2;a.vectors.count=t+A.count;0>v&&(q(a.lists[p.ENTRY]),q(a.lists[p.EXIT]))};a.prototype.unitRoundJoin=function(a,e,c,m){var h=b(e,c),l=0<h?[-1,1]:[1,-1],n=l[0],l=l[1];e=0<h?k(B[0],d(B[1],e)):d(B[2],e);c=0<h?k(B[3],d(B[4],c)):d(B[5],c);var t=a.vectors.items[0];t.vector[0]=e[0];
t.vector[1]=e[1];t.texCoords[0]=0;t.texCoords[1]=l;t.direction[0]=0;t.direction[1]=0;t=a.vectors.items[1];t.vector[0]=c[0];t.vector[1]=c[1];t.texCoords[0]=0;t.texCoords[1]=l;t.direction[0]=0;t.direction[1]=0;t=a.vectors.items[2];k(t.vector,e);t.texCoords[0]=0;t.texCoords[1]=n;t.direction[0]=0;t.direction[1]=0;t=a.vectors.items[3];k(t.vector,c);t.texCoords[0]=0;t.texCoords[1]=n;t.direction[0]=0;t.direction[1]=0;n=a.vectors.items[4];n.vector[0]=0;n.vector[1]=0;n.texCoords[0]=0;n.texCoords[1]=0;n.direction[0]=
0;n.direction[1]=0;a.vectors.count=5;n=a.lists[p.ENTRY];n.items[0]=2;n.items[1]=0;n.count=2;n=a.lists[p.EXIT];n.items[0]=3;n.items[1]=1;n.count=2;a.capCenter=4;x(A,e,c,m,0>h);m=a.vectors.count;e=a.lists[p.CAP];for(n=e.items[0]=0;n<A.count;++n)c=A.items[n],t=a.vectors.items[m+n],t.vector[0]=c[0],t.vector[1]=c[1],t.texCoords[0]=0,t.texCoords[1]=l,t.direction[0]=0,t.direction[1]=0,e.items[n+1]=m+n;e.items[A.count+1]=1;e.count=A.count+2;a.vectors.count=m+A.count;0>h&&(q(a.lists[p.ENTRY]),q(a.lists[p.EXIT]))};
a.prototype.rectJoin=function(a,b,e){b=d(B[0],b);e=d(B[1],e);var c=a.vectors.items[0];c.vector[0]=b[0];c.vector[1]=b[1];c.texCoords[0]=0;c.texCoords[1]=-1;c.direction[0]=0;c.direction[1]=0;c=a.vectors.items[1];c.vector[0]=e[0];c.vector[1]=e[1];c.texCoords[0]=0;c.texCoords[1]=-1;c.direction[0]=0;c.direction[1]=0;c=a.vectors.items[2];k(c.vector,b);c.texCoords[0]=0;c.texCoords[1]=1;c.direction[0]=0;c.direction[1]=0;b=a.vectors.items[3];k(b.vector,e);b.texCoords[0]=0;b.texCoords[1]=1;b.direction[0]=0;
b.direction[1]=0;a.vectors.count=4;b=a.lists[p.ENTRY];b.items[0]=0;b.items[1]=2;b.count=2;b=a.lists[p.EXIT];b.items[0]=1;b.items[1]=3;b.count=2;a.capCenter=void 0};return a}();a.Tessellator=w})},"esri/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./StyleDefinition ./StyleProperty ./Filter".split(" "),function(w,a,c,u,h,l,n){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,
d,e){this.type=a;this.id=d.id;this.source=d.source;this.sourceLayer=d["source-layer"];this.minzoom=d.minzoom;this.maxzoom=d.maxzoom;this.filter=d.filter;this.layout=d.layout;this.paint=d.paint;this.z=e;switch(a){case 0:this._layoutDefinition=h.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=h.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=h.StyleDefinition.fillLayoutDefinition;this._paintDefinition=h.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=
h.StyleDefinition.lineLayoutDefinition;this._paintDefinition=h.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=h.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=h.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=n.createFilter(this.filter)};a.prototype.getLayoutProperty=
function(a){var d=this._layoutProperties;if(d)return d[a]};a.prototype.getPaintProperty=function(a){var d=this._paintProperties;if(d)return d[a]};a.prototype.getLayoutValue=function(a,d,e){var b,c=this._layoutProperties;c&&(c=c[a])&&(b=c.getValue(d,e));a=this._layoutDefinition[a];void 0===b&&(b=a["default"]);"enum"===a.type&&(b=a.values.indexOf(b));return b};a.prototype.getPaintValue=function(a,d,e){var b,c=this._paintProperties;c&&(c=c[a])&&(b=c.getValue(d,e));a=this._paintDefinition[a];void 0===
b&&(b=a["default"]);"enum"===a.type&&(b=a.values.indexOf(b));return b};a.prototype._parseLayout=function(a){var d={},b;for(b in a){var c=this._layoutDefinition[b];c&&(d[b]=new l(b,c,a[b]))}return d};a.prototype._parsePaint=function(a){var d={},b;for(b in a){var c=this._paintDefinition[b];c&&(d[b]=new l(b,c,a[b]))}return d};return a}();a.StyleLayer=w;u=function(a){function d(d,b,c){return a.call(this,d,b,c)||this}c(d,a);return d}(w);a.BackgroundStyleLayer=u;u=function(a){function d(d,b,c){d=a.call(this,
d,b,c)||this;d.hasDataDrivenFill=!1;(b=d.getPaintProperty("fill-color"))&&b.isDataDriven&&(d.hasDataDrivenFill=!0);(c=d.getPaintProperty("fill-opacity"))&&c.isDataDriven&&(d.hasDataDrivenFill=!0);d.hasDataDrivenOutline=!1;(c=d.getPaintProperty("fill-outline-color"))&&c.isDataDriven&&(d.hasDataDrivenOutline=!0);!c&&b&&b.isDataDriven&&(d.hasDataDrivenOutline=!0);return d}c(d,a);return d}(w);a.FillStyleLayer=u;u=function(a){function d(d,b,c){d=a.call(this,d,b,c)||this;d.hasDataDrivenLine=!1;(b=d.getPaintProperty("line-color"))&&
b.isDataDriven&&(d.hasDataDrivenLine=!0);(b=d.getPaintProperty("line-opacity"))&&b.isDataDriven&&(d.hasDataDrivenLine=!0);(b=d.getPaintProperty("line-width"))&&b.isDataDriven&&(d.hasDataDrivenLine=!0);return d}c(d,a);return d}(w);a.LineStyleLayer=u;w=function(a){function d(d,b,c){d=a.call(this,d,b,c)||this;d.hasDataDrivenIcon=!1;(b=d.getPaintProperty("icon-color"))&&b.isDataDriven&&(d.hasDataDrivenIcon=!0);(b=d.getPaintProperty("icon-opacity"))&&b.isDataDriven&&(d.hasDataDrivenIcon=!0);(b=d.getLayoutProperty("icon-size"))&&
b.isDataDriven&&(d.hasDataDrivenIcon=!0);d.hasDataDrivenText=!1;(b=d.getPaintProperty("text-color"))&&b.isDataDriven&&(d.hasDataDrivenText=!0);(b=d.getPaintProperty("text-opacity"))&&b.isDataDriven&&(d.hasDataDrivenText=!0);(b=d.getLayoutProperty("text-size"))&&b.isDataDriven&&(d.hasDataDrivenText=!0);return d}c(d,a);return d}(w);a.SymbolStyleLayer=w;w=function(){return function(a,b,c){this.cap=a.getLayoutValue("line-cap",b,c);this.join=a.getLayoutValue("line-join",b,c);this.miterLimit=a.getLayoutValue("line-miter-limit",
b,c);this.roundLimit=a.getLayoutValue("line-round-limit",b,c)}}();a.LineLayout=w;w=function(){return function(a,b,c,e){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b,e);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b,e);this.optional=a.getLayoutValue("icon-optional",b,e);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b,e);this.size=a.getLayoutValue("icon-size",b,e);this.rotate=a.getLayoutValue("icon-rotate",b,e);this.padding=a.getLayoutValue("icon-padding",
b,e);this.keepUpright=a.getLayoutValue("icon-keep-upright",b,e);this.offset=a.getLayoutValue("icon-offset",b,e);2===this.rotationAlignment&&(this.rotationAlignment=c?0:1)}}();a.IconLayout=w;w=function(){return function(a,b,c,e){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b,e);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b,e);this.optional=a.getLayoutValue("text-optional",b,e);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b,e);this.fontArray=a.getLayoutValue("text-font",
b,e);this.maxWidth=a.getLayoutValue("text-max-width",b,e);this.lineHeight=a.getLayoutValue("text-line-height",b,e);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b,e);this.justify=a.getLayoutValue("text-justify",b,e);this.anchor=a.getLayoutValue("text-anchor",b,e);this.maxAngle=a.getLayoutValue("text-max-angle",b,e);this.size=a.getLayoutValue("text-size",b,e);this.rotate=a.getLayoutValue("text-rotate",b,e);this.padding=a.getLayoutValue("text-padding",b,e);this.keepUpright=a.getLayoutValue("text-keep-upright",
b,e);this.transform=a.getLayoutValue("text-transform",b,e);this.offset=a.getLayoutValue("text-offset",b,e);2===this.rotationAlignment&&(this.rotationAlignment=c?0:1)}}();a.TextLayout=w})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(w,a){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",
values:["visible","none"],"default":"visible"}};a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",
values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},
"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!1},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number",
"default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",
values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-opacity":{type:"number",
minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},
"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,
maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color",
"default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",
minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};a.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",
value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};return a}();a.StyleDefinition=w})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(w,a,c,u){return function(){function a(c,h,d){this.isDataDriven=!1;switch(h.type){case "number":c=!0;break;case "color":c=!0;d=a._parseColor(d);break;case "array":c="number"===h.value;break;default:c=!1}var b=d.stops&&
0<d.stops.length;if(this.isDataDriven=!!d.property)if(b)switch(d.type){case "identity":this.getValue=this._buildIdentity(d,h);break;case "categorical":this.getValue=this._buildCategorical(d,h);break;default:c&&"interval"===d.type&&(c=!1),this.getValue=c?this._buildInterpolate(d,h):this._buildInterval(d,h)}else this.getValue=this._buildIdentity(d,h);else this.getValue=b?c?this._buildZoomInterpolate(d):this._buildZoomInterval(d):this._buildSimple(d)}a.prototype._buildSimple=function(a){return function(){return a}};
a.prototype._buildIdentity=function(c,h){return function(d,b){var k;b&&(k=b.values[c.property],"color"===h.type&&(k=a._parseColor(k)));return void 0!==k?k:void 0!==c.default?c.default:h.default}};a.prototype._buildCategorical=function(a,c){var d=this;return function(b,k){var e;k&&(e=k.values[a.property]);e=d._categorical(e,a.stops);return void 0!==e?e:void 0!==a.default?a.default:c.default}};a.prototype._buildInterval=function(a,c){var d=this;return function(b,k){var e;k&&(e=k.values[a.property]);
return"number"===typeof e?d._interval(e,a.stops):void 0!==a.default?a.default:c.default}};a.prototype._buildInterpolate=function(a,c){var d=this;return function(b,k){var e;k&&(e=k.values[a.property]);return"number"===typeof e?d._interpolate(e,a.stops,a.base||1):void 0!==a.default?a.default:c.default}};a.prototype._buildZoomInterpolate=function(a){var c=this;return function(d){return c._interpolate(d,a.stops,a.base||1)}};a.prototype._buildZoomInterval=function(a){var c=this;return function(d){return c._interval(d,
a.stops)}};a.prototype._categorical=function(a,c){for(var d=c.length,b=0;b<d;b++)if(c[b][0]===a)return c[b][1]};a.prototype._interval=function(a,c){for(var d=c.length,b=0,k=0;k<d;k++)if(c[k][0]<=a)b=k;else break;return c[b][1]};a.prototype._interpolate=function(a,c,d){for(var b,k,e=c.length,m=0;m<e;m++){var h=c[m];if(h[0]<=a)b=h;else{k=h;break}}if(b&&k){m=k[0]-b[0];a-=b[0];d=1===d?a/m:(Math.pow(d,a)-1)/(Math.pow(d,m)-1);if(Array.isArray(b[1])){b=b[1];k=k[1];a=[];for(m=0;m<b.length;m++)a.push(u.interpolate(b[m],
k[m],d));return a}return u.interpolate(b[1],k[1],d)}if(b)return b[1];if(k)return k[1]};a._isEmpty=function(a){for(var c in a)if(a.hasOwnProperty(c))return!1;return!0};a._parseColor=function(h){if(Array.isArray(h))return h;if("string"===typeof h){if(h=new c(h),!this._isEmpty(h))return c.toUnitRGBA(h)}else return h&&h.default&&(h.default=a._parseColor(h.default)),h&&h.stops&&(h.stops=h.stops.map(function(c){return[c[0],a._parseColor(c[1])]})),h};return a}()})},"esri/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(w,a){return function(){function a(c,h,l){this._op=c;"$type"===h?(this._val=l instanceof Array?l.map(function(c){return a._types.indexOf(c)}):a._types.indexOf(l),this._op+=11):(this._key=h,this._val=l)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=
this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var c=0,l=this._val;c<l.length;c++){var n=l[c];if(n.filter(a))return!0}return!1;case 10:c=0;for(l=this._val;c<l.length;c++)if(n=l[c],!n.filter(a))return!1;return!0;case 11:c=0;for(l=this._val;c<l.length;c++)if(n=l[c],n.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<
this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(c){if(!c)return new a(0,void 0,!0);var h=c[0];if(1>=c.length)return new a(0,void 0,"any"!==h);switch(h){case "\x3d\x3d":return new a(1,c[1],c[2]);case "!\x3d":return new a(2,c[1],c[2]);case "\x3e":return new a(4,c[1],c[2]);case "\x3c":return new a(3,c[1],c[2]);case "\x3e\x3d":return new a(6,
c[1],c[2]);case "\x3c\x3d":return new a(5,c[1],c[2]);case "in":return new a(7,c[1],c.slice(2));case "!in":return new a(8,c[1],c.slice(2));case "any":return new a(9,void 0,c.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,c.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,c.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+h);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ../2d/engine/webgl/Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),
function(w,a,c,u,h,l,n,d,b,k,e){function m(a,d){if(a.iconMosaicItem&&d.iconMosaicItem){if(a.iconMosaicItem.page!==d.iconMosaicItem.page)return a.iconMosaicItem.page<d.iconMosaicItem.page?-1:1}else{if(a.iconMosaicItem&&!d.iconMosaicItem)return 1;if(!a.iconMosaicItem&&d.iconMosaicItem)return-1}return 0}(function(){return function(){}})();return function(a){function h(d,b,c,e,k,m,h,l){b=a.call(this,d,b)||this;b._markerMap=new Map;b._glyphMap=new Map;b._glyphBufferDataStorage=new Map;b._sdfMarkers=!1;
if(d.hasDataDrivenIcon!==c.isDataDriven())throw Error("incompatible icon buffer");if(d.hasDataDrivenText!==k.isDataDriven())throw Error("incompatible text buffer");b._iconVertexBuffer=c;b._iconIndexBuffer=e;b._textVertexBuffer=k;b._textIndexBuffer=m;b._placementEngine=h;b._workerTileHandler=l;return b}c(h,a);Object.defineProperty(h.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"sdfMarker",{get:function(){return this._sdfMarkers},enumerable:!0,configurable:!0});h.prototype.copy=function(a,d,b,c,e){a=new h(this.layer,this.zoom,a,d,b,c,e,this._workerTileHandler);a.layerIndex=this.layerIndex;a.layerExtent=this.layerExtent;a._iconIndexStart=d.index;a._textIndexStart=c.index;a._iconIndexCount=0;a._textIndexCount=0;a._symbolInstances=this._symbolInstances;a._workerTileHandler=this._workerTileHandler;a._fontArray=
this._fontArray;a._textLayout=this._textLayout;a._iconLayout=this._iconLayout;a._isLinePlacement=this._isLinePlacement;a._avoidEdges=this._avoidEdges;return a};h.prototype.getResources=function(a,d,b){var c=this.layer,e=this.zoom,k=c.hasDataDrivenIcon,m=c.hasDataDrivenText;a&&a.setExtent(this.layerExtent);for(var q=c.getLayoutProperty("icon-image"),l=c.getLayoutProperty("text-field"),n=c.getLayoutValue("text-font",e),p=c.getLayoutValue("text-transform",e),t=[],x=0,G=this._features;x<G.length;x++){var u=
G[x],w=u.getGeometry(a);if(w&&0!==w.length){var R=void 0;q&&(R=c.getLayoutValue("icon-image",e,u),q.isDataDriven||(R=this._replaceKeys(R,u.values)),R&&d.add(R));var z=void 0,y=!1;if(l&&(z=c.getLayoutValue("text-field",e,u),l.isDataDriven||(z=this._replaceKeys(z,u.values)),z)){switch(p){case 2:z=z.toLowerCase();break;case 1:z=z.toUpperCase()}h._bidiEngine.hasBidiChar(z)&&(y=void 0,y="rtl"===h._bidiEngine.checkContextual(z)?"IDNNN":"ICNNN",z=h._bidiEngine.bidiTransform(z,y,"VLYSN"),y=!0);var D=z.length;
if(0<D)for(var H=0,Q=n;H<Q.length;H++){var K=Q[H],L=b[K];L||(L=b[K]=new Set);for(K=0;K<D;K++){var X=z.charCodeAt(K);L.add(X)}}}if(R||z)D=c.getLayoutValue("icon-size",e,u),H=c.getLayoutValue("text-size",e,u),u={sprite:R,label:z,rtl:y,geometry:w,iconSize:D,iconRotate:c.getLayoutValue("icon-rotate",e,u),ddIconValues:k?{color:c.getPaintValue("icon-color",e,u),opacity:c.getPaintValue("icon-opacity",e,u),size:D}:null,textSize:H,textRotate:c.getLayoutValue("text-rotate",e,u),ddTextValues:m?{color:c.getPaintValue("text-color",
e,u),opacity:c.getPaintValue("text-opacity",e,u),size:H}:null},t.push(u)}}this._symbolFeatures=t};h.prototype.processFeatures=function(a,c){a&&a.setExtent(this.layerExtent);var e=this.layer,l=this.zoom;c=this._isLinePlacement=1===e.getLayoutValue("symbol-placement",l);a=this._avoidEdges=e.getLayoutValue("symbol-avoid-edges",l)&&!c;var q=8*e.getLayoutValue("symbol-spacing",l),p=e.getLayoutProperty("icon-image"),t=e.getLayoutProperty("text-field"),x=this._workerTileHandler,v,C;p&&(this._iconLayout=
new n.IconLayout(e,l,c),v=x.getSpriteItems(),C=this._getTranslate(!0));var u,w,O;if(t){u=this._textLayout=new n.TextLayout(e,l,c);this._fontArray=u.fontArray;O=.5;switch(u.anchor){case 5:case 1:case 7:O=0;break;case 6:case 2:case 8:O=1}w=.5;switch(u.anchor){case 5:case 3:case 6:w=0;break;case 7:case 4:case 8:w=1}e=.5;switch(u.justify){case 0:e=0;break;case 2:e=1}var l=24*u.letterSpacing,p=c?0:24*u.maxWidth,t=24*u.lineHeight,U=[24*u.offset[0],24*u.offset[1]];u=this._fontArray.map(function(a){return x.getGlyphItems(a)});
w=new k(u,p,t,l,U,O,w,e);O=this._getTranslate(!1)}this._iconIndexStart=this._iconIndexBuffer.index;this._textIndexStart=this._textIndexBuffer.index;this._textIndexCount=this._iconIndexCount=0;this._markerMap.clear();this._glyphMap.clear();this._symbolInstances=e=[];l=this._textLayout;p=1;l&&l.size&&(p=l.size/24);t=l?l.maxAngle*b.C_DEG_TO_RAD:0;u=l?8*l.size:0;for(var U=0,T=this._symbolFeatures;U<T.length;U++){var I=T[U],R=void 0;I.sprite&&(R=v[I.sprite])&&R.sdf&&(this._sdfMarkers=!0);var z=void 0,
y=I.label,D=0;if(y&&(z=w.getShaping(y,I.rtl))&&0<z.length){for(var D=1E30,y=-1E30,H=0,Q=z;H<Q.length;H++)var K=Q[H],D=Math.min(D,K.x),y=Math.max(y,K.x);D=(y-D+48)*p*8}y=0;for(H=I.geometry;y<H.length;y++){var Q=H[y],L=void 0;c?(z&&0<z.length&&l&&l.size&&h._smoothVertices(Q,8*l.size*(2+Math.min(2,4*Math.abs(l.offset[1])))),L=h._findAnchors(Q,q,D)):L=[new d.Anchor(Q[0].x,Q[0].y)];for(K=0;K<L.length;K++){var X=L[K];0>X.x||4096<X.x||0>X.y||4096<X.y||c&&0<D&&0===l.rotationAlignment&&!h._honorsTextMaxAngle(Q,
X,D,t,u)||e.push({shaping:z,line:Q,iconMosaicItem:R,anchor:X,iconSize:I.iconSize,iconRotate:I.iconRotate,ddIconValues:I.ddIconValues,textSize:I.textSize,textRotate:I.textRotate,ddTextValues:I.ddTextValues})}}}e.sort(m);for(v=0;v<e.length;v++)this._processFeature(e[v],C,O,a);this._addPlacedGlyphs()};h.prototype.updateSymbols=function(){this._iconIndexStart=this._iconIndexBuffer.index;this._textIndexStart=this._textIndexBuffer.index;this._textIndexCount=this._iconIndexCount=0;this._markerMap.clear();
this._glyphMap.clear();var a=this._avoidEdges,d=this.layer,b;d.getLayoutProperty("icon-image")&&(b=this._getTranslate(!0));var c;d.getLayoutProperty("text-field")&&(c=this._getTranslate(!1));for(var d=0,e=this._symbolInstances;d<e.length;d++)this._processFeature(e[d],b,c,a);this._addPlacedGlyphs()};h.prototype._getTranslate=function(a){var d=this.layer.getPaintValue(a?"icon-translate":"text-translate",this.zoom);if(0!==d[0]||0!==d[1]){var b=this._placementEngine.mapAngle;return 0!==b&&0===this.layer.getPaintValue(a?
"icon-translate-anchor":"text-translate-anchor",this.zoom)?(a=Math.sin(b),b=Math.cos(b),[8*(d[0]*b-d[1]*a),8*(d[0]*a+d[1]*b)]):[8*d[0],8*d[1]]}};h.prototype._replaceKeys=function(a,d){return a.replace(/{([^{}]+)}/g,function(a,b){return b in d?d[b]:""})};h.prototype._processFeature=function(a,d,c,e){var k=a.line,m=a.iconMosaicItem,h=a.shaping,n=a.anchor,q=this._iconLayout,t=q&&!!m,p=!0,x=1;t&&(q.size=a.iconSize,q.rotate=a.iconRotate,x=8*q.size,p=q.optional||!m);var u=this._textLayout,G=u&&h&&0<h.length,
J;J=1;var w=!0;G&&(u.size=a.textSize,u.rotate=a.textRotate,J=u.size/24,J*=8,w=u.optional||!h||0===h.length);var R=new l.Point(0,-17),z;if(t){z=this._placementEngine.getIconPlacement(n,d,m,x,k,q,e);if(z.footprint.minzoom===b.C_INFINITY&&!p)return;n.minzoom>z.footprint.minzoom&&(z.footprint.minzoom=n.minzoom)}var y;if(G&&(y=this._placementEngine.getTextPlacement(n,c,R,h,J,k,u,e))){if(y.footprint.minzoom===b.C_INFINITY&&!w)return;n.minzoom>y.footprint.minzoom&&(y.footprint.minzoom=n.minzoom)}if(!w&&
!p||!p&&y&&y.footprint.minzoom!==b.C_INFINITY||!w&&z&&z.footprint.minzoom!==b.C_INFINITY)d=Math.max(z.footprint.minzoom,y.footprint.minzoom),z.footprint.minzoom=d,y.footprint.minzoom=d;y&&y.footprint.minzoom!==b.C_INFINITY&&(u.ignorePlacement||this._placementEngine.add(y),this._storePlacedGlyphs(y.shapes,y.footprint.minzoom,this.zoom,a.ddTextValues));z&&z.footprint.minzoom!==b.C_INFINITY&&(q.ignorePlacement||this._placementEngine.add(z),this._addPlacedIcons(z.shapes,z.footprint.minzoom,this.zoom,
m.page,a.ddIconValues))};h.prototype._addPlacedIcons=function(a,d,c,e,k){d=Math.max(c+b.log2(d),0);for(var m=this._iconVertexBuffer,h=this._iconIndexBuffer,l=0;l<a.length;l++){var n=a[l],q=Math.max(c+b.log2(n.minzoom),d),t=Math.min(c+b.log2(n.maxzoom),25);if(!(t<=q)){var p=n.tl,x=n.tr,u=n.bl,G=n.br,F=n.mosaicRect,J=n.labelAngle,n=n.anchor,z=m.index,y=F.x,D=F.y,w=y+F.width,F=D+F.height;m.add(n.x,n.y,p.x,p.y,y,D,J,q,t,d,k);m.add(n.x,n.y,x.x,x.y,w,D,J,q,t,d,k);m.add(n.x,n.y,u.x,u.y,y,F,J,q,t,d,k);m.add(n.x,
n.y,G.x,G.y,w,F,J,q,t,d,k);h.add(z+0,z+1,z+2);h.add(z+1,z+2,z+3);this._markerMap.has(e)?this._markerMap.get(e)[1]+=6:this._markerMap.set(e,[this._iconIndexStart+this._iconIndexCount,6]);this._iconIndexCount+=2}}};h.prototype._addPlacedGlyphs=function(){var a=this,d=this._textVertexBuffer,b=this._textIndexBuffer;this._glyphBufferDataStorage.forEach(function(c,e){for(var k=0;k<c.length;k++){var m=c[k],h=d.index;d.add(m.glyphAnchor[0],m.glyphAnchor[1],m.tl[0],m.tl[1],m.xmin,m.ymin,m.labelAngle,m.minLod,
m.maxLod,m.placementLod,m.ddValues);d.add(m.glyphAnchor[0],m.glyphAnchor[1],m.tr[0],m.tr[1],m.xmax,m.ymin,m.labelAngle,m.minLod,m.maxLod,m.placementLod,m.ddValues);d.add(m.glyphAnchor[0],m.glyphAnchor[1],m.bl[0],m.bl[1],m.xmin,m.ymax,m.labelAngle,m.minLod,m.maxLod,m.placementLod,m.ddValues);d.add(m.glyphAnchor[0],m.glyphAnchor[1],m.br[0],m.br[1],m.xmax,m.ymax,m.labelAngle,m.minLod,m.maxLod,m.placementLod,m.ddValues);b.add(h+0,h+1,h+2);b.add(h+1,h+2,h+3);a._glyphMap.has(e)?a._glyphMap.get(e)[1]+=6:
a._glyphMap.set(e,[a._textIndexStart+a._textIndexCount,6]);a._textIndexCount+=2}});this._glyphBufferDataStorage.clear()};h.prototype._storePlacedGlyphs=function(a,d,c,e){d=Math.max(c+b.log2(d),0);for(var k=0;k<a.length;k++){var m=a[k],h=Math.max(c+b.log2(m.minzoom),d),l=Math.min(c+b.log2(m.maxzoom),25);if(!(l<=h)){var n=m.tl,q=m.tr,t=m.bl,p=m.br,x=m.labelAngle,u=m.anchor,G=m.mosaicRect;this._glyphBufferDataStorage.has(m.page)||this._glyphBufferDataStorage.set(m.page,[]);this._glyphBufferDataStorage.get(m.page).push({glyphAnchor:[u.x,
u.y],tl:[n.x,n.y],tr:[q.x,q.y],bl:[t.x,t.y],br:[p.x,p.y],xmin:G.x,ymin:G.y,xmax:G.x+G.width,ymax:G.y+G.height,labelAngle:x,minLod:h,maxLod:l,placementLod:d,ddValues:e})}}};h._findAnchors=function(a,c,e){c+=e;for(var k=0,m=a.length-1,h=0;h<m;h++)k+=l.Point.distance(a[h],a[h+1]);h=.5*(e||c);if(k<=h)return[];e=h/k;c=k/Math.max(Math.round(k/c),1);for(var k=0,m=-c/2,n=[],q=a.length-1,h=0;h<q;h++){for(var t=a[h],p=a[h+1],x=p.x-t.x,u=p.y-t.y,G=Math.sqrt(x*x+u*u),w=void 0;m+c<k+G;){var m=m+c,T=(m-k)/G,I=
b.interpolate(t.x,p.x,T),T=b.interpolate(t.y,p.y,T);void 0===w&&(w=Math.atan2(u,x));n.push(new d.Anchor(I,T,w,h,e))}k+=G}return n};h.deviation=function(a,d,b){return Math.atan2((d.x-a.x)*(b.y-d.y)-(d.y-a.y)*(b.x-d.x),(d.x-a.x)*(b.x-d.x)+(d.y-a.y)*(b.y-d.y))};h._honorsTextMaxAngle=function(a,d,b,c,e){var k=0;b/=2;for(var m=new l.Point(d.x,d.y),h=d.segment+1;k>-b;){--h;if(0>h)return!1;k-=l.Point.distance(a[h],m);m=a[h]}k+=l.Point.distance(a[h],a[h+1]);d=[];for(var m=0,n=a.length;k<b;){var t=a[h],q=
void 0;do{++h;if(h===n)return!1;q=a[h]}while(q.isEqual(t));var x=h,p=void 0;do{++x;if(x===n)return!1;p=a[x]}while(p.isEqual(q));t=this.deviation(t,q,p);d.push({deviation:t,distToAnchor:k});for(m+=t;k-d[0].distToAnchor>e;)m-=d.shift().deviation;if(Math.abs(m)>c)return!1;k+=l.Point.distance(q,p)}return!0};h._smoothVertices=function(a,d){if(!(0>=d)){var b=a.length;if(!(3>b)){var c=[],e=0;c.push(0);for(var k=1;k<b;k++)e+=l.Point.distance(a[k],a[k-1]),c.push(e);d=Math.min(d,.2*e);e=[];e.push(a[0].x);e.push(a[0].y);
var m=a[b-1].x,h=a[b-1].y,k=l.Point.sub(a[0],a[1]);k.normalize();a[0].x+=d*k.x;a[0].y+=d*k.y;k.assignSub(a[b-1],a[b-2]);k.normalize();a[b-1].x+=d*k.x;a[b-1].y+=d*k.y;for(k=1;k<b;k++)c[k]+=d;c[b-1]+=d;for(var n=.5*d,k=1;k<b-1;k++){for(var t=0,q=0,x=0,p=k-1;0<=p&&!(c[p+1]<c[k]-n);p--){var u=n+c[p+1]-c[k],w=c[p+1]-c[p],I=c[k]-c[p]<n?1:u/w;if(1E-6>Math.abs(I))break;var R=I*I,z=I*u-.5*R*w,y=I*w/d,D=a[p+1],H=a[p].x-D.x,Q=a[p].y-D.y,t=t+y/z*(D.x*I*u+.5*R*(u*H-w*D.x)-R*I*w*H/3),q=q+y/z*(D.y*I*u+.5*R*(u*Q-
w*D.y)-R*I*w*Q/3),x=x+y}for(p=k+1;p<b&&!(c[p-1]>c[k]+n);p++){u=n-c[p-1]+c[k];w=c[p]-c[p-1];I=c[p]-c[k]<n?1:u/w;if(1E-6>Math.abs(I))break;R=I*I;z=I*u-.5*R*w;y=I*w/d;D=a[p-1];H=a[p].x-D.x;Q=a[p].y-D.y;t+=y/z*(D.x*I*u+.5*R*(u*H-w*D.x)-R*I*w*H/3);q+=y/z*(D.y*I*u+.5*R*(u*Q-w*D.y)-R*I*w*Q/3);x+=y}e.push(t/x);e.push(q/x)}e.push(m);e.push(h);for(p=k=0;k<b;k++)a[k].x=e[p++],a[k].y=e[p++]}}};h._bidiEngine=new e;return h}(h)})},"esri/views/vectorTiles/Placement":function(){define(["require","exports","../2d/engine/webgl/Geometry",
"./GeometryUtils","./Conflict"],function(w,a,c,u,h){Object.defineProperty(a,"__esModule",{value:!0});w=function(){return function(a,d,c,h,n){void 0===c&&(c=0);void 0===h&&(h=-1);void 0===n&&(n=b);this.x=a;this.y=d;this.angle=c;this.segment=h;this.minzoom=n}}();a.Anchor=w;w=function(){return function(a,d,b,c){this.glyph=a;this.x=d;this.y=b;this.glyphItem=c}}();a.ShapedGlyph=w;var l=function(){return function(a,d,c,h,n,l,p){void 0===n&&(n=!1);void 0===l&&(l=b);void 0===p&&(p=u.C_INFINITY);this.anchor=
a;this.labelAngle=d;this.glyphAngle=c;this.page=h;this.upsideDown=n;this.minzoom=l;this.maxzoom=p}}(),n=function(){return function(a,d,b,c,h,n,l,u,w,F){this.tl=a;this.tr=d;this.bl=b;this.br=c;this.mosaicRect=h;this.labelAngle=n;this.anchor=l;this.minzoom=u;this.maxzoom=w;this.page=F}}();a.PlacedSymbol=n;var d=function(){return function(a,d){this.footprint=a;this.shapes=d}}();a.Placement=d;var b=.5;w=function(){function a(){this.mapAngle=0;this._conflictEngine=new h.ConflictEngine}a.prototype.reset=
function(){this._conflictEngine.reset()};a.prototype.setAngle=function(a){this.mapAngle=a;this._conflictEngine.setAngle(a)};a.prototype.getIconPlacement=function(a,k,l,x,q,p,w){var e=l.width/(l.sdfRatio*l.pixelRatio),m=l.height/(l.sdfRatio*l.pixelRatio);q=p.offset[0]-e/2;var t=p.offset[1]-m/2,e=q+e,m=t+m,B=l.rect,A=(l.sdf?17:2)/l.sdfRatio,v=q-A,C=t-A,G=v+B.width/(l.pixelRatio*l.sdfRatio),P=C+B.height/(l.pixelRatio*l.sdfRatio);l=new c.Point(v,C);A=new c.Point(G,P);P=new c.Point(v,P);C=new c.Point(G,
C);G=p.rotate*u.C_DEG_TO_RAD;v=1===p.rotationAlignment;0<=a.segment&&!v&&(G+=a.angle);if(0!==G){var O=Math.cos(G),U=Math.sin(G);l.rotate(O,U);A.rotate(O,U);P.rotate(O,U);C.rotate(O,U)}O=8*p.padding;U=new c.Point(a.x,a.y);a=new h.Footprint(this.mapAngle,O,v);a.addBox(U,new h.Box(q,t,e,m),x,G,k,b,u.C_INFINITY);k=new n(l,C,P,A,B,0,U,b,u.C_INFINITY,0);k=new d(a,[k]);x=b;p.allowOverlap||(x=this._conflictEngine.getMinZoom(k.footprint,x,w,v));a.minzoom=x;return k};a.prototype.getTextPlacement=function(a,
k,t,x,q,p,w,J){for(var e=new c.Point(a.x,a.y),m=w.rotate*u.C_DEG_TO_RAD,B=0===w.rotationAlignment,A=w.keepUpright,v=b,C=!B,G=C?0:a.angle,P=0<=a.segment&&B,O=new h.Footprint(this.mapAngle,8*w.padding,C),U=[],T=!P,I=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,z=I,y=R,D=P?A:B&&A,H,Q=0;Q<x.length;Q++){var K=x[Q],L=K.glyphItem;if(L&&!L.rect.isEmpty){var X=L.rect,da=L.metrics,ca=L.page;T&&(H&&H!==K.y&&(O.addBox(e,new h.Box(I,z,R,y),q,m,k,b,u.C_INFINITY),I=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,
z=I,y=R),H=K.y);var fa=[];if(P){if(L=(t.x+K.x+da.left-4+.5*L.metrics.width)*q,v=this._placeGlyph(a,v,L,p,a.segment,1,ca,fa),A&&(v=this._placeGlyph(a,v,L,p,a.segment,-1,ca,fa)),2<=v)break}else fa.push(new l(e,G,G,ca)),B&&A&&fa.push(new l(e,G+u.C_PI,G+u.C_PI,ca,!0));for(var ca=K.x+t.x+da.left,K=K.y+t.y-da.top,L=ca+da.width,da=K+da.height,ga=new c.Point(ca-4,K-4),ea=new c.Point(ga.x+X.width,ga.y+X.height),ba=new c.Point(ga.x,ea.y),ha=new c.Point(ea.x,ga.y),W=0;W<fa.length;W++){var Y=fa[W],ka=ga.clone(),
la=ba.clone(),ma=ha.clone(),na=ea.clone(),ja=K,oa=da,Z=Y.glyphAngle+m;if(0!==Z){var M=Math.cos(Z),V=Math.sin(Z);ka.rotate(M,V);na.rotate(M,V);la.rotate(M,V);ma.rotate(M,V)}U.push(new n(ka,ma,la,na,X,Y.labelAngle,Y.anchor,Y.minzoom,Y.maxzoom,Y.page));if(!D||this._legible(Y.labelAngle))T?(ca<I&&(I=ca),ja<z&&(z=ja),L>R&&(R=L),oa>y&&(y=oa)):2>Y.minzoom&&O.addBox(Y.anchor,new h.Box(ca,ja,L,oa),q,Z,k,Y.minzoom,Y.maxzoom)}}}if(2<=v)return null;T&&O.addBox(e,new h.Box(I,z,R,y),q,m,k,b,u.C_INFINITY);a=new d(O,
U);w.allowOverlap||(v=this._conflictEngine.getMinZoom(a.footprint,v,J,C));O.minzoom=v;return a};a.prototype.add=function(a){this._conflictEngine.add(a.footprint)};a.prototype._legible=function(a){a=u.radToByte(a);return 65>a||193<=a};a.prototype._placeGlyph=function(a,d,b,k,h,n,w,J){var e=0>n?u.positiveMod(a.angle+u.C_PI,u.C_2PI):a.angle,m=this._legible(e),t=0;0>b&&(n*=-1,b*=-1,t=u.C_PI);0<n&&++h;a=new c.Point(a.x,a.y);var q=k[h],p=u.C_INFINITY;if(k.length<=h)return p;for(;;){var x=q.x-a.x,G=q.y-
a.y,P=Math.sqrt(x*x+G*G),O=Math.max(b/P,d),x=u.positiveMod(Math.atan2(G/P,x/P)+t,u.C_2PI);J.push(new l(a,e,x,w,m,O,p));if(O<=d)return O;a=q.clone();do{h+=n;if(k.length<=h||0>h)return O;q=k[h]}while(a.isEqual(q));p=q.x-a.x;x=q.y-a.y;G=Math.sqrt(p*p+x*x);p*=P/G;x*=P/G;a.x-=p;a.y-=x;p=O}};return a}();a.PlacementEngine=w})},"esri/views/vectorTiles/Conflict":function(){define(["require","exports","../2d/engine/webgl/Geometry","./GeometryUtils"],function(w,a,c,u){Object.defineProperty(a,"__esModule",{value:!0});
w=function(){function a(a,b,c,e){this.left=a;this.top=b;this.right=c;this.bottom=e}a.prototype.clone=function(){return new a(this.left,this.top,this.right,this.bottom)};a.prototype.move=function(a,b){this.left+=a;this.top+=b;this.right+=a;this.bottom+=b};a.prototype.rotate=function(a,b){var d=this.left,c=this.right,m=this.top,h=this.bottom,l=d*a-m*b,n=d*b+m*a,p=c*a-m*b,m=c*b+m*a,u=d*a-h*b,d=d*b+h*a,w=c*a-h*b;a=c*b+h*a;this.left=Math.min(l,p,u,w);this.top=Math.min(n,m,d,a);this.right=Math.max(l,p,
u,w);this.bottom=Math.max(n,m,d,a)};a.overlaps=function(a,b){return a.right>b.left&&a.left<b.right&&a.bottom>b.top&&a.top<b.bottom};return a}();a.Box=w;var h=function(){function a(a,b,c,e){this.anchor=a;this.corners=b;this.minzoom=c;this.maxzoom=e}a.prototype.left=function(){return this.corners[0].x};a.prototype.right=function(){return this.corners[2].x};a.prototype.top=function(){return this.corners[1].y};a.prototype.bottom=function(){return this.corners[3].y};return a}();a.Obstacle=h;w=function(){function a(a,
b,c){this.obstacles=[];this.mapAngle=a;this.padding=b;this.isScreenAligned=c;this.minzoom=l}a.prototype.addBox=function(a,b,k,e,m,l,n){var d=b.left*k-this.padding,t=b.top*k-this.padding,x=b.right*k+this.padding;b=b.bottom*k+this.padding;d=[new c.Point(d,t),new c.Point(x,t),new c.Point(x,b),new c.Point(d,b)];0!==this.mapAngle&&(t=Math.cos(this.mapAngle),x=Math.sin(this.mapAngle),a=a.clone(),a.rotate(t,x));this.isScreenAligned||(e+=this.mapAngle);if(0!==e){t=Math.cos(e);x=Math.sin(e);d[0].rotate(t,
x);d[1].rotate(t,x);d[2].rotate(t,x);d[3].rotate(t,x);e=0;for(t=1;4>t;t++)d[t].x<d[e].x?e=t:d[t].x===d[e].x&&d[t].y<d[e].y&&(e=t);if(e){x=[];for(t=0;4>t;t++)x.push(d[(t+e)%4]);d=x}}if(m)for(e=0,t=d;e<t.length;e++)t[e].move(m[0],m[1]);this.obstacles.push(new h(a,d,l,n))};return a}();a.Footprint=w;var l=.5;w=function(){function a(){this._grid=[]}a.prototype.setAngle=function(a){};a.prototype.reset=function(){this._grid=[]};a.prototype.add=function(d){var b=this._grid,c=0;for(d=d.obstacles;c<d.length;c++)for(var e=
d[c],m=e.anchor,h=a._gridClamp(Math.min(e.left()+m.x,m.x)),l=a._gridClamp(Math.max(e.right()+m.x,m.x)),n=a._gridClamp(Math.min(e.top()+m.y,m.y)),m=a._gridClamp(Math.max(e.bottom()+m.y,m.y));n<=m;n++)for(var p=h;p<=l;p++){var u=b[16*n+p];u||(u=b[16*n+p]=[]);u.push(e)}};a.prototype.getMinZoom=function(d,b,c,e){if(0===d.obstacles.length)return u.C_INFINITY;c=this._grid;e=0;for(d=d.obstacles;e<d.length;e++)for(var k=d[e],h=k.anchor,l=a._gridClamp(Math.min(k.left()+h.x,h.x)),n=a._gridClamp(Math.max(k.right()+
h.x,h.x)),p=a._gridClamp(Math.min(k.top()+h.y,h.y)),h=a._gridClamp(Math.max(k.bottom()+h.y,h.y));p<=h;p++)for(var w=l;w<=n;w++){var J=c[16*p+w];if(J)for(var F=0;F<J.length;F++){var E=J[F];if(!(k.minzoom>=E.maxzoom||E.minzoom>=k.maxzoom)&&(b=a._calcPlacementZoom(k,E,b),2<=b))return u.C_INFINITY}}return 2>b?b:u.C_INFINITY};a._gridClamp=function(a){return u.clamp(a>>9,-7,8)};a._calcPlacementZoom=function(d,b,c){var e=b.anchor.x-d.anchor.x;if(0===e&&(d.right()<b.left()||b.right()<d.left()))return c;var k=
b.anchor.y-d.anchor.y;if(0===k&&(d.bottom()<b.top()||b.bottom()<d.top()))return c;var h=u.C_INFINITY;if(0!==e){var l=(0<e?d.right()-b.left():d.left()-b.right())/e;l<h&&(h=l);e=0<e?a._calcExtZoomX(d,b,l):a._calcExtZoomX(b,d,l);e<h&&(h=e)}0!==k&&(e=(0<k?d.bottom()-b.top():d.top()-b.bottom())/k,e<h&&(h=e),k=0<k?a._calcExtZoomY(d,b,e):a._calcExtZoomY(b,d,e),k<h&&(h=k));if(h<d.minzoom||h<b.minzoom)return c;h=Math.min(h,d.maxzoom,b.maxzoom);h<c&&(h=c);return h};a._calcExtZoomX=function(a,b,c){var d,k,h;
if(a.anchor.y+a.corners[2].y/c<b.anchor.y+b.corners[0].y/c){d=a.corners[2].x-a.corners[3].x;h=a.corners[2].y-a.corners[3].y;var l=b.corners[1].x-b.corners[0].x;k=b.corners[1].y-b.corners[0].y;0<=d*k-h*l?a.anchor.y+a.corners[3].y/c<b.anchor.y+b.corners[0].y/c?(c=a.corners[3],d=b.corners[0],k=b.corners[1],h=1):(c=b.corners[0],d=a.corners[3],k=a.corners[2],h=-1):a.anchor.y+a.corners[2].y/c>b.anchor.y+b.corners[1].y/c?(c=a.corners[2],d=b.corners[0],k=b.corners[1],h=1):(c=b.corners[1],d=a.corners[3],k=
a.corners[2],h=-1)}else d=a.corners[2].x-a.corners[1].x,h=a.corners[2].y-a.corners[1].y,l=b.corners[3].x-b.corners[0].x,k=b.corners[3].y-b.corners[0].y,0>d*k-h*l?a.anchor.y+a.corners[1].y/c>b.anchor.y+b.corners[0].y/c?(c=a.corners[1],d=b.corners[0],k=b.corners[3],h=1):(c=b.corners[0],d=a.corners[1],k=a.corners[2],h=-1):a.anchor.y+a.corners[2].y/c<b.anchor.y+b.corners[3].y/c?(c=a.corners[2],d=b.corners[0],k=b.corners[3],h=1):(c=b.corners[3],d=a.corners[1],k=a.corners[2],h=-1);l=k.x-d.x;k=k.y-d.y;return h*
((c.y-d.y)*l-(c.x-d.x)*k)/((a.anchor.x-b.anchor.x)*k-(a.anchor.y-b.anchor.y)*l)};a._calcExtZoomY=function(a,b,c){var d,k,h;if(a.anchor.x+a.corners[3].x/c<b.anchor.x+b.corners[1].x/c){d=a.corners[3].x-a.corners[2].x;h=a.corners[3].y-a.corners[2].y;var l=b.corners[0].x-b.corners[1].x;k=b.corners[0].y-b.corners[1].y;0>d*k-h*l?a.anchor.x+a.corners[2].x/c<b.anchor.x+b.corners[1].x/c?(c=a.corners[2],d=b.corners[1],k=b.corners[0],h=1):(c=b.corners[1],d=a.corners[2],k=a.corners[3],h=-1):a.anchor.x+a.corners[3].x/
c>b.anchor.x+b.corners[0].x/c?(c=a.corners[3],d=b.corners[1],k=b.corners[0],h=1):(c=b.corners[0],d=a.corners[2],k=a.corners[3],h=-1)}else d=a.corners[3].x-a.corners[0].x,h=a.corners[3].y-a.corners[0].y,l=b.corners[2].x-b.corners[1].x,k=b.corners[2].y-b.corners[1].y,0<d*k-h*l?a.anchor.x+a.corners[0].x/c>b.anchor.x+b.corners[1].x/c?(c=a.corners[0],d=b.corners[1],k=b.corners[2],h=1):(c=b.corners[1],d=a.corners[0],k=a.corners[3],h=-1):a.anchor.x+a.corners[3].x/c<b.anchor.x+b.corners[2].x/c?(c=a.corners[3],
d=b.corners[1],k=b.corners[2],h=1):(c=b.corners[2],d=a.corners[0],k=a.corners[3],h=-1);l=k.x-d.x;k=k.y-d.y;return h*((c.y-d.y)*l-(c.x-d.x)*k)/((a.anchor.x-b.anchor.x)*k-(a.anchor.y-b.anchor.y)*l)};return a}();a.ConflictEngine=w})},"esri/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(w,a,c){return function(){function a(a,c,n,d,b,k,e,m){this._glyphItems=a;this._maxWidth=c;this._lineHeight=n;this._letterSpacing=d;this._offset=b;this._hAnchor=k;this._vAnchor=
e;this._justify=m}a.prototype.getShaping=function(a,l){for(var h=this._letterSpacing,d=this._offset[0],b=this._offset[1],k=[],e=a.length,m=0;m<e;m++){for(var t=a.charCodeAt(m),x=void 0,q=0,p=this._glyphItems;q<p.length&&!(x=p[q][t]);q++);x&&(k.push(new c.ShapedGlyph(t,d,b,x)),d+=x.metrics.advance+h)}if(0<k.length){x=this._maxWidth;a=this._lineHeight;d=this._justify;b=k.length;t=e=h=0;if(0!==x)for(m=p=q=0;m<b;m++){var u=k[m];u.x-=p;u.y=l?u.y-a*h:u.y+a*h;if(u.x>x&&0<q){for(var w=k[q+1].x,t=Math.max(w,
t),F=q+1;F<=m;F++)k[F].y=l?k[F].y-a:k[F].y+a,k[F].x-=w;d&&this._applyJustification(k,e,q-1);e=q+1;q=0;p+=w;h++}32===u.glyph&&(q=m)}m=k[b-1];t=Math.max(t,m.x+m.glyphItem.metrics.advance);d&&this._applyJustification(k,e,b-1);m=(d-this._hAnchor)*t;d=(-this._vAnchor*(h+1)+.5)*a;l&&h&&(d+=h*a);for(l=0;l<k.length;l++)a=k[l],a.x+=m,a.y+=d}return k};a.prototype._applyJustification=function(a,c,n){for(var d=a[n],d=(d.x+d.glyphItem.metrics.advance)*this._justify;c<=n;c++)a[c].x-=d};return a}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/Stateful"],function(w,a,c){function u(a,b,c,e,f){var g=a;void 0===b&&(b=f.defInFormat);void 0===c&&(c=f.defOutFormat);void 0===e&&(e=f.defSwap);if(b!==c){var k,m=b.substring(0,1);k=b.substring(1,4);var n=c.substring(0,1),t=c.substring(1,4);"C"===k.charAt(0)&&(k=h(g),k="ltr"===k||"rtl"===k?k.toUpperCase():"L"===b.charAt(2)?"LTR":"RTL",b=m+k);"C"===t.charAt(0)&&(k=h(g),"rtl"===k?t="RTL":"ltr"===k?(g=g.split(""),g.reverse(),k=h(g.join("")),t=k.toUpperCase()):t="L"===c.charAt(2)?
"LTR":"RTL",c=n+t)}if(b===c)return a;n=b.substring(0,1);g=b.substring(1,4);m=c.substring(0,1);t=c.substring(1,4);f.inFormat=b;f.outFormat=c;f.swap=e;if("L"===n&&"VLTR"===c){if("LTR"===g)return f.dir=C,l(a,f);if("RTL"===g)return f.dir=S,l(a,f)}if("V"===n&&"V"===m)return f.dir="RTL"===g?S:C,d(a,f);if("L"===n&&"VRTL"===c)return f.dir="LTR"===g?C:S,a=l(a,f),d(a);if("VLTR"===b&&"LLTR"===c)return f.dir=C,l(a,f);if("V"===n&&"L"===m&&g!==t)return a=d(a),"RTL"===g?u(a,"LLTR","VLTR",e,f):u(a,"LRTL","VRTL",
e,f);if("VRTL"===b&&"LRTL"===c)return u(a,"LRTL","VRTL",e,f);if("L"===n&&"L"===m)return b=f.swap,f.swap=b.substr(0,1)+"N","RTL"===g?(f.dir=S,a=l(a,f),f.swap="N"+b.substr(1,2),f.dir=C,a=l(a,f)):(f.dir=C,a=l(a,f),f.swap="N"+b.substr(1,2),a=u(a,"VLTR","LRTL",f.swap,f)),a}function h(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?"ltr":"rtl":""}function l(a,d){a=a.split("");var b=[];n(a,b,d);if(0!==d.hiLevel&&d.swap.substr(0,1)!==d.swap.substr(1,
2))for(var c=0;c<a.length;c++)if(1===b[c]){var f=c,g;b:{g=a[c];for(var k=void 0,h=0,m=U.length-1;h<=m;)if(k=Math.floor((h+m)/2),g<U[k][0])m=k-1;else if(g>U[k][0])h=k+1;else{g=U[k][1];break b}}a[f]=g}e(2,a,b,d);e(1,a,b,d);E=b;return a.join("")}function n(a,d,b){var c=a.length,e=b.dir?fa:ca,f=null,g=null,k=null,f=0,g=g=null,h=-1,l=g=null,n=[],t=[];b.hiLevel=b.dir;b.lastArabic=!1;b.hasUbatAl=!1;b.hasUbatB=!1;b.hasUbatS=!1;for(g=0;g<c;g++){var l=g,k=a[g].charCodeAt(0),q=qa[k>>8];n[l]=q<Z?q:ra[q-Z][k&
255]}for(l=0;l<c;l++){t[l]=g=m(a,n,t,l,b);f=e[f][g];g=f&240;f&=15;d[l]=k=e[f][A];if(0<g){if(16===g)for(g=h;g<l;g++)d[g]=1;h=-1}if(g=e[f][v])-1===h&&(h=l);else if(-1<h){for(g=h;g<l;g++)d[g]=k;h=-1}n[l]===Y&&(d[l]=0);b.hiLevel|=k}if(b.hasUbatS)for(a=0;a<c;a++)if(n[a]===ka)for(d[a]=b.dir,e=a-1;0<=e;e--)if(n[e]===ma)d[e]=b.dir;else break}function d(a,b){a=a.split("");if(b){var d=[];n(a,d,b);E=d}a.reverse();J.reverse();return a.join("")}function b(a){for(var b=0;b<X.length;b++)if(a>=X[b]&&a<=da[b])return!0;
return!1}function k(a,d,c,e){for(;d*c<e&&x(a[d]);)d+=c;return d*c<e&&b(a[d])?!0:!1}function e(a,b,d,c){if(!(c.hiLevel<a))if(1!==a||c.dir!==S||c.hasUbatB){c=b.length;for(var e=0,f,g,k;e<c;){if(d[e]>=a){for(f=e+1;f<c&&d[f]>=a;)f++;for(g=f-1;e<g;e++,g--)k=b[e],b[e]=b[g],b[g]=k,k=J[e],J[e]=J[g],J[g]=k;e=f}e++}}else b.reverse(),J.reverse()}function m(a,b,d,c,e){return{UBAT_L:function(){e.lastArabic=!1;return ga},UBAT_R:function(){e.lastArabic=!1;return ea},UBAT_ON:function(){return W},UBAT_AN:function(){return ha},
UBAT_EN:function(){return e.lastArabic?ha:ba},UBAT_AL:function(){e.lastArabic=!0;e.hasUbatAl=!0;return ea},UBAT_WS:function(){return W},UBAT_CS:function(){var a,f;if(1>c||c+1>=b.length||(a=d[c-1])!==ba&&a!==ha||(f=b[c+1])!==ba&&f!==ha)return W;e.lastArabic&&(f=ha);return f===a?f:W},UBAT_ES:function(){return(0<c?d[c-1]:Y)===ba&&c+1<b.length&&b[c+1]===ba?ba:W},UBAT_ET:function(){if(0<c&&d[c-1]===ba)return ba;if(e.lastArabic)return W;for(var a=c+1,f=b.length;a<f&&b[a]===na;)a++;return a<f&&b[a]===ba?
ba:W},UBAT_NSM:function(){if("VLTR"===e.inFormat){for(var f=b.length,g=c+1;g<f&&b[g]===ja;)g++;if(g<f&&(f=a[c],g=b[g],(1425<=f&&2303>=f||64286===f)&&(g===ea||g===la)))return ea}return 1>c||b[c-1]===Y?W:d[c-1]},UBAT_B:function(){e.lastArabic=!0;e.hasUbatB=!0;return e.dir},UBAT_S:function(){e.hasUbatS=!0;return W},UBAT_LRE:function(){e.lastArabic=!1;return W},UBAT_RLE:function(){e.lastArabic=!1;return W},UBAT_LRO:function(){e.lastArabic=!1;return W},UBAT_RLO:function(){e.lastArabic=!1;return W},UBAT_PDF:function(){e.lastArabic=
!1;return W},UBAT_BN:function(){return W}}[oa[b[c]]]()}function t(a,b){for(var d=0;d<z.length;d++)if(a===z[d])return b[d];return a}function x(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function q(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function p(a,b){for(var d=0;d<T.length;d++)if(a===T[d])return b[d];return a}function G(a,b,d,c){for(var e=0;e<a.length;e++)if(a[e]>b||!d&&a[e]===b)a[e]+=c}w.getObject("string",!0,dojox);w=a("dojox.string.BidiEngine",
c,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,d,c){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var e=this.sourceToTarget,f=this.targetToSource,g=a.length;J=[];E=[];for(var h=0;h<g;h++)e[h]=h,f[h]=h,J[h]=h;if(!this.checkParameters(d,c))return a;d=this.inputFormat;c=this.outputFormat;var e=a,e=B,h=q(d.charAt(1)),f=q(c.charAt(1)),m="I"===d.charAt(0)?"L":d.charAt(0),g="I"===c.charAt(0)?"L":c.charAt(0),h=m+h,f=g+f,g=
d.charAt(2)+c.charAt(2);e.defInFormat=h;e.defOutFormat=f;e.defSwap=g;a=u(a,h,f,g,e);e=!1;if("R"===c.charAt(1))e=!0;else if("C"===c.charAt(1)||"D"===c.charAt(1))e=this.checkContextual(a);f=this.sourceToTarget=J;g=Array(f.length);for(h=0;h<f.length;h++)g[f[h]]=h;F=this.targetToSource=g;if(d.charAt(3)===c.charAt(3))e=a;else if("S"===c.charAt(3))if(d=e,c=!0,0===a.length)e=void 0;else{void 0===d&&(d=!0);void 0===c&&(c=!0);a=String(a);a=a.split("");var l=0,f=1,e=a.length;d||(l=a.length-1,f=-1,e=1);for(var g=
e,h=c,n=0,e=[],m=0;l*f<g;l+=f)if(b(a[l])||x(a[l])){var r;if(r="\u0644"===a[l])b:{for(var v=a,w=l+f,A=f,C=g;w*A<C&&x(v[w]);)w+=A;r=" ";if(w*A<C)for(r=v[w],v=0;v<T.length;v++)if(T[v]===r){r=!0;break b}r=!1}if(r){a[l]=0===n?p(a[l+f],I):p(a[l+f],R);l+=f;n=a;r=l;v=f;for(w=g;r*v<w&&x(n[r]);)r+=v;r*v<w&&(n[r]=" ");h&&(e[m]=l,m++);n=0}else{r=a[l];if(1===n){v=l;if(k(a,l+f,f,g))b:for(w=a[l],A=0;A<z.length;A++){if(w===z[A]){w=H[A];break b}}else w=t(a[l],D);a[v]=w}else!0===k(a,l+f,f,g)?a[l]=t(a[l],Q):a[l]=t(a[l],
y);x(r)||(n=1);b:{for(v=0;v<K.length;v++)if(K[v]===r){r=!0;break b}r=!1}!0===r&&(n=0)}}else n=0;f="";for(g=0;g<a.length;g++){if(h=c){b:{for(h=0;h<e.length;h++)if(e[h]===g)break b;h=-1}h=-1<h}h?(G(F,g,!d,-1),J.splice(g,1)):f+=a[g]}e=f}else if(d=a,c=e,a=!0,0===d.length)e=void 0;else for(void 0===a&&(a=!0),void 0===c&&(c=!0),d=String(d),e="",f=[],f=d.split(""),g=0;g<d.length;g++)h=!1,"\ufe70"<=f[g]&&"\ufeff">f[g]?(m=d.charCodeAt(g),"\ufef5"<=f[g]&&"\ufefc">=f[g]?(c?(0<g&&a&&" "===f[g-1]?e=e.substring(0,
e.length-1)+"\u0644":(e+="\u0644",h=!0),e+=T[(m-65269)/2]):(e+=T[(m-65269)/2],e+="\u0644",g+1<d.length&&a&&" "===f[g+1]?g++:h=!0),h&&(G(F,g,!0,1),J.splice(g,0,J[g]))):e+=L[m-65136]):e+=f[g];this.sourceToTarget=J;this.targetToSource=F;this.levels=E;return e},_inputFormatSetter:function(a){if(!P.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=a},_outputFormatSetter:function(a){if(!P.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");
this.outputFormat=a},checkParameters:function(a,d){a?this.set("inputFormat",a):a=this.inputFormat;d?this.set("outputFormat",d):d=this.outputFormat;return a===d?!1:!0},checkContextual:function(a){a=h(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(sa){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return O.test(a)}});var J=[],F=[],E=[],B={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,
hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},A=5,v=6,C=0,S=1,P=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,O=/[\u0591-\u06ff\ufb1d-\ufefc]/,U=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],
["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],T=["\u0622","\u0623","\u0625","\u0627"],I=["\ufef5","\ufef7","\ufef9","\ufefb"],R=["\ufef6","\ufef8","\ufefa","\ufefc"],z="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),
y="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),D="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),
H="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),Q="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),
K="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),L="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
X=["\u0621","\u0641"],da=["\u063a","\u064a"],ca=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],fa=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ga=0,ea=1,ba=2,ha=3,W=4,Y=5,ka=6,la=7,ma=8,na=11,ja=12,oa="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),Z=100;a=ga;c=ea;var M=ba,V=ha,f=W,ia=Y,pa=ka,g=la,aa=ma,N=
na,r=ja,qa=[Z+0,a,a,a,a,Z+1,Z+2,Z+3,c,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,Z+4,f,f,f,a,f,a,f,a,f,f,f,a,a,f,f,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,a,a,f,f,a,a,f,f,a,a,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,
f,f,f,f,f,f,f,f,a,a,a,Z+5,g,g,Z+6,Z+7],ra=[[18,18,18,18,18,18,18,18,18,pa,ia,pa,aa,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ia,ia,ia,pa,aa,f,f,N,N,N,f,f,f,f,f,10,9,10,9,9,M,M,M,M,M,M,M,M,M,M,9,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,18,18,18,18,18,18,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,f,N,N,N,N,f,f,f,f,a,f,f,18,f,f,N,N,M,M,f,a,f,f,f,M,a,f,f,f,f,f,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,a,a,a,a,a,a,a,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,a,f,f,f,f,f,f,f,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,
r,r,c,r,c,r,r,c,r,r,c,r,f,f,f,f,f,f,f,f,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,f,f,f,f,f,c,c,c,c,c,f,f,f,f,f,f,f,f,f,f,f],[V,V,V,V,f,f,f,f,g,N,N,g,9,g,f,f,r,r,r,r,r,r,r,r,r,r,r,g,f,f,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,V,V,V,V,V,V,V,V,V,V,N,V,V,g,g,g,r,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,
g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,r,r,r,r,r,r,r,V,f,r,r,r,r,r,r,g,g,r,r,f,r,r,r,r,g,g,M,M,M,M,M,M,M,M,M,M,g,g,g,g,g,g],[g,g,g,g,g,g,g,g,g,g,g,g,g,g,f,g,g,r,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,f,f,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,r,r,r,r,r,r,r,r,r,r,
r,g,f,f,f,f,f,f,f,f,f,f,f,f,f,f,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,r,r,r,r,r,r,r,r,r,c,c,f,f,f,f,c,f,f,f,f,f],[aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,18,18,18,a,c,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,aa,ia,13,14,15,16,17,9,N,N,N,N,N,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,9,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,aa,18,18,18,18,18,f,f,f,f,f,18,18,18,18,18,18,M,a,f,f,M,M,M,M,M,M,10,10,f,f,f,a,M,M,M,M,M,M,M,M,M,M,10,10,f,f,f,f,a,a,a,a,a,a,a,
a,a,a,a,a,a,f,f,f,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,f,f,f,f,f,c,r,c,c,c,c,c,c,c,c,c,c,10,c,c,c,c,c,c,c,c,c,c,c,c,c,f,c,c,c,c,c,f,c,f,c,c,f,c,c,f,c,c,c,c,c,c,c,c,c,c,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,
g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,r,r,r,r,r,r,r,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,9,f,9,f,f,9,f,f,f,f,f,f,f,f,f,N,f,f,10,10,f,f,f,f,f,N,N,f,f,f,f,f,g,g,g,g,g,f,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,
g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,f,f,18],[f,f,f,N,N,N,f,f,f,f,f,10,9,10,9,9,M,M,M,M,M,M,M,M,M,M,9,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,f,f,f,f,f,f,f,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,f,f,f,a,a,a,a,a,a,f,f,a,a,a,a,a,a,f,f,a,a,a,a,a,a,f,f,a,a,a,f,f,f,N,N,f,f,f,N,N,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f]];return w})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(w,a,c,u){return w("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var c=this._attrPairNames;return c[a]?c[a]:c[a]=
{s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,c){return"function"===typeof this[c.g]?this[c.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,c){if("object"===typeof a){for(var h in a)a.hasOwnProperty(h)&&"_watchCallbacks"!=h&&this.set(h,a[h]);return this}h=this._getAttrNames(a);var d=this._get(a,h);h=this[h.s];var b;"function"===typeof h?b=h.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=c;if(this._watchCallbacks){var k=
this;u(b,function(){k._watchCallbacks(a,d,c)})}return this},_changeAttrValue:function(a,c){var h=this.get(a);this[a]=c;this._watchCallbacks&&this._watchCallbacks(a,h,c);return this},watch:function(a,l){var h=this._watchCallbacks;if(!h)var d=this,h=this._watchCallbacks=function(a,b,c,l){var e=function(e){if(e){e=e.slice();for(var k=0,h=e.length;k<h;k++)e[k].call(d,a,b,c)}};e(h["_"+a]);l||e(h["*"])};l||"function"!==typeof a?a="_"+a:(l=a,a="*");var b=h[a];"object"!==typeof b&&(b=h[a]=[]);b.push(l);a=
{};a.unwatch=a.remove=function(){var a=c.indexOf(b,l);-1<a&&b.splice(a,1)};return a}})})},"esri/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(w,a,c,u){Object.defineProperty(a,"__esModule",{value:!0});var h=function(){return function(a,d,b){this.ratio=a;this.x=d;this.y=b}}();w=function(){function a(a,b,c,e,h){void 0===e&&(e=8);void 0===h&&(h=8);this.lines=[];this.starts=[];this.pixelRatio=e;this.pixelMargin=h;this.tileSize=512*e;
this.dz=a;this.yPos=b;this.xPos=c}a.prototype.setExtent=function(a){this.finalRatio=this.tileSize/a*(1<<this.dz);var d=this.pixelRatio*this.pixelMargin,d=d/this.finalRatio;a>>=this.dz;d>a&&(d=a);this.margin=d;this.xmin=a*this.xPos-d;this.ymin=a*this.yPos-d;this.xmax=this.xmin+a+2*d;this.ymax=this.ymin+a+2*d};a.prototype.reset=function(a){this.type=a;this.lines=[];this.starts=[];this.line=null;this.start=0};a.prototype.moveTo=function(a,b){this._pushLine();this._prevIsIn=this._isIn(a,b);this._moveTo(a,
b,this._prevIsIn);this._prevPt=new c.Point(a,b);this._firstPt=new c.Point(a,b);this._dist=0};a.prototype.lineTo=function(a,b){var d=this._isIn(a,b),e=new c.Point(a,b),m=c.Point.distance(this._prevPt,e),l,n,q;if(d)this._prevIsIn?this._lineTo(a,b,!0):(l=this._prevPt,n=e,a=this._intersect(n,l),this.start=this._dist+m*(1-this._r),this._lineTo(a.x,a.y,!0),this._lineTo(n.x,n.y,!0));else if(this._prevIsIn)n=this._prevPt,l=e,a=this._intersect(n,l),this._lineTo(a.x,a.y,!0),this._lineTo(l.x,l.y,!1);else{var p=
this._prevPt;if(!(p.x<=this.xmin&&e.x<=this.xmin||p.x>=this.xmax&&e.x>=this.xmax||p.y<=this.ymin&&e.y<=this.ymin||p.y>=this.ymax&&e.y>=this.ymax)){a=[];if(p.x<this.xmin&&e.x>this.xmin||p.x>this.xmin&&e.x<this.xmin)b=(this.xmin-p.x)/(e.x-p.x),q=p.y+b*(e.y-p.y),q<=this.ymin?n=!1:q>=this.ymax?n=!0:a.push(new h(b,this.xmin,q));if(p.x<this.xmax&&e.x>this.xmax||p.x>this.xmax&&e.x<this.xmax)b=(this.xmax-p.x)/(e.x-p.x),q=p.y+b*(e.y-p.y),q<=this.ymin?n=!1:q>=this.ymax?n=!0:a.push(new h(b,this.xmax,q));if(p.y<
this.ymin&&e.y>this.ymin||p.y>this.ymin&&e.y<this.ymin)b=(this.ymin-p.y)/(e.y-p.y),q=p.x+b*(e.x-p.x),q<=this.xmin?l=!1:q>=this.xmax?l=!0:a.push(new h(b,q,this.ymin));if(p.y<this.ymax&&e.y>this.ymax||p.y>this.ymax&&e.y<this.ymax)b=(this.ymax-p.y)/(e.y-p.y),q=p.x+b*(e.x-p.x),q<=this.xmin?l=!1:q>=this.xmax?l=!0:a.push(new h(b,q,this.ymax));if(0===a.length)l?n?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):n?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,
!0);else if(1<a.length&&a[0].ratio>a[1].ratio)this.start=this._dist+m*a[1].ratio,this._lineTo(a[1].x,a[1].y,!0),this._lineTo(a[0].x,a[0].y,!0);else for(this.start=this._dist+m*a[0].ratio,l=0;l<a.length;l++)this._lineTo(a[l].x,a[l].y,!0)}this._lineTo(e.x,e.y,!1)}this._dist+=m;this._prevIsIn=d;this._prevPt=e};a.prototype.close=function(){var a,b;0<this.line.length&&(a=this._firstPt,b=this._prevPt,a.x===b.x&&a.y===b.y||this.lineTo(a.x,a.y),a=this.line,b=a.length,4<=b&&(a[0].x===a[1].x&&a[0].x===a[b-
2].x||a[0].y===a[1].y&&a[0].y===a[b-2].y)&&(a.pop(),a[0].x=a[b-2].x,a[0].y=a[b-2].y))};a.prototype.result=function(){this._pushLine();if(0===this.lines.length)return null;3===this.type&&l.simplify(this.margin*this.finalRatio,this.lines);return this.lines};a.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var a=this.lines,b=a.length;if(0===b)return null;for(var c=[],e=0;e<b;e++)c.push({line:a[e],start:this.starts[e]||0});return c};a.prototype._isIn=
function(a,b){return a>=this.xmin&&a<=this.xmax&&b>=this.ymin&&b<=this.ymax};a.prototype._intersect=function(a,b){var d,e,h;if(b.x>=this.xmin&&b.x<=this.xmax)e=b.y<=this.ymin?this.ymin:this.ymax,h=(e-a.y)/(b.y-a.y),d=a.x+h*(b.x-a.x);else if(b.y>=this.ymin&&b.y<=this.ymax)d=b.x<=this.xmin?this.xmin:this.xmax,h=(d-a.x)/(b.x-a.x),e=a.y+h*(b.y-a.y);else{e=b.y<=this.ymin?this.ymin:this.ymax;d=b.x<=this.xmin?this.xmin:this.xmax;var l=(d-a.x)/(b.x-a.x),n=(e-a.y)/(b.y-a.y);l<n?(h=l,e=a.y+l*(b.y-a.y)):(h=
n,d=a.x+n*(b.x-a.x))}this._r=h;return new c.Point(d,e)};a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};a.prototype._moveTo=function(a,b,k){3!==this.type?k&&(a=Math.round((a-(this.xmin+this.margin))*
this.finalRatio),b=Math.round((b-(this.ymin+this.margin))*this.finalRatio),this.line.push(new c.Point(a,b))):(k||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),b<this.ymin&&(b=this.ymin),b>this.ymax&&(b=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),b=Math.round((b-(this.ymin+this.margin))*this.finalRatio),this.line.push(new c.Point(a,b)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,b,k){if(3!==this.type)if(k){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);
b=Math.round((b-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(k=this.line[this.line.length-1],k.equals(a,b)))return;this.line.push(new c.Point(a,b))}else this.line&&0<this.line.length&&this._pushLine();else if(k||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),b<this.ymin&&(b=this.ymin),b>this.ymax&&(b=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),b=Math.round((b-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){k=this.line[this.line.length-
1];var d=k.x===a,h=k.y===b;d&&h||(this._is_h&&d?(k.x=a,k.y=b,k=this.line[this.line.length-2],this._is_h=k.x===a,this._is_v=k.y===b):this._is_v&&h?(k.x=a,k.y=b,k=this.line[this.line.length-2],this._is_h=k.x===a,this._is_v=k.y===b):(this.line.push(new c.Point(a,b)),this._is_h=d,this._is_v=h))}else this.line.push(new c.Point(a,b))};return a}();a.TileClipper=w;w=function(){function a(){}a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=
[];this.line=null};a.prototype.moveTo=function(a,b){this.line&&this.lines.push(this.line);this.line=[];var d=this._ratio;this.line.push(new c.Point(Math.round(a*d),Math.round(b*d)))};a.prototype.lineTo=function(a,b){var d=this._ratio;this.line.push(new c.Point(Math.round(a*d),Math.round(b*d)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&
1!==this._ratio&&l.simplify(64,this.lines);return this.lines};return a}();a.SimpleBuilder=w;var l=function(){function a(){}a.simplify=function(d,b){if(b){var c=-d,e=4096+d,h=-d,l=4096+d;d=[];for(var n=[],q=b.length,p=0;p<q;++p){var u=b[p];if(u&&!(2>u.length))for(var w=u[0],F=void 0,E=u.length,B=1;B<E;++B)F=u[B],w.x===F.x&&(w.x<=c&&(w.y>F.y?(d.push(p),d.push(B),d.push(0),d.push(-1)):(n.push(p),n.push(B),n.push(0),n.push(-1))),w.x>=e&&(w.y<F.y?(d.push(p),d.push(B),d.push(1),d.push(-1)):(n.push(p),n.push(B),
n.push(1),n.push(-1)))),w.y===F.y&&(w.y<=h&&(w.x<F.x?(d.push(p),d.push(B),d.push(2),d.push(-1)):(n.push(p),n.push(B),n.push(2),n.push(-1))),w.y>=l&&(w.x>F.x?(d.push(p),d.push(B),d.push(3),d.push(-1)):(n.push(p),n.push(B),n.push(3),n.push(-1)))),w=F}0!==d.length&&0!==n.length&&(a.fillParent(b,n,d),a.fillParent(b,d,n),c=[],a.calcDeltas(c,n,d),a.calcDeltas(c,d,n),a.addDeltas(c,b))}};a.fillParent=function(a,b,c){for(var d=c.length,h=b.length,k=0;k<h;k+=4){for(var l=b[k],n=b[k+1],p=b[k+2],w=a[l][n-1],
l=a[l][n],n=8092,J=-1,F=0;F<d;F+=4)if(c[F+2]===p){var E=c[F],B=c[F+1],A=a[E][B-1],E=a[E][B];switch(p){case 0:case 1:u.between(w.y,A.y,E.y)&&u.between(l.y,A.y,E.y)&&(A=Math.abs(E.y-A.y),A<n&&(n=A,J=F));break;case 2:case 3:u.between(w.x,A.x,E.x)&&u.between(l.x,A.x,E.x)&&(A=Math.abs(E.x-A.x),A<n&&(n=A,J=F))}}b[k+3]=J}};a.calcDeltas=function(d,b,c){for(var e=b.length,h=0;h<e;h+=4){var k=a.calcDelta(h,b,c,[]);d.push(b[h]);d.push(b[h+1]);d.push(b[h+2]);d.push(k)}};a.calcDelta=function(d,b,c,e){d=b[d+3];
if(-1===d)return 0;var h=e.length;if(1<h&&e[h-2]===d)return 0;e.push(d);return a.calcDelta(d,c,b,e)+1};a.addDeltas=function(a,b){for(var d=a.length,c=0,h=0;h<d;h+=4){var l=a[h+3];l>c&&(c=l)}for(h=0;h<d;h+=4){var n=b[a[h]],q=a[h+1],l=c-a[h+3];switch(a[h+2]){case 0:n[q-1].x-=l;n[q].x-=l;break;case 1:n[q-1].x+=l;n[q].x+=l;break;case 2:n[q-1].y-=l;n[q].y-=l;break;case 3:n[q-1].y+=l,n[q].y+=l}}a=b.length;for(d=0;d<a;++d)n=b[d],!n||2>n.length||n[n.length-1].x!==n[0].x&&n[n.length-1].y!==n[0].y&&n.push(n[0])};
return a}()})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(w,a){function c(a,c){a%=c;return 0<=a?a:a+c}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var u=1/Math.LN2;a.positiveMod=c;a.radToByte=function(h){return c(h*
a.C_RAD_TO_256,256)};a.degToByte=function(h){return c(h*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*u};a.sqr=function(a){return a*a};a.clamp=function(a,c,n){return Math.min(Math.max(a,c),n)};a.interpolate=function(a,c,n){return a*(1-n)+c*n};a.between=function(a,c,n){return a>=c&&a<=n||a>=n&&a<=c}})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer","dojo/has"],function(w,a,c,u){return function(){function a(c,h){this.styleJSON=c;this.version=
parseFloat(c.version);this.sprite=h?h.spriteUrl:c.sprite;this.glyphs=h?h.glyphsUrl:c.glyphs;if(u("stable-symbol-rendering")){var d=(c.layers||[]).filter(function(a){return a.layout&&a.layout["text-font"]})[0];d&&(c.layers||[]).forEach(function(a){a.layout&&a.layout["text-font"]&&(a.layout["text-font"]=d.layout["text-font"])})}this.layers=(c.layers||[]).map(a._create);this._identifyRefLayers()}a.prototype._identifyRefLayers=function(){for(var a=[],c=[],d=0,b=0,h=this.layers;b<h.length;b++){var e=h[b];
if(1===e.type){var m=e,t=e.sourceLayer,t=t+("|"+JSON.stringify(e.minzoom)),t=t+("|"+JSON.stringify(e.maxzoom)),t=t+("|"+JSON.stringify(e.filter));if(m.hasDataDrivenFill||m.hasDataDrivenOutline)t+="|"+JSON.stringify(d);a.push({key:t,layer:e})}2===e.type&&(m=e,t=e.sourceLayer,t+="|"+JSON.stringify(e.minzoom),t+="|"+JSON.stringify(e.maxzoom),t+="|"+JSON.stringify(e.filter),t+="|"+JSON.stringify(e.layout&&e.layout["line-cap"]),t+="|"+JSON.stringify(e.layout&&e.layout["line-join"]),m.hasDataDrivenLine&&
(t+="|"+JSON.stringify(d)),c.push({key:t,layer:e}));++d}this._assignRefLayers(a);this._assignRefLayers(c)};a.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var c,d,b=a.length,h=0;h<b;h++){var e=a[h];if(e.key===c)e.layer.refLayerId=d;else if(c=e.key,d=e.layer.id,1===e.layer.type&&!e.layer.getPaintProperty("fill-outline-color"))for(var l=h+1;l<b;l++){var t=a[l];if(t.key===c){if(t.layer.getPaintProperty("fill-outline-color")){a[h]=t;a[l]=e;d=t.layer.id;
break}}else break}}};a._create=function(a,h,d){h=1-1/(d.length+1)*(1+h);switch(a.type){case "background":return new c.BackgroundStyleLayer(0,a,h);case "fill":return new c.FillStyleLayer(1,a,h);case "line":return new c.LineStyleLayer(2,a,h);case "symbol":return new c.SymbolStyleLayer(3,a,h);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");};return a}()})},"*noref":1}});
define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(w,a,c,u,h,l){return function(){function a(){this._tiles=new Map;this._spriteInfo={};this._glyphInfo={}}a.prototype.reset=function(){var a=new c;this._spriteInfo={};this._glyphInfo={};var b=this._tiles;b.forEach(function(a){return a.setObsolete()});b.clear();a.resolve();return a.promise};a.prototype.getLayers=function(){return this._layers};a.prototype.setLayers=function(a){this._layers=
(new l(a)).layers;return u.resolve({data:""})};a.prototype.getTile=function(a,b){var c=this,d=a.key,l=h.pool.acquire();l.initialize(a.key,a.refKey,this,a.rotation);var n=a.cacheTile;return b.invoke("fetchTileData",a.refKey).then(function(a){return l.setDataAndParse(a.protobuff,b).then(function(a){n&&6!==l.status&&c._tiles.set(d,l);return a}).otherwise(function(a){l.setObsolete();h.pool.release(l);c._tiles["delete"](l.tileKey);return u.reject(a)})}).otherwise(function(a){l.setObsolete();if(c._tiles.has(l.tileKey))c._tiles["delete"](l.tileKey);
return u.reject(a)}).always(function(a){n||h.pool.release(l);return a})};a.prototype.update=function(a){var b=this._tiles.get(a.key);return b?b.updateSymbols(a.rotation):u.reject()};a.prototype.destructTileData=function(a){this._tiles.has(a.key)&&(h.pool.release(this._tiles.get(a.key)),this._tiles["delete"](a.key));return u.resolve()};a.prototype.fetchSprites=function(a,b){var c=[],d=this._spriteInfo;a.forEach(function(a){void 0===d[a]&&c.push(a)});return 0===c.length?u.resolve():b.invoke("getSprites",
{sprites:c}).then(function(a){a=a.spriteItems;for(var b in a)d[b]=a[b]})};a.prototype.getSpriteItems=function(){return this._spriteInfo};a.prototype.fetchGlyphs=function(a,b,c,e){var d=[],h=this._glyphInfo[b];h?c.forEach(function(a){h[a]||d.push(a)}):(h=this._glyphInfo[b]=[],c.forEach(function(a){return d.push(a)}));return 0===d.length?u.resolve():e.invoke("getGlyphs",{tileID:a,font:b,codePoints:d}).then(function(a){a=a.glyphItems;for(var b in a)h[b]=a[b]})};a.prototype.getGlyphItems=function(a){return this._glyphInfo[a]};
return a}()});